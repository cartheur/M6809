0001                         
0002                         * small-c V2.3
0003 7000                           ORG $7000
0004                         
0005                         * .global i
0006                         i: 
0007 7000                     RMB 2
0008                         
0009                         * .global j
0010                         j: 
0011 7002                     RMB 2
0012                         
0013                         * .global n
0014                         n: 
0015 7004                     RMB 1
0016                         
0017                         * .global k
0018                         k: 
0019 7005                     RMB 1
0020                         
0021                         * .global u
0022                         u: 
0023 7006                     RMB 1
0024                         
0025                         * .global q
0026                         q: 
0027 7007                     RMB 1
0028                         
0029                         * .global o
0030                         o: 
0031 7008                     RMB 1
0032                         
0033                         * .global key
0034                         key: 
0035 7009                     RMB 1
0036                         
0037                         * .global x
0038                         x: 
0039 700a                     RMB 1
0040                         
0041                         * .global hit
0042                         hit: 
0043 700b                     RMB 1
0044                         
0045                         * .global positive
0046                         positive: 
0047 700c                     RMB 1
0048                         
0049                         * .global flag
0050                         flag: 
0051 700d                     RMB 1
0052                         
0053                         * .global tick
0054                         tick: 
0055 700e                     RMB 1
0056                         
0057                         * .global bcc
0058                         bcc: 
0059 700f                     RMB 1
0060                         
0061                         * .global save_bcc
0062                         save_bcc: 
0063 7010                     RMB 1
0064                         
0065                         * .global bcc_erro
0066                         bcc_erro: 
0067 7011                     RMB 1
0068                         
0069                         * .global temp
0070                         temp: 
0071 7012                     RMB 2
0072                         
0073                         * .global temp16
0074                         temp16: 
0075 7014                     RMB 2
0076                         
0077                         * .global PC
0078                         PC: 
0079 7016                     RMB 2
0080                         
0081                         * .global save_PC
0082                         save_PC: 
0083 7018                     RMB 2
0084                         
0085                         * .global num
0086                         num: 
0087 701a                     RMB 2
0088                         
0089                         * .global start
0090                         start: 
0091 701c                     RMB 2
0092                         
0093                         * .global end
0094                         end: 
0095 701e                     RMB 2
0096                         
0097                         * .global desti
0098                         desti: 
0099 7020                     RMB 2
0100                         
0101                         * .global t
0102                         t: 
0103 7022                     RMB 2
0104                         
0105                         * .global state
0106                         state: 
0107 7024                     RMB 1
0108                         
0109                         * .global USER_PC
0110                         USER_PC: 
0111 7025                     RMB 2
0112                         
0113                         * .global USER_U
0114                         USER_U: 
0115 7027                     RMB 2
0116                         
0117                         * .global USER_X
0118                         USER_X: 
0119 7029                     RMB 2
0120                         
0121                         * .global SAVE_SP
0122                         SAVE_SP: 
0123 702b                     RMB 2
0124                         
0125                         * .global USER_Y
0126                         USER_Y: 
0127 702d                     RMB 2
0128                         
0129                         * .global USER_A
0130                         USER_A: 
0131 702f                     RMB 1
0132                         
0133                         * .global USER_B
0134                         USER_B: 
0135 7030                     RMB 1
0136                         
0137                         * .global USER_P
0138                         USER_P: 
0139 7031                     RMB 1
0140                         
0141                         * .global USER_DP
0142                         USER_DP: 
0143 7032                     RMB 1
0144                         
0145                         * .global timeout
0146                         timeout: 
0147 7033                     RMB 2
0148                         
0149                         * .global buffer
0150                         buffer: 
0151 7035                     RMB 6
0152                         
0153                         * .global sbuffer
0154                         sbuffer: 
0155 703b                     RMB 128
0156                         
0157                         * .global gpio1
0158                         gpio1: 
0159 70bb 00 00               FDB 0
0160                         
0161                         * .global port2
0162                         port2: 
0163 70bd 00 00               FDB 0
0164                         
0165                         * .global port1
0166                         port1: 
0167 70bf 00 00               FDB 0
0168                         
0169                         * .global port0
0170                         port0: 
0171 70c1 00 00               FDB 0
0172                         
0173                         * .global dptr
0174                         dptr: 
0175 70c3 00 00               FDB 0
0176                         
0177                         * .global dptr2
0178                         dptr2: 
0179 70c5 00 00               FDB 0
0180 70c7                    ADR1:  RMB 2
0181 70c9                    ADR2:  RMB 2
0182 70cb                    ADR3:  RMB 1
0183 70cc                    ADR31: RMB 3
0184 fffe                       ORG  $fffe
0185 fffe c0 00                 FDB  $c000
0186 fff8                       org $fff8
0187                         *   fdb irq_serv
0188 fff8 7f f0                 fdb $7ff0       use ram vector
0189 fffc                       org $fffc
0190 fffc 7f f3                 fdb $7ff3        nmi vector
0191 fff6                       org $fff6
0192 fff6 7f f6                 fdb $7ff6        firq vector
0193 fffa                       org $fffa
0194 fffa c0 27                 fdb swi_serv
0195 c000                       ORG  $c000
0196 c000 10 ce 7f f0           lds  #$7ff0
0197 c004 86 7e                 lda #$7e        store jmp instruction 
0198 c006 b7 7f f0              sta $7ff0       irq vector
0199 c009 8e c0 23              ldx #irq_serv
0200 c00c bf 7f f1              stx $7ff1
0201 c00f 86 3b                 lda #$3b        store rti instruction
0202 c011 b7 7f f3              sta $7ff3       must be modified when testing
0203 c014 b7 7f f6              sta $7ff6       with ram vector
0204 c017 8e 00 00              ldx #0
0205 c01a bf 7f f4              stx $7ff4
0206 c01d bf 7f f7              stx $7ff7
0207 c020 7e ea 24              jmp  main
0208                         irq_serv
0209 c023 7c 70 0e              inc tick
0210 c026 3b                    rti
0211                         swi_serv
0212 c027 35 02                 PULS A
0213 c029 b7 70 31              STA USER_P
0214 c02c 35 02                 PULS A
0215 c02e b7 70 2f              STA USER_A
0216 c031 35 02                 PULS A
0217 c033 b7 70 30              STA USER_B
0218 c036 35 02                 PULS A
0219 c038 b7 70 32              STA USER_DP
0220 c03b 35 10                 PULS X
0221 c03d bf 70 29              STX USER_X
0222 c040 35 10                 PULS X
0223 c042 bf 70 2d              STX USER_Y
0224 c045 35 10                 PULS X
0225 c047 bf 70 27              STX USER_U
0226 c04a 35 10                 PULS X
0227 c04c bf 70 25              STX USER_PC
0228 c04f bf 70 18              stx save_PC
0229 c052 10 fe 70 2b           LDS SAVE_SP
0230 c056 bd d0 6d              JSR key_PC
0231 c059 39                    rts
0232                         *
0233                         * 16 bit division
0234                         *
0235                         *
0236                         * D=X/D
0237                         *
0238 c05a 7f 70 cc           ccdiv: CLR ADR31
0239 c05d bf 70 c7            STX ADR1
0240 c060 fd 70 c9            STD ADR2
0241 c063 2e 0b              ccd1: BGT ccd2
0242 c065 73 70 cc            COM ADR31
0243 c068 43                  COMA
0244 c069 53                  COMB
0245 c06a c3 00 01            ADDD #1
0246 c06d fd 70 c9            STD ADR2
0247 c070 fc 70 c7           ccd2: LDD ADR1
0248 c073 10 83 00 00         CMPD #0
0249 c077 2e 0b               BGT ccd3
0250 c079 73 70 cc            COM ADR31
0251 c07c 43                  COMA
0252 c07d 53                  COMB
0253 c07e c3 00 01            ADDD #1
0254 c081 fd 70 c7            STD ADR1
0255 c084 86 10              ccd3: LDA #16
0256 c086 b7 70 cb            STA ADR3
0257 c089 4f                  CLRA
0258 c08a 5f                  CLRB
0259                         DIVD:
0260 c08b 78 70 c8            ASL ADR1+1
0261 c08e 79 70 c7            ROL ADR1
0262 c091 59                  ROLB
0263 c092 49                  ROLA
0264 c093 10 b3 70 c9         CMPD ADR2
0265 c097 25 06               BLO NOSUB
0266 c099 b3 70 c9            SUBD ADR2
0267 c09c 7c 70 c8            INC ADR1+1
0268 c09f 7a 70 cb           NOSUB: DEC ADR3
0269 c0a2 26 e7               BNE DIVD
0270 c0a4 1f 01               TFR D,X
0271 c0a6 fc 70 c7            LDD ADR1
0272 c0a9 7d 70 cc            TST ADR31
0273 c0ac 27 05               BEQ ccd4
0274 c0ae 43                  COMA
0275 c0af 53                  COMB
0276 c0b0 c3 00 01            ADDD #1
0277 c0b3 39                 ccd4: RTS
0278                         *
0279                         * 16 bit multiplication
0280                         *
0281 c0b4 bf 70 c7           ccmult: STX ADR1
0282 c0b7 fd 70 c9            STD ADR2
0283 c0ba 7f 70 cb            CLR ADR3
0284 c0bd 7f 70 cc            CLR ADR3+1
0285 c0c0 b6 70 c8            LDA ADR1+1
0286 c0c3 f6 70 ca            LDB ADR2+1
0287 c0c6 3d                  MUL
0288 c0c7 fd 70 cd            STD ADR3+2
0289 c0ca b6 70 c7            LDA ADR1
0290 c0cd f6 70 ca            LDB ADR2+1
0291 c0d0 3d                  MUL
0292 c0d1 f3 70 cc            ADDD ADR3+1
0293 c0d4 fd 70 cc            STD ADR3+1
0294 c0d7 b6 70 c8            LDA ADR1+1
0295 c0da f6 70 c9            LDB ADR2
0296 c0dd 3d                  MUL
0297 c0de f3 70 cc            ADDD ADR3+1
0298 c0e1 fd 70 cc            STD ADR3+1
0299 c0e4 24 03               BCC NOCARRY
0300 c0e6 7c 70 cb            INC ADR3
0301 c0e9 b6 70 c7           NOCARRY: LDA ADR1
0302 c0ec f6 70 c9            LDB ADR2
0303 c0ef 3d                  MUL
0304 c0f0 f3 70 cb            ADDD ADR3
0305 c0f3 1f 01               TFR D,X
0306 c0f5 fc 70 cd            LDD ADR3+2
0307 c0f8 39                  RTS
0308                         *
0309                         *  switch statement
0310                         *
0311                         * D = switch value
0312                         * S = switch table
0313                         *     FDB addr1, value1
0314                         *     FDB addr2, value2
0315                         *     ...
0316                         *     FDB 0
0317                         *     [JMP DEFAULT]
0318                         *     continuation
0319                         *
0320 c0f9 35 10              ccswitch: PULS X get stack adr
0321 c0fb 10 ae 81           SWLOOP: LDY ,X++ get address
0322 c0fe 10 8c 00 00                CMPY #0 if 0
0323 c102 27 07                      BEQ SWEND then it is the default
0324 c104 10 a3 81                   CMPD ,X++ else, if it is not the switch value
0325 c107 26 f2                      BNE SWLOOP try next one
0326 c109 6e a4                      JMP ,Y else we found it
0327 c10b 6e 84              SWEND:  JMP ,X default exit
0328                         
0329                         *  .area  CONST  (REL,CON)
0330                         
0331                         * .global convert
0332                         convert: 
0333 c10d bd 30 9b ba 36 ae   FCB 189,48,155,186,54,174,175,56,191,190
     af 38 bf be
0334 c117 3f a7 8d b3 8f 0f   FCB 63,167,141,179,143,15
0335                         
0336                         * .global cold_msg
0337                         cold_msg: 
0338 c11d 00 00 00 00 00 00   FCB 0,0,0,0,0,0,174,191,189,190
     ae bf bd be
0339 c127 00 00               FCB 0,0
0340                         
0341                         *  .area  ROMCODE  (REL,CON)
0342                         
0343                         * .module LcdReady
0344                         
0345                         * .global LcdReady
0346                         LcdReady: 
0347 c129 cc 00 00            ldd  #0
0348 c12c fd 70 33            std  timeout
0349 c12f cc 90 02            ldd  #-28670
0350 c132 fd 70 c3            std  dptr
0351                         cc2:  
0352 c135 fc 70 c3            ldd  dptr
0353 c138 34 06               pshs d
0354 c13a e6 f1               ldb  [,s++]
0355 c13c 1d                  sex
0356 c13d 34 06               pshs d
0357 c13f cc 00 80            ldd  #128
0358 c142 34 06               pshs d
0359 c144 cc 00 01            ldd  #1
0360 c147 10 a3 e1            cmpd ,s++
0361 c14a 27 05               beq  *+7
0362 c14c cc 00 00            ldd  #0
0363 c14f 20 03               bra  *+5
0364 c151 cc 00 01            ldd  #1
0365 c154 a4 e0               anda ,s+
0366 c156 e4 e0               andb ,s+
0367 c158 10 83 00 00         cmpd #0
0368 c15c 10 27 00 20         lbeq cc4 ;_  instruction flagged for non optimize
0369 c160 fc 70 33            ldd  timeout
0370 c163 34 06               pshs d
0371 c165 cc 01 f4            ldd  #500
0372 c168 10 a3 e1            cmpd ,s++
0373 c16b 2e 05               bgt  *+7
0374 c16d cc 00 00            ldd  #0
0375 c170 20 03               bra  *+5
0376 c172 cc 00 01            ldd  #1
0377 c175 10 83 00 00         cmpd #0
0378 c179 10 27 00 03         lbeq cc4 ;_  instruction flagged for non optimize
0379 c17d cc 00 01            ldd  #1
0380                         cc4:  
0381 c180 10 83 00 00         cmpd #0
0382 c184 10 27 00 0c         lbeq cc3
0383 c188 fc 70 33            ldd  timeout
0384 c18b c3 00 01            addd #1
0385 c18e fd 70 33            std  timeout
0386 c191 7e c1 35            jmp cc2
0387                         cc3:  
0388 c194 39                  rts
0389                         
0390                         * .global clr_scre
0391                         clr_scre: 
0392 c195 bd c1 29            jsr LcdReady
0393 c198 cc 90 00            ldd  #-28672
0394 c19b fd 70 c3            std  dptr
0395 c19e fc 70 c3            ldd  dptr
0396 c1a1 34 06               pshs d
0397 c1a3 cc 00 01            ldd  #1
0398 c1a6 e7 f1               stb  [,s++]
0399 c1a8 39                  rts
0400                         
0401                         * .global goto_xy
0402                         goto_xy: 
0403 c1a9 bd c1 29            jsr LcdReady
0404 c1ac cc 90 00            ldd  #-28672
0405 c1af fd 70 c3            std  dptr
0406 c1b2 31 62               leay 2,s
0407 c1b4 1f 20               tfr  y,d
0408 c1b6 34 06               pshs d
0409 c1b8 ec f1               ldd  [,s++]
0410 c1ba 7e c2 24            jmp cc7
0411                         cc8:  
0412 c1bd fc 70 c3            ldd  dptr
0413 c1c0 34 06               pshs d
0414 c1c2 cc 00 80            ldd  #128
0415 c1c5 34 06               pshs d
0416 c1c7 31 68               leay 8,s
0417 c1c9 1f 20               tfr  y,d
0418 c1cb 34 06               pshs d
0419 c1cd ec f1               ldd  [,s++]
0420 c1cf e3 e1               addd ,s++
0421 c1d1 e7 f1               stb  [,s++]
0422 c1d3 7e c2 39            jmp cc6
0423                         cc9:  
0424 c1d6 fc 70 c3            ldd  dptr
0425 c1d9 34 06               pshs d
0426 c1db cc 00 c0            ldd  #192
0427 c1de 34 06               pshs d
0428 c1e0 31 68               leay 8,s
0429 c1e2 1f 20               tfr  y,d
0430 c1e4 34 06               pshs d
0431 c1e6 ec f1               ldd  [,s++]
0432 c1e8 e3 e1               addd ,s++
0433 c1ea e7 f1               stb  [,s++]
0434 c1ec 7e c2 39            jmp cc6
0435                         cc10:  
0436 c1ef fc 70 c3            ldd  dptr
0437 c1f2 34 06               pshs d
0438 c1f4 cc 00 94            ldd  #148
0439 c1f7 34 06               pshs d
0440 c1f9 31 68               leay 8,s
0441 c1fb 1f 20               tfr  y,d
0442 c1fd 34 06               pshs d
0443 c1ff ec f1               ldd  [,s++]
0444 c201 e3 e1               addd ,s++
0445 c203 e7 f1               stb  [,s++]
0446 c205 7e c2 39            jmp cc6
0447                         cc11:  
0448 c208 fc 70 c3            ldd  dptr
0449 c20b 34 06               pshs d
0450 c20d cc 00 d4            ldd  #212
0451 c210 34 06               pshs d
0452 c212 31 68               leay 8,s
0453 c214 1f 20               tfr  y,d
0454 c216 34 06               pshs d
0455 c218 ec f1               ldd  [,s++]
0456 c21a e3 e1               addd ,s++
0457 c21c e7 f1               stb  [,s++]
0458 c21e 7e c2 39            jmp cc6
0459 c221 7e c2 39            jmp cc6
0460                         cc7:  
0461 c224 bd c0 f9            jsr ccswitch
0462 c227 c1 bd 00 00         FDB cc8,0
0463 c22b c1 d6 00 01         FDB cc9,1
0464 c22f c1 ef 00 02         FDB cc10,2
0465 c233 c2 08 00 03         FDB cc11,3
0466 c237 00 00               FDB 0
0467                         cc6:  
0468 c239 39                  rts
0469                         
0470                         * .global InitLcd
0471                         InitLcd: 
0472 c23a bd c1 29            jsr LcdReady
0473 c23d cc 90 00            ldd  #-28672
0474 c240 fd 70 c3            std  dptr
0475 c243 fc 70 c3            ldd  dptr
0476 c246 34 06               pshs d
0477 c248 cc 00 38            ldd  #56
0478 c24b e7 f1               stb  [,s++]
0479 c24d bd c1 29            jsr LcdReady
0480 c250 cc 90 00            ldd  #-28672
0481 c253 fd 70 c3            std  dptr
0482 c256 fc 70 c3            ldd  dptr
0483 c259 34 06               pshs d
0484 c25b cc 00 0c            ldd  #12
0485 c25e e7 f1               stb  [,s++]
0486 c260 bd c1 95            jsr clr_scre
0487 c263 cc 00 00            ldd  #0
0488 c266 34 06               pshs d
0489 c268 cc 00 00            ldd  #0
0490 c26b 34 06               pshs d
0491 c26d bd c1 a9            jsr goto_xy
0492 c270 32 64               leas 4,s
0493 c272 cc 00 64            ldd  #100
0494 c275 34 06               pshs d
0495 c277 bd c8 53            jsr delay_ms
0496 c27a 32 62               leas 2,s
0497 c27c 39                  rts
0498                         
0499                         * .global PutLCD
0500                         PutLCD: 
0501 c27d 32 7f               leas -1,s
0502 c27f 31 e4               leay 0,s
0503 c281 1f 20               tfr  y,d
0504 c283 34 06               pshs d
0505 c285 cc 00 00            ldd  #0
0506 c288 e7 f1               stb  [,s++]
0507                         cc14:  
0508 c28a 31 63               leay 3,s
0509 c28c 1f 20               tfr  y,d
0510 c28e 34 06               pshs d
0511 c290 ec f1               ldd  [,s++]
0512 c292 34 06               pshs d
0513 c294 31 62               leay 2,s
0514 c296 1f 20               tfr  y,d
0515 c298 34 06               pshs d
0516 c29a e6 f1               ldb  [,s++]
0517 c29c 1d                  sex
0518 c29d e3 e1               addd ,s++
0519 c29f 34 06               pshs d
0520 c2a1 e6 f1               ldb  [,s++]
0521 c2a3 1d                  sex
0522 c2a4 34 06               pshs d
0523 c2a6 cc 00 00            ldd  #0
0524 c2a9 10 a3 e1            cmpd ,s++
0525 c2ac 26 05               bne   *+7
0526 c2ae cc 00 00            ldd  #0
0527 c2b1 20 03               bra  *+5
0528 c2b3 cc 00 01            ldd  #1
0529 c2b6 10 83 00 00         cmpd #0
0530 c2ba 10 27 00 46         lbeq cc13
0531 c2be 7e c2 d7            jmp cc15
0532                         cc12:  
0533 c2c1 31 e4               leay 0,s
0534 c2c3 1f 20               tfr  y,d
0535 c2c5 34 06               pshs d
0536 c2c7 34 06               pshs d
0537 c2c9 e6 f1               ldb  [,s++]
0538 c2cb 1d                  sex
0539 c2cc c3 00 01            addd #1
0540 c2cf e7 f1               stb  [,s++]
0541 c2d1 83 00 01            subd #1
0542 c2d4 7e c2 8a            jmp cc14
0543                         cc15:  
0544 c2d7 bd c1 29            jsr LcdReady
0545 c2da cc 90 01            ldd  #-28671
0546 c2dd fd 70 c3            std  dptr
0547 c2e0 fc 70 c3            ldd  dptr
0548 c2e3 34 06               pshs d
0549 c2e5 31 65               leay 5,s
0550 c2e7 1f 20               tfr  y,d
0551 c2e9 34 06               pshs d
0552 c2eb ec f1               ldd  [,s++]
0553 c2ed 34 06               pshs d
0554 c2ef 31 64               leay 4,s
0555 c2f1 1f 20               tfr  y,d
0556 c2f3 34 06               pshs d
0557 c2f5 e6 f1               ldb  [,s++]
0558 c2f7 1d                  sex
0559 c2f8 e3 e1               addd ,s++
0560 c2fa 34 06               pshs d
0561 c2fc e6 f1               ldb  [,s++]
0562 c2fe 1d                  sex
0563 c2ff e7 f1               stb  [,s++]
0564 c301 7e c2 c1            jmp cc12
0565                         cc13:  
0566 c304 32 61               leas 1,s
0567 c306 39                  rts
0568                         
0569                         * .global putch_lc
0570                         putch_lc: 
0571 c307 bd c1 29            jsr LcdReady
0572 c30a cc 90 01            ldd  #-28671
0573 c30d fd 70 c3            std  dptr
0574 c310 fc 70 c3            ldd  dptr
0575 c313 34 06               pshs d
0576 c315 31 65               leay 5,s
0577 c317 1f 20               tfr  y,d
0578 c319 34 06               pshs d
0579 c31b e6 f1               ldb  [,s++]
0580 c31d 1d                  sex
0581 c31e e7 f1               stb  [,s++]
0582 c320 39                  rts
0583                         
0584                         * .global key_code
0585                         key_code: 
0586 c321 32 7f               leas -1,s
0587 c323 31 64               leay 4,s
0588 c325 1f 20               tfr  y,d
0589 c327 34 06               pshs d
0590 c329 e6 f1               ldb  [,s++]
0591 c32b 1d                  sex
0592 c32c 34 06               pshs d
0593 c32e cc 00 16            ldd  #22
0594 c331 10 a3 e1            cmpd ,s++
0595 c334 27 05               beq  *+7
0596 c336 cc 00 00            ldd  #0
0597 c339 20 03               bra  *+5
0598 c33b cc 00 01            ldd  #1
0599 c33e 10 83 00 00         cmpd #0
0600 c342 10 27 00 06         lbeq cc16
0601 c346 cc 00 00            ldd  #0
0602 c349 32 61               leas 1,s
0603 c34b 39                  rts
0604                         cc16:  
0605 c34c 31 64               leay 4,s
0606 c34e 1f 20               tfr  y,d
0607 c350 34 06               pshs d
0608 c352 e6 f1               ldb  [,s++]
0609 c354 1d                  sex
0610 c355 34 06               pshs d
0611 c357 cc 00 21            ldd  #33
0612 c35a 10 a3 e1            cmpd ,s++
0613 c35d 27 05               beq  *+7
0614 c35f cc 00 00            ldd  #0
0615 c362 20 03               bra  *+5
0616 c364 cc 00 01            ldd  #1
0617 c367 10 83 00 00         cmpd #0
0618 c36b 10 27 00 06         lbeq cc17
0619 c36f cc 00 01            ldd  #1
0620 c372 32 61               leas 1,s
0621 c374 39                  rts
0622                         cc17:  
0623 c375 31 64               leay 4,s
0624 c377 1f 20               tfr  y,d
0625 c379 34 06               pshs d
0626 c37b e6 f1               ldb  [,s++]
0627 c37d 1d                  sex
0628 c37e 34 06               pshs d
0629 c380 cc 00 1b            ldd  #27
0630 c383 10 a3 e1            cmpd ,s++
0631 c386 27 05               beq  *+7
0632 c388 cc 00 00            ldd  #0
0633 c38b 20 03               bra  *+5
0634 c38d cc 00 01            ldd  #1
0635 c390 10 83 00 00         cmpd #0
0636 c394 10 27 00 06         lbeq cc18
0637 c398 cc 00 02            ldd  #2
0638 c39b 32 61               leas 1,s
0639 c39d 39                  rts
0640                         cc18:  
0641 c39e 31 64               leay 4,s
0642 c3a0 1f 20               tfr  y,d
0643 c3a2 34 06               pshs d
0644 c3a4 e6 f1               ldb  [,s++]
0645 c3a6 1d                  sex
0646 c3a7 34 06               pshs d
0647 c3a9 cc 00 15            ldd  #21
0648 c3ac 10 a3 e1            cmpd ,s++
0649 c3af 27 05               beq  *+7
0650 c3b1 cc 00 00            ldd  #0
0651 c3b4 20 03               bra  *+5
0652 c3b6 cc 00 01            ldd  #1
0653 c3b9 10 83 00 00         cmpd #0
0654 c3bd 10 27 00 06         lbeq cc19
0655 c3c1 cc 00 03            ldd  #3
0656 c3c4 32 61               leas 1,s
0657 c3c6 39                  rts
0658                         cc19:  
0659 c3c7 31 64               leay 4,s
0660 c3c9 1f 20               tfr  y,d
0661 c3cb 34 06               pshs d
0662 c3cd e6 f1               ldb  [,s++]
0663 c3cf 1d                  sex
0664 c3d0 34 06               pshs d
0665 c3d2 cc 00 1c            ldd  #28
0666 c3d5 10 a3 e1            cmpd ,s++
0667 c3d8 27 05               beq  *+7
0668 c3da cc 00 00            ldd  #0
0669 c3dd 20 03               bra  *+5
0670 c3df cc 00 01            ldd  #1
0671 c3e2 10 83 00 00         cmpd #0
0672 c3e6 10 27 00 06         lbeq cc20
0673 c3ea cc 00 04            ldd  #4
0674 c3ed 32 61               leas 1,s
0675 c3ef 39                  rts
0676                         cc20:  
0677 c3f0 31 64               leay 4,s
0678 c3f2 1f 20               tfr  y,d
0679 c3f4 34 06               pshs d
0680 c3f6 e6 f1               ldb  [,s++]
0681 c3f8 1d                  sex
0682 c3f9 34 06               pshs d
0683 c3fb cc 00 20            ldd  #32
0684 c3fe 10 a3 e1            cmpd ,s++
0685 c401 27 05               beq  *+7
0686 c403 cc 00 00            ldd  #0
0687 c406 20 03               bra  *+5
0688 c408 cc 00 01            ldd  #1
0689 c40b 10 83 00 00         cmpd #0
0690 c40f 10 27 00 06         lbeq cc21
0691 c413 cc 00 05            ldd  #5
0692 c416 32 61               leas 1,s
0693 c418 39                  rts
0694                         cc21:  
0695 c419 31 64               leay 4,s
0696 c41b 1f 20               tfr  y,d
0697 c41d 34 06               pshs d
0698 c41f e6 f1               ldb  [,s++]
0699 c421 1d                  sex
0700 c422 34 06               pshs d
0701 c424 cc 00 1a            ldd  #26
0702 c427 10 a3 e1            cmpd ,s++
0703 c42a 27 05               beq  *+7
0704 c42c cc 00 00            ldd  #0
0705 c42f 20 03               bra  *+5
0706 c431 cc 00 01            ldd  #1
0707 c434 10 83 00 00         cmpd #0
0708 c438 10 27 00 06         lbeq cc22
0709 c43c cc 00 06            ldd  #6
0710 c43f 32 61               leas 1,s
0711 c441 39                  rts
0712                         cc22:  
0713 c442 31 64               leay 4,s
0714 c444 1f 20               tfr  y,d
0715 c446 34 06               pshs d
0716 c448 e6 f1               ldb  [,s++]
0717 c44a 1d                  sex
0718 c44b 34 06               pshs d
0719 c44d cc 00 14            ldd  #20
0720 c450 10 a3 e1            cmpd ,s++
0721 c453 27 05               beq  *+7
0722 c455 cc 00 00            ldd  #0
0723 c458 20 03               bra  *+5
0724 c45a cc 00 01            ldd  #1
0725 c45d 10 83 00 00         cmpd #0
0726 c461 10 27 00 06         lbeq cc23
0727 c465 cc 00 07            ldd  #7
0728 c468 32 61               leas 1,s
0729 c46a 39                  rts
0730                         cc23:  
0731 c46b 31 64               leay 4,s
0732 c46d 1f 20               tfr  y,d
0733 c46f 34 06               pshs d
0734 c471 e6 f1               ldb  [,s++]
0735 c473 1d                  sex
0736 c474 34 06               pshs d
0737 c476 cc 00 22            ldd  #34
0738 c479 10 a3 e1            cmpd ,s++
0739 c47c 27 05               beq  *+7
0740 c47e cc 00 00            ldd  #0
0741 c481 20 03               bra  *+5
0742 c483 cc 00 01            ldd  #1
0743 c486 10 83 00 00         cmpd #0
0744 c48a 10 27 00 06         lbeq cc24
0745 c48e cc 00 08            ldd  #8
0746 c491 32 61               leas 1,s
0747 c493 39                  rts
0748                         cc24:  
0749 c494 31 64               leay 4,s
0750 c496 1f 20               tfr  y,d
0751 c498 34 06               pshs d
0752 c49a e6 f1               ldb  [,s++]
0753 c49c 1d                  sex
0754 c49d 34 06               pshs d
0755 c49f cc 00 1f            ldd  #31
0756 c4a2 10 a3 e1            cmpd ,s++
0757 c4a5 27 05               beq  *+7
0758 c4a7 cc 00 00            ldd  #0
0759 c4aa 20 03               bra  *+5
0760 c4ac cc 00 01            ldd  #1
0761 c4af 10 83 00 00         cmpd #0
0762 c4b3 10 27 00 06         lbeq cc25
0763 c4b7 cc 00 09            ldd  #9
0764 c4ba 32 61               leas 1,s
0765 c4bc 39                  rts
0766                         cc25:  
0767 c4bd 31 64               leay 4,s
0768 c4bf 1f 20               tfr  y,d
0769 c4c1 34 06               pshs d
0770 c4c3 e6 f1               ldb  [,s++]
0771 c4c5 1d                  sex
0772 c4c6 34 06               pshs d
0773 c4c8 cc 00 19            ldd  #25
0774 c4cb 10 a3 e1            cmpd ,s++
0775 c4ce 27 05               beq  *+7
0776 c4d0 cc 00 00            ldd  #0
0777 c4d3 20 03               bra  *+5
0778 c4d5 cc 00 01            ldd  #1
0779 c4d8 10 83 00 00         cmpd #0
0780 c4dc 10 27 00 06         lbeq cc26
0781 c4e0 cc 00 0a            ldd  #10
0782 c4e3 32 61               leas 1,s
0783 c4e5 39                  rts
0784                         cc26:  
0785 c4e6 31 64               leay 4,s
0786 c4e8 1f 20               tfr  y,d
0787 c4ea 34 06               pshs d
0788 c4ec e6 f1               ldb  [,s++]
0789 c4ee 1d                  sex
0790 c4ef 34 06               pshs d
0791 c4f1 cc 00 13            ldd  #19
0792 c4f4 10 a3 e1            cmpd ,s++
0793 c4f7 27 05               beq  *+7
0794 c4f9 cc 00 00            ldd  #0
0795 c4fc 20 03               bra  *+5
0796 c4fe cc 00 01            ldd  #1
0797 c501 10 83 00 00         cmpd #0
0798 c505 10 27 00 06         lbeq cc27
0799 c509 cc 00 0b            ldd  #11
0800 c50c 32 61               leas 1,s
0801 c50e 39                  rts
0802                         cc27:  
0803 c50f 31 64               leay 4,s
0804 c511 1f 20               tfr  y,d
0805 c513 34 06               pshs d
0806 c515 e6 f1               ldb  [,s++]
0807 c517 1d                  sex
0808 c518 34 06               pshs d
0809 c51a cc 00 03            ldd  #3
0810 c51d 10 a3 e1            cmpd ,s++
0811 c520 27 05               beq  *+7
0812 c522 cc 00 00            ldd  #0
0813 c525 20 03               bra  *+5
0814 c527 cc 00 01            ldd  #1
0815 c52a 10 83 00 00         cmpd #0
0816 c52e 10 27 00 06         lbeq cc28
0817 c532 cc 00 0c            ldd  #12
0818 c535 32 61               leas 1,s
0819 c537 39                  rts
0820                         cc28:  
0821 c538 31 64               leay 4,s
0822 c53a 1f 20               tfr  y,d
0823 c53c 34 06               pshs d
0824 c53e e6 f1               ldb  [,s++]
0825 c540 1d                  sex
0826 c541 34 06               pshs d
0827 c543 cc 00 1e            ldd  #30
0828 c546 10 a3 e1            cmpd ,s++
0829 c549 27 05               beq  *+7
0830 c54b cc 00 00            ldd  #0
0831 c54e 20 03               bra  *+5
0832 c550 cc 00 01            ldd  #1
0833 c553 10 83 00 00         cmpd #0
0834 c557 10 27 00 06         lbeq cc29
0835 c55b cc 00 0d            ldd  #13
0836 c55e 32 61               leas 1,s
0837 c560 39                  rts
0838                         cc29:  
0839 c561 31 64               leay 4,s
0840 c563 1f 20               tfr  y,d
0841 c565 34 06               pshs d
0842 c567 e6 f1               ldb  [,s++]
0843 c569 1d                  sex
0844 c56a 34 06               pshs d
0845 c56c cc 00 18            ldd  #24
0846 c56f 10 a3 e1            cmpd ,s++
0847 c572 27 05               beq  *+7
0848 c574 cc 00 00            ldd  #0
0849 c577 20 03               bra  *+5
0850 c579 cc 00 01            ldd  #1
0851 c57c 10 83 00 00         cmpd #0
0852 c580 10 27 00 06         lbeq cc30
0853 c584 cc 00 0e            ldd  #14
0854 c587 32 61               leas 1,s
0855 c589 39                  rts
0856                         cc30:  
0857 c58a 31 64               leay 4,s
0858 c58c 1f 20               tfr  y,d
0859 c58e 34 06               pshs d
0860 c590 e6 f1               ldb  [,s++]
0861 c592 1d                  sex
0862 c593 34 06               pshs d
0863 c595 cc 00 12            ldd  #18
0864 c598 10 a3 e1            cmpd ,s++
0865 c59b 27 05               beq  *+7
0866 c59d cc 00 00            ldd  #0
0867 c5a0 20 03               bra  *+5
0868 c5a2 cc 00 01            ldd  #1
0869 c5a5 10 83 00 00         cmpd #0
0870 c5a9 10 27 00 06         lbeq cc31
0871 c5ad cc 00 0f            ldd  #15
0872 c5b0 32 61               leas 1,s
0873 c5b2 39                  rts
0874                         cc31:  
0875 c5b3 31 64               leay 4,s
0876 c5b5 1f 20               tfr  y,d
0877 c5b7 34 06               pshs d
0878 c5b9 e6 f1               ldb  [,s++]
0879 c5bb 1d                  sex
0880 c5bc 34 06               pshs d
0881 c5be cc 00 0c            ldd  #12
0882 c5c1 10 a3 e1            cmpd ,s++
0883 c5c4 27 05               beq  *+7
0884 c5c6 cc 00 00            ldd  #0
0885 c5c9 20 03               bra  *+5
0886 c5cb cc 00 01            ldd  #1
0887 c5ce 10 83 00 00         cmpd #0
0888 c5d2 10 27 00 06         lbeq cc32
0889 c5d6 cc 00 10            ldd  #16
0890 c5d9 32 61               leas 1,s
0891 c5db 39                  rts
0892                         cc32:  
0893 c5dc 31 64               leay 4,s
0894 c5de 1f 20               tfr  y,d
0895 c5e0 34 06               pshs d
0896 c5e2 e6 f1               ldb  [,s++]
0897 c5e4 1d                  sex
0898 c5e5 34 06               pshs d
0899 c5e7 cc 00 0d            ldd  #13
0900 c5ea 10 a3 e1            cmpd ,s++
0901 c5ed 27 05               beq  *+7
0902 c5ef cc 00 00            ldd  #0
0903 c5f2 20 03               bra  *+5
0904 c5f4 cc 00 01            ldd  #1
0905 c5f7 10 83 00 00         cmpd #0
0906 c5fb 10 27 00 06         lbeq cc33
0907 c5ff cc 00 11            ldd  #17
0908 c602 32 61               leas 1,s
0909 c604 39                  rts
0910                         cc33:  
0911 c605 31 64               leay 4,s
0912 c607 1f 20               tfr  y,d
0913 c609 34 06               pshs d
0914 c60b e6 f1               ldb  [,s++]
0915 c60d 1d                  sex
0916 c60e 34 06               pshs d
0917 c610 cc 00 0e            ldd  #14
0918 c613 10 a3 e1            cmpd ,s++
0919 c616 27 05               beq  *+7
0920 c618 cc 00 00            ldd  #0
0921 c61b 20 03               bra  *+5
0922 c61d cc 00 01            ldd  #1
0923 c620 10 83 00 00         cmpd #0
0924 c624 10 27 00 06         lbeq cc34
0925 c628 cc 00 12            ldd  #18
0926 c62b 32 61               leas 1,s
0927 c62d 39                  rts
0928                         cc34:  
0929 c62e 31 64               leay 4,s
0930 c630 1f 20               tfr  y,d
0931 c632 34 06               pshs d
0932 c634 e6 f1               ldb  [,s++]
0933 c636 1d                  sex
0934 c637 34 06               pshs d
0935 c639 cc 00 0f            ldd  #15
0936 c63c 10 a3 e1            cmpd ,s++
0937 c63f 27 05               beq  *+7
0938 c641 cc 00 00            ldd  #0
0939 c644 20 03               bra  *+5
0940 c646 cc 00 01            ldd  #1
0941 c649 10 83 00 00         cmpd #0
0942 c64d 10 27 00 06         lbeq cc35
0943 c651 cc 00 13            ldd  #19
0944 c654 32 61               leas 1,s
0945 c656 39                  rts
0946                         cc35:  
0947 c657 31 64               leay 4,s
0948 c659 1f 20               tfr  y,d
0949 c65b 34 06               pshs d
0950 c65d e6 f1               ldb  [,s++]
0951 c65f 1d                  sex
0952 c660 34 06               pshs d
0953 c662 cc 00 06            ldd  #6
0954 c665 10 a3 e1            cmpd ,s++
0955 c668 27 05               beq  *+7
0956 c66a cc 00 00            ldd  #0
0957 c66d 20 03               bra  *+5
0958 c66f cc 00 01            ldd  #1
0959 c672 10 83 00 00         cmpd #0
0960 c676 10 27 00 06         lbeq cc36
0961 c67a cc 00 14            ldd  #20
0962 c67d 32 61               leas 1,s
0963 c67f 39                  rts
0964                         cc36:  
0965 c680 31 64               leay 4,s
0966 c682 1f 20               tfr  y,d
0967 c684 34 06               pshs d
0968 c686 e6 f1               ldb  [,s++]
0969 c688 1d                  sex
0970 c689 34 06               pshs d
0971 c68b cc 00 07            ldd  #7
0972 c68e 10 a3 e1            cmpd ,s++
0973 c691 27 05               beq  *+7
0974 c693 cc 00 00            ldd  #0
0975 c696 20 03               bra  *+5
0976 c698 cc 00 01            ldd  #1
0977 c69b 10 83 00 00         cmpd #0
0978 c69f 10 27 00 06         lbeq cc37
0979 c6a3 cc 00 15            ldd  #21
0980 c6a6 32 61               leas 1,s
0981 c6a8 39                  rts
0982                         cc37:  
0983 c6a9 31 64               leay 4,s
0984 c6ab 1f 20               tfr  y,d
0985 c6ad 34 06               pshs d
0986 c6af e6 f1               ldb  [,s++]
0987 c6b1 1d                  sex
0988 c6b2 34 06               pshs d
0989 c6b4 cc 00 08            ldd  #8
0990 c6b7 10 a3 e1            cmpd ,s++
0991 c6ba 27 05               beq  *+7
0992 c6bc cc 00 00            ldd  #0
0993 c6bf 20 03               bra  *+5
0994 c6c1 cc 00 01            ldd  #1
0995 c6c4 10 83 00 00         cmpd #0
0996 c6c8 10 27 00 06         lbeq cc38
0997 c6cc cc 00 16            ldd  #22
0998 c6cf 32 61               leas 1,s
0999 c6d1 39                  rts
1000                         cc38:  
1001 c6d2 31 64               leay 4,s
1002 c6d4 1f 20               tfr  y,d
1003 c6d6 34 06               pshs d
1004 c6d8 e6 f1               ldb  [,s++]
1005 c6da 1d                  sex
1006 c6db 34 06               pshs d
1007 c6dd cc 00 09            ldd  #9
1008 c6e0 10 a3 e1            cmpd ,s++
1009 c6e3 27 05               beq  *+7
1010 c6e5 cc 00 00            ldd  #0
1011 c6e8 20 03               bra  *+5
1012 c6ea cc 00 01            ldd  #1
1013 c6ed 10 83 00 00         cmpd #0
1014 c6f1 10 27 00 06         lbeq cc39
1015 c6f5 cc 00 17            ldd  #23
1016 c6f8 32 61               leas 1,s
1017 c6fa 39                  rts
1018                         cc39:  
1019 c6fb 31 64               leay 4,s
1020 c6fd 1f 20               tfr  y,d
1021 c6ff 34 06               pshs d
1022 c701 e6 f1               ldb  [,s++]
1023 c703 1d                  sex
1024 c704 34 06               pshs d
1025 c706 cc 00 00            ldd  #0
1026 c709 10 a3 e1            cmpd ,s++
1027 c70c 27 05               beq  *+7
1028 c70e cc 00 00            ldd  #0
1029 c711 20 03               bra  *+5
1030 c713 cc 00 01            ldd  #1
1031 c716 10 83 00 00         cmpd #0
1032 c71a 10 27 00 06         lbeq cc40
1033 c71e cc 00 18            ldd  #24
1034 c721 32 61               leas 1,s
1035 c723 39                  rts
1036                         cc40:  
1037 c724 31 64               leay 4,s
1038 c726 1f 20               tfr  y,d
1039 c728 34 06               pshs d
1040 c72a e6 f1               ldb  [,s++]
1041 c72c 1d                  sex
1042 c72d 34 06               pshs d
1043 c72f cc 00 01            ldd  #1
1044 c732 10 a3 e1            cmpd ,s++
1045 c735 27 05               beq  *+7
1046 c737 cc 00 00            ldd  #0
1047 c73a 20 03               bra  *+5
1048 c73c cc 00 01            ldd  #1
1049 c73f 10 83 00 00         cmpd #0
1050 c743 10 27 00 06         lbeq cc41
1051 c747 cc 00 19            ldd  #25
1052 c74a 32 61               leas 1,s
1053 c74c 39                  rts
1054                         cc41:  
1055 c74d 31 64               leay 4,s
1056 c74f 1f 20               tfr  y,d
1057 c751 34 06               pshs d
1058 c753 e6 f1               ldb  [,s++]
1059 c755 1d                  sex
1060 c756 34 06               pshs d
1061 c758 cc 00 02            ldd  #2
1062 c75b 10 a3 e1            cmpd ,s++
1063 c75e 27 05               beq  *+7
1064 c760 cc 00 00            ldd  #0
1065 c763 20 03               bra  *+5
1066 c765 cc 00 01            ldd  #1
1067 c768 10 83 00 00         cmpd #0
1068 c76c 10 27 00 06         lbeq cc42
1069 c770 cc 00 1a            ldd  #26
1070 c773 32 61               leas 1,s
1071 c775 39                  rts
1072                         cc42:  
1073 c776 31 64               leay 4,s
1074 c778 1f 20               tfr  y,d
1075 c77a 34 06               pshs d
1076 c77c e6 f1               ldb  [,s++]
1077 c77e 1d                  sex
1078 c77f 34 06               pshs d
1079 c781 cc 00 24            ldd  #36
1080 c784 10 a3 e1            cmpd ,s++
1081 c787 27 05               beq  *+7
1082 c789 cc 00 00            ldd  #0
1083 c78c 20 03               bra  *+5
1084 c78e cc 00 01            ldd  #1
1085 c791 10 83 00 00         cmpd #0
1086 c795 10 27 00 06         lbeq cc43
1087 c799 cc 00 1b            ldd  #27
1088 c79c 32 61               leas 1,s
1089 c79e 39                  rts
1090                         cc43:  
1091 c79f 31 64               leay 4,s
1092 c7a1 1f 20               tfr  y,d
1093 c7a3 34 06               pshs d
1094 c7a5 e6 f1               ldb  [,s++]
1095 c7a7 1d                  sex
1096 c7a8 34 06               pshs d
1097 c7aa cc 00 23            ldd  #35
1098 c7ad 10 a3 e1            cmpd ,s++
1099 c7b0 27 05               beq  *+7
1100 c7b2 cc 00 00            ldd  #0
1101 c7b5 20 03               bra  *+5
1102 c7b7 cc 00 01            ldd  #1
1103 c7ba 10 83 00 00         cmpd #0
1104 c7be 10 27 00 06         lbeq cc44
1105 c7c2 cc 00 1c            ldd  #28
1106 c7c5 32 61               leas 1,s
1107 c7c7 39                  rts
1108                         cc44:  
1109 c7c8 31 64               leay 4,s
1110 c7ca 1f 20               tfr  y,d
1111 c7cc 34 06               pshs d
1112 c7ce e6 f1               ldb  [,s++]
1113 c7d0 1d                  sex
1114 c7d1 34 06               pshs d
1115 c7d3 cc 00 1d            ldd  #29
1116 c7d6 10 a3 e1            cmpd ,s++
1117 c7d9 27 05               beq  *+7
1118 c7db cc 00 00            ldd  #0
1119 c7de 20 03               bra  *+5
1120 c7e0 cc 00 01            ldd  #1
1121 c7e3 10 83 00 00         cmpd #0
1122 c7e7 10 27 00 06         lbeq cc45
1123 c7eb cc 00 1d            ldd  #29
1124 c7ee 32 61               leas 1,s
1125 c7f0 39                  rts
1126                         cc45:  
1127 c7f1 31 64               leay 4,s
1128 c7f3 1f 20               tfr  y,d
1129 c7f5 34 06               pshs d
1130 c7f7 e6 f1               ldb  [,s++]
1131 c7f9 1d                  sex
1132 c7fa 34 06               pshs d
1133 c7fc cc 00 17            ldd  #23
1134 c7ff 10 a3 e1            cmpd ,s++
1135 c802 27 05               beq  *+7
1136 c804 cc 00 00            ldd  #0
1137 c807 20 03               bra  *+5
1138 c809 cc 00 01            ldd  #1
1139 c80c 10 83 00 00         cmpd #0
1140 c810 10 27 00 06         lbeq cc46
1141 c814 cc 00 1e            ldd  #30
1142 c817 32 61               leas 1,s
1143 c819 39                  rts
1144                         cc46:  
1145 c81a 31 64               leay 4,s
1146 c81c 1f 20               tfr  y,d
1147 c81e 34 06               pshs d
1148 c820 e6 f1               ldb  [,s++]
1149 c822 1d                  sex
1150 c823 34 06               pshs d
1151 c825 cc 00 10            ldd  #16
1152 c828 10 a3 e1            cmpd ,s++
1153 c82b 27 05               beq  *+7
1154 c82d cc 00 00            ldd  #0
1155 c830 20 03               bra  *+5
1156 c832 cc 00 01            ldd  #1
1157 c835 10 83 00 00         cmpd #0
1158 c839 10 27 00 06         lbeq cc47
1159 c83d cc 00 1f            ldd  #31
1160 c840 32 61               leas 1,s
1161 c842 39                  rts
1162                         cc47:  
1163 c843 32 61               leas 1,s
1164 c845 39                  rts
1165                         
1166                         * .global delay_nu
1167                         delay_nu: 
1168 c846 cc 00 00            ldd  #0
1169 c849 fd 70 12            std  temp
1170 c84c cc 00 00            ldd  #0
1171 c84f fd 70 12            std  temp
1172 c852 39                  rts
1173                         
1174                         * .global delay_ms
1175                         delay_ms: 
1176 c853 cc 00 00            ldd  #0
1177 c856 f7 70 04            stb  n
1178                         cc50:  
1179 c859 f6 70 04            ldb  n
1180 c85c 1d                  sex
1181 c85d 34 06               pshs d
1182 c85f 31 64               leay 4,s
1183 c861 1f 20               tfr  y,d
1184 c863 34 06               pshs d
1185 c865 ec f1               ldd  [,s++]
1186 c867 10 a3 e1            cmpd ,s++
1187 c86a 2e 05               bgt  *+7
1188 c86c cc 00 00            ldd  #0
1189 c86f 20 03               bra  *+5
1190 c871 cc 00 01            ldd  #1
1191 c874 10 83 00 00         cmpd #0
1192 c878 10 27 00 19         lbeq cc49
1193 c87c 7e c8 8f            jmp cc51
1194                         cc48:  
1195 c87f f6 70 04            ldb  n
1196 c882 1d                  sex
1197 c883 c3 00 01            addd #1
1198 c886 f7 70 04            stb  n
1199 c889 83 00 01            subd #1
1200 c88c 7e c8 59            jmp cc50
1201                         cc51:  
1202 c88f 7e c8 7f            jmp cc48
1203 c892 7e c8 7f            jmp cc48
1204                         cc49:  
1205 c895 39                  rts
1206                         
1207                         * .global scan
1208                         scan: 
1209 c896 32 7f               leas -1,s
1210 c898 cc 00 01            ldd  #1
1211 c89b f7 70 05            stb  k
1212 c89e cc 00 00            ldd  #0
1213 c8a1 f7 70 06            stb  u
1214 c8a4 cc 00 01            ldd  #1
1215 c8a7 43                  coma
1216 c8a8 53                  comb
1217 c8a9 c3 00 01            addd #1
1218 c8ac f7 70 09            stb  key
1219 c8af cc 00 00            ldd  #0
1220 c8b2 f7 70 07            stb  q
1221 c8b5 cc 00 00            ldd  #0
1222 c8b8 fd 70 00            std  i
1223                         cc54:  
1224 c8bb fc 70 00            ldd  i
1225 c8be 34 06               pshs d
1226 c8c0 cc 00 06            ldd  #6
1227 c8c3 10 a3 e1            cmpd ,s++
1228 c8c6 2e 05               bgt  *+7
1229 c8c8 cc 00 00            ldd  #0
1230 c8cb 20 03               bra  *+5
1231 c8cd cc 00 01            ldd  #1
1232 c8d0 10 83 00 00         cmpd #0
1233 c8d4 10 27 01 9e         lbeq cc53
1234 c8d8 7e c8 ea            jmp cc55
1235                         cc52:  
1236 c8db fc 70 00            ldd  i
1237 c8de c3 00 01            addd #1
1238 c8e1 fd 70 00            std  i
1239 c8e4 83 00 01            subd #1
1240 c8e7 7e c8 bb            jmp cc54
1241                         cc55:  
1242 c8ea fc 70 bf            ldd  port1
1243 c8ed 34 06               pshs d
1244 c8ef f6 70 05            ldb  k
1245 c8f2 1d                  sex
1246 c8f3 43                  coma
1247 c8f4 53                  comb
1248 c8f5 e7 f1               stb  [,s++]
1249 c8f7 fc 70 bd            ldd  port2
1250 c8fa 34 06               pshs d
1251 c8fc cc 70 35            ldd  #buffer
1252 c8ff 34 06               pshs d
1253 c901 fc 70 00            ldd  i
1254 c904 e3 e1               addd ,s++
1255 c906 34 06               pshs d
1256 c908 e6 f1               ldb  [,s++]
1257 c90a 1d                  sex
1258 c90b e7 f1               stb  [,s++]
1259 c90d cc 70 35            ldd  #buffer
1260 c910 34 06               pshs d
1261 c912 fc 70 00            ldd  i
1262 c915 e3 e1               addd ,s++
1263 c917 34 06               pshs d
1264 c919 e6 f1               ldb  [,s++]
1265 c91b 1d                  sex
1266 c91c 34 06               pshs d
1267 c91e cc 00 30            ldd  #48
1268 c921 10 a3 e1            cmpd ,s++
1269 c924 26 05               bne   *+7
1270 c926 cc 00 00            ldd  #0
1271 c929 20 03               bra  *+5
1272 c92b cc 00 01            ldd  #1
1273 c92e 10 83 00 00         cmpd #0
1274 c932 10 27 00 2c         lbeq cc57 ;_  instruction flagged for non optimize
1275 c936 cc 70 35            ldd  #buffer
1276 c939 34 06               pshs d
1277 c93b fc 70 00            ldd  i
1278 c93e e3 e1               addd ,s++
1279 c940 34 06               pshs d
1280 c942 e6 f1               ldb  [,s++]
1281 c944 1d                  sex
1282 c945 34 06               pshs d
1283 c947 cc 00 38            ldd  #56
1284 c94a 10 a3 e1            cmpd ,s++
1285 c94d 26 05               bne   *+7
1286 c94f cc 00 00            ldd  #0
1287 c952 20 03               bra  *+5
1288 c954 cc 00 01            ldd  #1
1289 c957 10 83 00 00         cmpd #0
1290 c95b 10 27 00 03         lbeq cc57 ;_  instruction flagged for non optimize
1291 c95f cc 00 01            ldd  #1
1292                         cc57:  
1293 c962 10 83 00 00         cmpd #0
1294 c966 10 27 00 2c         lbeq cc58 ;_  instruction flagged for non optimize
1295 c96a cc 70 35            ldd  #buffer
1296 c96d 34 06               pshs d
1297 c96f fc 70 00            ldd  i
1298 c972 e3 e1               addd ,s++
1299 c974 34 06               pshs d
1300 c976 e6 f1               ldb  [,s++]
1301 c978 1d                  sex
1302 c979 34 06               pshs d
1303 c97b cc 00 70            ldd  #112
1304 c97e 10 a3 e1            cmpd ,s++
1305 c981 26 05               bne   *+7
1306 c983 cc 00 00            ldd  #0
1307 c986 20 03               bra  *+5
1308 c988 cc 00 01            ldd  #1
1309 c98b 10 83 00 00         cmpd #0
1310 c98f 10 27 00 03         lbeq cc58 ;_  instruction flagged for non optimize
1311 c993 cc 00 01            ldd  #1
1312                         cc58:  
1313 c996 10 83 00 00         cmpd #0
1314 c99a 10 27 00 0d         lbeq cc56
1315 c99e cc 00 02            ldd  #2
1316 c9a1 34 06               pshs d
1317 c9a3 bd c8 53            jsr delay_ms
1318 c9a6 32 62               leas 2,s
1319 c9a8 7e c9 ae            jmp cc59
1320                         cc56:  
1321 c9ab bd c8 46            jsr delay_nu
1322                         cc59:  
1323 c9ae fc 70 bd            ldd  port2
1324 c9b1 34 06               pshs d
1325 c9b3 cc 00 00            ldd  #0
1326 c9b6 e7 f1               stb  [,s++]
1327 c9b8 cc 00 01            ldd  #1
1328 c9bb 34 06               pshs d
1329 c9bd bd c8 53            jsr delay_ms
1330 c9c0 32 62               leas 2,s
1331 c9c2 fc 70 c1            ldd  port0
1332 c9c5 34 06               pshs d
1333 c9c7 e6 f1               ldb  [,s++]
1334 c9c9 1d                  sex
1335 c9ca f7 70 08            stb  o
1336 c9cd cc 00 00            ldd  #0
1337 c9d0 f7 70 04            stb  n
1338                         cc62:  
1339 c9d3 f6 70 04            ldb  n
1340 c9d6 1d                  sex
1341 c9d7 34 06               pshs d
1342 c9d9 cc 00 06            ldd  #6
1343 c9dc 10 a3 e1            cmpd ,s++
1344 c9df 2e 05               bgt  *+7
1345 c9e1 cc 00 00            ldd  #0
1346 c9e4 20 03               bra  *+5
1347 c9e6 cc 00 01            ldd  #1
1348 c9e9 10 83 00 00         cmpd #0
1349 c9ed 10 27 00 6b         lbeq cc61
1350 c9f1 7e ca 04            jmp cc63
1351                         cc60:  
1352 c9f4 f6 70 04            ldb  n
1353 c9f7 1d                  sex
1354 c9f8 c3 00 01            addd #1
1355 c9fb f7 70 04            stb  n
1356 c9fe 83 00 01            subd #1
1357 ca01 7e c9 d3            jmp cc62
1358                         cc63:  
1359 ca04 f6 70 08            ldb  o
1360 ca07 1d                  sex
1361 ca08 34 06               pshs d
1362 ca0a cc 00 01            ldd  #1
1363 ca0d a4 e0               anda ,s+
1364 ca0f e4 e0               andb ,s+
1365 ca11 34 06               pshs d
1366 ca13 cc 00 00            ldd  #0
1367 ca16 10 a3 e1            cmpd ,s++
1368 ca19 27 05               beq  *+7
1369 ca1b cc 00 00            ldd  #0
1370 ca1e 20 03               bra  *+5
1371 ca20 cc 00 01            ldd  #1
1372 ca23 10 83 00 00         cmpd #0
1373 ca27 10 27 00 0a         lbeq cc64
1374 ca2b f6 70 07            ldb  q
1375 ca2e 1d                  sex
1376 ca2f f7 70 09            stb  key
1377 ca32 7e ca 42            jmp cc65
1378                         cc64:  
1379 ca35 f6 70 07            ldb  q
1380 ca38 1d                  sex
1381 ca39 c3 00 01            addd #1
1382 ca3c f7 70 07            stb  q
1383 ca3f 83 00 01            subd #1
1384                         cc65:  
1385 ca42 f6 70 08            ldb  o
1386 ca45 1d                  sex
1387 ca46 34 06               pshs d
1388 ca48 cc 00 01            ldd  #1
1389 ca4b 5a                  decb
1390 ca4c 2d 06               blt  *+8
1391 ca4e 64 e4               lsr  ,s
1392 ca50 66 61               ror  1,s
1393 ca52 20 f7               bra *-7
1394 ca54 35 06               puls d
1395 ca56 f7 70 08            stb  o
1396 ca59 7e c9 f4            jmp cc60
1397                         cc61:  
1398 ca5c f6 70 05            ldb  k
1399 ca5f 1d                  sex
1400 ca60 34 06               pshs d
1401 ca62 cc 00 01            ldd  #1
1402 ca65 5a                  decb
1403 ca66 2d 06               blt  *+8
1404 ca68 68 61               asl  1,s
1405 ca6a 69 e4               rol  ,s
1406 ca6c 20 f7               bra  *-7
1407 ca6e 35 06               puls d
1408 ca70 f7 70 05            stb  k
1409 ca73 7e c8 db            jmp cc52
1410                         cc53:  
1411 ca76 fc 70 c1            ldd  port0
1412 ca79 34 06               pshs d
1413 ca7b e6 f1               ldb  [,s++]
1414 ca7d 1d                  sex
1415 ca7e f7 70 08            stb  o
1416 ca81 f6 70 08            ldb  o
1417 ca84 1d                  sex
1418 ca85 34 06               pshs d
1419 ca87 cc 00 40            ldd  #64
1420 ca8a a4 e0               anda ,s+
1421 ca8c e4 e0               andb ,s+
1422 ca8e 34 06               pshs d
1423 ca90 cc 00 00            ldd  #0
1424 ca93 10 a3 e1            cmpd ,s++
1425 ca96 27 05               beq  *+7
1426 ca98 cc 00 00            ldd  #0
1427 ca9b 20 03               bra  *+5
1428 ca9d cc 00 01            ldd  #1
1429 caa0 10 83 00 00         cmpd #0
1430 caa4 10 27 00 06         lbeq cc66
1431 caa8 cc 00 24            ldd  #36
1432 caab f7 70 09            stb  key
1433                         cc66:  
1434 caae 31 e4               leay 0,s
1435 cab0 1f 20               tfr  y,d
1436 cab2 34 06               pshs d
1437 cab4 f6 70 09            ldb  key
1438 cab7 1d                  sex
1439 cab8 e7 f1               stb  [,s++]
1440 caba 31 e4               leay 0,s
1441 cabc 1f 20               tfr  y,d
1442 cabe 34 06               pshs d
1443 cac0 e6 f1               ldb  [,s++]
1444 cac2 1d                  sex
1445 cac3 32 61               leas 1,s
1446 cac5 39                  rts
1447                         
1448                         * .global dot_addr
1449                         dot_addr: 
1450 cac6 cc 70 35            ldd  #buffer
1451 cac9 34 06               pshs d
1452 cacb cc 00 00            ldd  #0
1453 cace e3 e1               addd ,s++
1454 cad0 34 06               pshs d
1455 cad2 cc 70 35            ldd  #buffer
1456 cad5 34 06               pshs d
1457 cad7 cc 00 00            ldd  #0
1458 cada e3 e1               addd ,s++
1459 cadc 34 06               pshs d
1460 cade e6 f1               ldb  [,s++]
1461 cae0 1d                  sex
1462 cae1 34 06               pshs d
1463 cae3 cc 00 40            ldd  #64
1464 cae6 43                  coma
1465 cae7 53                  comb
1466 cae8 a4 e0               anda ,s+
1467 caea e4 e0               andb ,s+
1468 caec e7 f1               stb  [,s++]
1469 caee cc 70 35            ldd  #buffer
1470 caf1 34 06               pshs d
1471 caf3 cc 00 01            ldd  #1
1472 caf6 e3 e1               addd ,s++
1473 caf8 34 06               pshs d
1474 cafa cc 70 35            ldd  #buffer
1475 cafd 34 06               pshs d
1476 caff cc 00 01            ldd  #1
1477 cb02 e3 e1               addd ,s++
1478 cb04 34 06               pshs d
1479 cb06 e6 f1               ldb  [,s++]
1480 cb08 1d                  sex
1481 cb09 34 06               pshs d
1482 cb0b cc 00 40            ldd  #64
1483 cb0e 43                  coma
1484 cb0f 53                  comb
1485 cb10 a4 e0               anda ,s+
1486 cb12 e4 e0               andb ,s+
1487 cb14 e7 f1               stb  [,s++]
1488 cb16 cc 70 35            ldd  #buffer
1489 cb19 34 06               pshs d
1490 cb1b cc 00 02            ldd  #2
1491 cb1e e3 e1               addd ,s++
1492 cb20 34 06               pshs d
1493 cb22 cc 70 35            ldd  #buffer
1494 cb25 34 06               pshs d
1495 cb27 cc 00 02            ldd  #2
1496 cb2a e3 e1               addd ,s++
1497 cb2c 34 06               pshs d
1498 cb2e e6 f1               ldb  [,s++]
1499 cb30 1d                  sex
1500 cb31 34 06               pshs d
1501 cb33 cc 00 40            ldd  #64
1502 cb36 aa e0               ora  ,s+
1503 cb38 ea e0               orb  ,s+
1504 cb3a e7 f1               stb  [,s++]
1505 cb3c cc 70 35            ldd  #buffer
1506 cb3f 34 06               pshs d
1507 cb41 cc 00 03            ldd  #3
1508 cb44 e3 e1               addd ,s++
1509 cb46 34 06               pshs d
1510 cb48 cc 70 35            ldd  #buffer
1511 cb4b 34 06               pshs d
1512 cb4d cc 00 03            ldd  #3
1513 cb50 e3 e1               addd ,s++
1514 cb52 34 06               pshs d
1515 cb54 e6 f1               ldb  [,s++]
1516 cb56 1d                  sex
1517 cb57 34 06               pshs d
1518 cb59 cc 00 40            ldd  #64
1519 cb5c aa e0               ora  ,s+
1520 cb5e ea e0               orb  ,s+
1521 cb60 e7 f1               stb  [,s++]
1522 cb62 cc 70 35            ldd  #buffer
1523 cb65 34 06               pshs d
1524 cb67 cc 00 04            ldd  #4
1525 cb6a e3 e1               addd ,s++
1526 cb6c 34 06               pshs d
1527 cb6e cc 70 35            ldd  #buffer
1528 cb71 34 06               pshs d
1529 cb73 cc 00 04            ldd  #4
1530 cb76 e3 e1               addd ,s++
1531 cb78 34 06               pshs d
1532 cb7a e6 f1               ldb  [,s++]
1533 cb7c 1d                  sex
1534 cb7d 34 06               pshs d
1535 cb7f cc 00 40            ldd  #64
1536 cb82 aa e0               ora  ,s+
1537 cb84 ea e0               orb  ,s+
1538 cb86 e7 f1               stb  [,s++]
1539 cb88 cc 70 35            ldd  #buffer
1540 cb8b 34 06               pshs d
1541 cb8d cc 00 05            ldd  #5
1542 cb90 e3 e1               addd ,s++
1543 cb92 34 06               pshs d
1544 cb94 cc 70 35            ldd  #buffer
1545 cb97 34 06               pshs d
1546 cb99 cc 00 05            ldd  #5
1547 cb9c e3 e1               addd ,s++
1548 cb9e 34 06               pshs d
1549 cba0 e6 f1               ldb  [,s++]
1550 cba2 1d                  sex
1551 cba3 34 06               pshs d
1552 cba5 cc 00 40            ldd  #64
1553 cba8 aa e0               ora  ,s+
1554 cbaa ea e0               orb  ,s+
1555 cbac e7 f1               stb  [,s++]
1556 cbae 39                  rts
1557                         
1558                         * .global dot_data
1559                         dot_data: 
1560 cbaf cc 70 35            ldd  #buffer
1561 cbb2 34 06               pshs d
1562 cbb4 cc 00 00            ldd  #0
1563 cbb7 e3 e1               addd ,s++
1564 cbb9 34 06               pshs d
1565 cbbb cc 70 35            ldd  #buffer
1566 cbbe 34 06               pshs d
1567 cbc0 cc 00 00            ldd  #0
1568 cbc3 e3 e1               addd ,s++
1569 cbc5 34 06               pshs d
1570 cbc7 e6 f1               ldb  [,s++]
1571 cbc9 1d                  sex
1572 cbca 34 06               pshs d
1573 cbcc cc 00 40            ldd  #64
1574 cbcf aa e0               ora  ,s+
1575 cbd1 ea e0               orb  ,s+
1576 cbd3 e7 f1               stb  [,s++]
1577 cbd5 cc 70 35            ldd  #buffer
1578 cbd8 34 06               pshs d
1579 cbda cc 00 01            ldd  #1
1580 cbdd e3 e1               addd ,s++
1581 cbdf 34 06               pshs d
1582 cbe1 cc 70 35            ldd  #buffer
1583 cbe4 34 06               pshs d
1584 cbe6 cc 00 01            ldd  #1
1585 cbe9 e3 e1               addd ,s++
1586 cbeb 34 06               pshs d
1587 cbed e6 f1               ldb  [,s++]
1588 cbef 1d                  sex
1589 cbf0 34 06               pshs d
1590 cbf2 cc 00 40            ldd  #64
1591 cbf5 aa e0               ora  ,s+
1592 cbf7 ea e0               orb  ,s+
1593 cbf9 e7 f1               stb  [,s++]
1594 cbfb cc 70 35            ldd  #buffer
1595 cbfe 34 06               pshs d
1596 cc00 cc 00 02            ldd  #2
1597 cc03 e3 e1               addd ,s++
1598 cc05 34 06               pshs d
1599 cc07 cc 70 35            ldd  #buffer
1600 cc0a 34 06               pshs d
1601 cc0c cc 00 02            ldd  #2
1602 cc0f e3 e1               addd ,s++
1603 cc11 34 06               pshs d
1604 cc13 e6 f1               ldb  [,s++]
1605 cc15 1d                  sex
1606 cc16 34 06               pshs d
1607 cc18 cc 00 40            ldd  #64
1608 cc1b 43                  coma
1609 cc1c 53                  comb
1610 cc1d a4 e0               anda ,s+
1611 cc1f e4 e0               andb ,s+
1612 cc21 e7 f1               stb  [,s++]
1613 cc23 cc 70 35            ldd  #buffer
1614 cc26 34 06               pshs d
1615 cc28 cc 00 03            ldd  #3
1616 cc2b e3 e1               addd ,s++
1617 cc2d 34 06               pshs d
1618 cc2f cc 70 35            ldd  #buffer
1619 cc32 34 06               pshs d
1620 cc34 cc 00 03            ldd  #3
1621 cc37 e3 e1               addd ,s++
1622 cc39 34 06               pshs d
1623 cc3b e6 f1               ldb  [,s++]
1624 cc3d 1d                  sex
1625 cc3e 34 06               pshs d
1626 cc40 cc 00 40            ldd  #64
1627 cc43 43                  coma
1628 cc44 53                  comb
1629 cc45 a4 e0               anda ,s+
1630 cc47 e4 e0               andb ,s+
1631 cc49 e7 f1               stb  [,s++]
1632 cc4b cc 70 35            ldd  #buffer
1633 cc4e 34 06               pshs d
1634 cc50 cc 00 04            ldd  #4
1635 cc53 e3 e1               addd ,s++
1636 cc55 34 06               pshs d
1637 cc57 cc 70 35            ldd  #buffer
1638 cc5a 34 06               pshs d
1639 cc5c cc 00 04            ldd  #4
1640 cc5f e3 e1               addd ,s++
1641 cc61 34 06               pshs d
1642 cc63 e6 f1               ldb  [,s++]
1643 cc65 1d                  sex
1644 cc66 34 06               pshs d
1645 cc68 cc 00 40            ldd  #64
1646 cc6b 43                  coma
1647 cc6c 53                  comb
1648 cc6d a4 e0               anda ,s+
1649 cc6f e4 e0               andb ,s+
1650 cc71 e7 f1               stb  [,s++]
1651 cc73 cc 70 35            ldd  #buffer
1652 cc76 34 06               pshs d
1653 cc78 cc 00 05            ldd  #5
1654 cc7b e3 e1               addd ,s++
1655 cc7d 34 06               pshs d
1656 cc7f cc 70 35            ldd  #buffer
1657 cc82 34 06               pshs d
1658 cc84 cc 00 05            ldd  #5
1659 cc87 e3 e1               addd ,s++
1660 cc89 34 06               pshs d
1661 cc8b e6 f1               ldb  [,s++]
1662 cc8d 1d                  sex
1663 cc8e 34 06               pshs d
1664 cc90 cc 00 40            ldd  #64
1665 cc93 43                  coma
1666 cc94 53                  comb
1667 cc95 a4 e0               anda ,s+
1668 cc97 e4 e0               andb ,s+
1669 cc99 e7 f1               stb  [,s++]
1670 cc9b 39                  rts
1671                         
1672                         * .global hex4
1673                         hex4: 
1674 cc9c 31 62               leay 2,s
1675 cc9e 1f 20               tfr  y,d
1676 cca0 34 06               pshs d
1677 cca2 ec f1               ldd  [,s++]
1678 cca4 fd 70 14            std  temp16
1679 cca7 cc 70 35            ldd  #buffer
1680 ccaa 34 06               pshs d
1681 ccac cc 00 02            ldd  #2
1682 ccaf e3 e1               addd ,s++
1683 ccb1 34 06               pshs d
1684 ccb3 cc c1 0d            ldd  #convert
1685 ccb6 34 06               pshs d
1686 ccb8 fc 70 14            ldd  temp16
1687 ccbb 34 06               pshs d
1688 ccbd cc 00 0f            ldd  #15
1689 ccc0 a4 e0               anda ,s+
1690 ccc2 e4 e0               andb ,s+
1691 ccc4 e3 e1               addd ,s++
1692 ccc6 34 06               pshs d
1693 ccc8 e6 f1               ldb  [,s++]
1694 ccca 1d                  sex
1695 cccb e7 f1               stb  [,s++]
1696 cccd cc 70 14            ldd  #temp16
1697 ccd0 34 06               pshs d
1698 ccd2 cc 00 04            ldd  #4
1699 ccd5 ae f4               ldx  [,s]
1700 ccd7 34 10               pshs x
1701 ccd9 5a                  decb
1702 ccda 2d 06               blt  *+8
1703 ccdc 64 e4               lsr  ,s
1704 ccde 66 61               ror  1,s
1705 cce0 20 f7               bra *-7
1706 cce2 35 06               puls d
1707 cce4 fd 70 14            std  temp16
1708 cce7 cc 70 35            ldd  #buffer
1709 ccea 34 06               pshs d
1710 ccec cc 00 03            ldd  #3
1711 ccef e3 e1               addd ,s++
1712 ccf1 34 06               pshs d
1713 ccf3 cc c1 0d            ldd  #convert
1714 ccf6 34 06               pshs d
1715 ccf8 fc 70 14            ldd  temp16
1716 ccfb 34 06               pshs d
1717 ccfd cc 00 0f            ldd  #15
1718 cd00 a4 e0               anda ,s+
1719 cd02 e4 e0               andb ,s+
1720 cd04 e3 e1               addd ,s++
1721 cd06 34 06               pshs d
1722 cd08 e6 f1               ldb  [,s++]
1723 cd0a 1d                  sex
1724 cd0b e7 f1               stb  [,s++]
1725 cd0d cc 70 14            ldd  #temp16
1726 cd10 34 06               pshs d
1727 cd12 cc 00 04            ldd  #4
1728 cd15 ae f4               ldx  [,s]
1729 cd17 34 10               pshs x
1730 cd19 5a                  decb
1731 cd1a 2d 06               blt  *+8
1732 cd1c 64 e4               lsr  ,s
1733 cd1e 66 61               ror  1,s
1734 cd20 20 f7               bra *-7
1735 cd22 35 06               puls d
1736 cd24 fd 70 14            std  temp16
1737 cd27 cc 70 35            ldd  #buffer
1738 cd2a 34 06               pshs d
1739 cd2c cc 00 04            ldd  #4
1740 cd2f e3 e1               addd ,s++
1741 cd31 34 06               pshs d
1742 cd33 cc c1 0d            ldd  #convert
1743 cd36 34 06               pshs d
1744 cd38 fc 70 14            ldd  temp16
1745 cd3b 34 06               pshs d
1746 cd3d cc 00 0f            ldd  #15
1747 cd40 a4 e0               anda ,s+
1748 cd42 e4 e0               andb ,s+
1749 cd44 e3 e1               addd ,s++
1750 cd46 34 06               pshs d
1751 cd48 e6 f1               ldb  [,s++]
1752 cd4a 1d                  sex
1753 cd4b e7 f1               stb  [,s++]
1754 cd4d cc 70 14            ldd  #temp16
1755 cd50 34 06               pshs d
1756 cd52 cc 00 04            ldd  #4
1757 cd55 ae f4               ldx  [,s]
1758 cd57 34 10               pshs x
1759 cd59 5a                  decb
1760 cd5a 2d 06               blt  *+8
1761 cd5c 64 e4               lsr  ,s
1762 cd5e 66 61               ror  1,s
1763 cd60 20 f7               bra *-7
1764 cd62 35 06               puls d
1765 cd64 fd 70 14            std  temp16
1766 cd67 cc 70 35            ldd  #buffer
1767 cd6a 34 06               pshs d
1768 cd6c cc 00 05            ldd  #5
1769 cd6f e3 e1               addd ,s++
1770 cd71 34 06               pshs d
1771 cd73 cc c1 0d            ldd  #convert
1772 cd76 34 06               pshs d
1773 cd78 fc 70 14            ldd  temp16
1774 cd7b 34 06               pshs d
1775 cd7d cc 00 0f            ldd  #15
1776 cd80 a4 e0               anda ,s+
1777 cd82 e4 e0               andb ,s+
1778 cd84 e3 e1               addd ,s++
1779 cd86 34 06               pshs d
1780 cd88 e6 f1               ldb  [,s++]
1781 cd8a 1d                  sex
1782 cd8b e7 f1               stb  [,s++]
1783 cd8d 32 66               leas 6,s
1784 cd8f 39                  rts
1785                         
1786                         * .global address_
1787                         address_: 
1788 cd90 fc 70 16            ldd  PC
1789 cd93 fd 70 14            std  temp16
1790 cd96 fc 70 14            ldd  temp16
1791 cd99 34 06               pshs d
1792 cd9b bd cc 9c            jsr hex4
1793 cd9e 32 62               leas 2,s
1794 cda0 39                  rts
1795                         
1796                         * .global data_dis
1797                         data_dis: 
1798 cda1 fc 70 16            ldd  PC
1799 cda4 fd 70 c3            std  dptr
1800 cda7 fc 70 c3            ldd  dptr
1801 cdaa 34 06               pshs d
1802 cdac e6 f1               ldb  [,s++]
1803 cdae 1d                  sex
1804 cdaf f7 70 04            stb  n
1805 cdb2 cc 70 35            ldd  #buffer
1806 cdb5 34 06               pshs d
1807 cdb7 cc 00 00            ldd  #0
1808 cdba e3 e1               addd ,s++
1809 cdbc 34 06               pshs d
1810 cdbe cc c1 0d            ldd  #convert
1811 cdc1 34 06               pshs d
1812 cdc3 f6 70 04            ldb  n
1813 cdc6 1d                  sex
1814 cdc7 34 06               pshs d
1815 cdc9 cc 00 0f            ldd  #15
1816 cdcc a4 e0               anda ,s+
1817 cdce e4 e0               andb ,s+
1818 cdd0 e3 e1               addd ,s++
1819 cdd2 34 06               pshs d
1820 cdd4 e6 f1               ldb  [,s++]
1821 cdd6 1d                  sex
1822 cdd7 e7 f1               stb  [,s++]
1823 cdd9 f6 70 04            ldb  n
1824 cddc 1d                  sex
1825 cddd 34 06               pshs d
1826 cddf cc 00 04            ldd  #4
1827 cde2 5a                  decb
1828 cde3 2d 06               blt  *+8
1829 cde5 64 e4               lsr  ,s
1830 cde7 66 61               ror  1,s
1831 cde9 20 f7               bra *-7
1832 cdeb 35 06               puls d
1833 cded f7 70 04            stb  n
1834 cdf0 cc 70 35            ldd  #buffer
1835 cdf3 34 06               pshs d
1836 cdf5 cc 00 01            ldd  #1
1837 cdf8 e3 e1               addd ,s++
1838 cdfa 34 06               pshs d
1839 cdfc cc c1 0d            ldd  #convert
1840 cdff 34 06               pshs d
1841 ce01 f6 70 04            ldb  n
1842 ce04 1d                  sex
1843 ce05 34 06               pshs d
1844 ce07 cc 00 0f            ldd  #15
1845 ce0a a4 e0               anda ,s+
1846 ce0c e4 e0               andb ,s+
1847 ce0e e3 e1               addd ,s++
1848 ce10 34 06               pshs d
1849 ce12 e6 f1               ldb  [,s++]
1850 ce14 1d                  sex
1851 ce15 e7 f1               stb  [,s++]
1852 ce17 bd cb af            jsr dot_data
1853 ce1a 39                  rts
1854                         
1855                         * .global read_mem
1856                         read_mem: 
1857 ce1b bd cd 90            jsr address_
1858 ce1e bd cd a1            jsr data_dis
1859 ce21 39                  rts
1860                         
1861                         * .global key_addr
1862                         key_addr: 
1863 ce22 cc 00 01            ldd  #1
1864 ce25 f7 70 24            stb  state
1865 ce28 bd ce 1b            jsr read_mem
1866 ce2b bd ca c6            jsr dot_addr
1867 ce2e cc 00 00            ldd  #0
1868 ce31 f7 70 0b            stb  hit
1869 ce34 39                  rts
1870                         
1871                         * .global key_data
1872                         key_data: 
1873 ce35 bd ce 1b            jsr read_mem
1874 ce38 bd cb af            jsr dot_data
1875 ce3b cc 00 00            ldd  #0
1876 ce3e f7 70 0b            stb  hit
1877 ce41 cc 00 02            ldd  #2
1878 ce44 f7 70 24            stb  state
1879 ce47 39                  rts
1880                         
1881                         * .global key_plus
1882                         key_plus: 
1883 ce48 f6 70 24            ldb  state
1884 ce4b 1d                  sex
1885 ce4c 34 06               pshs d
1886 ce4e cc 00 01            ldd  #1
1887 ce51 10 a3 e1            cmpd ,s++
1888 ce54 27 05               beq  *+7
1889 ce56 cc 00 00            ldd  #0
1890 ce59 20 03               bra  *+5
1891 ce5b cc 00 01            ldd  #1
1892 ce5e 10 83 00 00         cmpd #0
1893 ce62 10 26 00 24         lbne cc68
1894 ce66 f6 70 24            ldb  state
1895 ce69 1d                  sex
1896 ce6a 34 06               pshs d
1897 ce6c cc 00 02            ldd  #2
1898 ce6f 10 a3 e1            cmpd ,s++
1899 ce72 27 05               beq  *+7
1900 ce74 cc 00 00            ldd  #0
1901 ce77 20 03               bra  *+5
1902 ce79 cc 00 01            ldd  #1
1903 ce7c 10 83 00 00         cmpd #0
1904 ce80 10 26 00 06         lbne cc68
1905 ce84 cc 00 00            ldd  #0
1906 ce87 7e ce 8d            jmp cc69
1907                         cc68:  
1908 ce8a cc 00 01            ldd  #1
1909                         cc69:  
1910 ce8d 10 83 00 00         cmpd #0
1911 ce91 10 27 00 12         lbeq cc67
1912 ce95 fc 70 16            ldd  PC
1913 ce98 c3 00 01            addd #1
1914 ce9b fd 70 16            std  PC
1915 ce9e 83 00 01            subd #1
1916 cea1 bd ce 1b            jsr read_mem
1917 cea4 bd ce 35            jsr key_data
1918                         cc67:  
1919 cea7 f6 70 24            ldb  state
1920 ceaa 1d                  sex
1921 ceab 34 06               pshs d
1922 cead cc 00 04            ldd  #4
1923 ceb0 10 a3 e1            cmpd ,s++
1924 ceb3 27 05               beq  *+7
1925 ceb5 cc 00 00            ldd  #0
1926 ceb8 20 03               bra  *+5
1927 ceba cc 00 01            ldd  #1
1928 cebd 10 83 00 00         cmpd #0
1929 cec1 10 27 00 12         lbeq cc70
1930 cec5 fc 70 1a            ldd  num
1931 cec8 fd 70 1c            std  start
1932 cecb cc 00 00            ldd  #0
1933 cece f7 70 0b            stb  hit
1934 ced1 cc 00 01            ldd  #1
1935 ced4 f7 70 0c            stb  positive
1936                         cc70:  
1937 ced7 f6 70 24            ldb  state
1938 ceda 1d                  sex
1939 cedb 34 06               pshs d
1940 cedd cc 00 05            ldd  #5
1941 cee0 10 a3 e1            cmpd ,s++
1942 cee3 27 05               beq  *+7
1943 cee5 cc 00 00            ldd  #0
1944 cee8 20 03               bra  *+5
1945 ceea cc 00 01            ldd  #1
1946 ceed 10 83 00 00         cmpd #0
1947 cef1 10 27 00 24         lbeq cc71
1948 cef5 cc 00 06            ldd  #6
1949 cef8 f7 70 24            stb  state
1950 cefb fc 70 1a            ldd  num
1951 cefe fd 70 1c            std  start
1952 cf01 cc 00 00            ldd  #0
1953 cf04 f7 70 0b            stb  hit
1954 cf07 cc 70 35            ldd  #buffer
1955 cf0a 34 06               pshs d
1956 cf0c cc 00 00            ldd  #0
1957 cf0f e3 e1               addd ,s++
1958 cf11 34 06               pshs d
1959 cf13 cc 00 8f            ldd  #143
1960 cf16 e7 f1               stb  [,s++]
1961 cf18 39                  rts
1962                         cc71:  
1963 cf19 f6 70 24            ldb  state
1964 cf1c 1d                  sex
1965 cf1d 34 06               pshs d
1966 cf1f cc 00 06            ldd  #6
1967 cf22 10 a3 e1            cmpd ,s++
1968 cf25 27 05               beq  *+7
1969 cf27 cc 00 00            ldd  #0
1970 cf2a 20 03               bra  *+5
1971 cf2c cc 00 01            ldd  #1
1972 cf2f 10 83 00 00         cmpd #0
1973 cf33 10 27 00 43         lbeq cc72
1974 cf37 cc 00 07            ldd  #7
1975 cf3a f7 70 24            stb  state
1976 cf3d fc 70 1a            ldd  num
1977 cf40 fd 70 1e            std  end
1978 cf43 cc 00 00            ldd  #0
1979 cf46 f7 70 0b            stb  hit
1980 cf49 cc 70 35            ldd  #buffer
1981 cf4c 34 06               pshs d
1982 cf4e cc 00 00            ldd  #0
1983 cf51 e3 e1               addd ,s++
1984 cf53 34 06               pshs d
1985 cf55 cc 00 b3            ldd  #179
1986 cf58 e7 f1               stb  [,s++]
1987 cf5a fc 70 1e            ldd  end
1988 cf5d 34 06               pshs d
1989 cf5f fc 70 1c            ldd  start
1990 cf62 10 a3 e1            cmpd ,s++
1991 cf65 2c 05               bge  *+7
1992 cf67 cc 00 00            ldd  #0
1993 cf6a 20 03               bra  *+5
1994 cf6c cc 00 01            ldd  #1
1995 cf6f 10 83 00 00         cmpd #0
1996 cf73 10 27 00 03         lbeq cc73
1997 cf77 bd d0 d8            jsr print_er
1998                         cc73:  
1999                         cc72:  
2000 cf7a 39                  rts
2001                         
2002                         * .global key_minu
2003                         key_minu: 
2004 cf7b f6 70 24            ldb  state
2005 cf7e 1d                  sex
2006 cf7f 34 06               pshs d
2007 cf81 cc 00 01            ldd  #1
2008 cf84 10 a3 e1            cmpd ,s++
2009 cf87 27 05               beq  *+7
2010 cf89 cc 00 00            ldd  #0
2011 cf8c 20 03               bra  *+5
2012 cf8e cc 00 01            ldd  #1
2013 cf91 34 06               pshs d
2014 cf93 f6 70 24            ldb  state
2015 cf96 1d                  sex
2016 cf97 34 06               pshs d
2017 cf99 cc 00 02            ldd  #2
2018 cf9c 10 a3 e1            cmpd ,s++
2019 cf9f 27 05               beq  *+7
2020 cfa1 cc 00 00            ldd  #0
2021 cfa4 20 03               bra  *+5
2022 cfa6 cc 00 01            ldd  #1
2023 cfa9 aa e0               ora  ,s+
2024 cfab ea e0               orb  ,s+
2025 cfad 10 83 00 00         cmpd #0
2026 cfb1 10 27 00 12         lbeq cc74
2027 cfb5 fc 70 16            ldd  PC
2028 cfb8 83 00 01            subd #1
2029 cfbb fd 70 16            std  PC
2030 cfbe c3 00 01            addd #1
2031 cfc1 bd ce 1b            jsr read_mem
2032 cfc4 bd ce 35            jsr key_data
2033                         cc74:  
2034 cfc7 f6 70 24            ldb  state
2035 cfca 1d                  sex
2036 cfcb 34 06               pshs d
2037 cfcd cc 00 04            ldd  #4
2038 cfd0 10 a3 e1            cmpd ,s++
2039 cfd3 27 05               beq  *+7
2040 cfd5 cc 00 00            ldd  #0
2041 cfd8 20 03               bra  *+5
2042 cfda cc 00 01            ldd  #1
2043 cfdd 10 83 00 00         cmpd #0
2044 cfe1 10 27 00 12         lbeq cc75
2045 cfe5 fc 70 1a            ldd  num
2046 cfe8 fd 70 1c            std  start
2047 cfeb cc 00 00            ldd  #0
2048 cfee f7 70 0b            stb  hit
2049 cff1 cc 00 00            ldd  #0
2050 cff4 f7 70 0c            stb  positive
2051                         cc75:  
2052 cff7 39                  rts
2053                         
2054                         * .global data_hex
2055                         data_hex: 
2056 cff8 fc 70 16            ldd  PC
2057 cffb fd 70 c3            std  dptr
2058 cffe fc 70 c3            ldd  dptr
2059 d001 34 06               pshs d
2060 d003 e6 f1               ldb  [,s++]
2061 d005 1d                  sex
2062 d006 f7 70 0a            stb  x
2063 d009 f6 70 0b            ldb  hit
2064 d00c 1d                  sex
2065 d00d 34 06               pshs d
2066 d00f cc 00 00            ldd  #0
2067 d012 10 a3 e1            cmpd ,s++
2068 d015 27 05               beq  *+7
2069 d017 cc 00 00            ldd  #0
2070 d01a 20 03               bra  *+5
2071 d01c cc 00 01            ldd  #1
2072 d01f 10 83 00 00         cmpd #0
2073 d023 10 27 00 06         lbeq cc76
2074 d027 cc 00 00            ldd  #0
2075 d02a f7 70 0a            stb  x
2076                         cc76:  
2077 d02d cc 00 01            ldd  #1
2078 d030 f7 70 0b            stb  hit
2079 d033 f6 70 0a            ldb  x
2080 d036 1d                  sex
2081 d037 34 06               pshs d
2082 d039 cc 00 04            ldd  #4
2083 d03c 5a                  decb
2084 d03d 2d 06               blt  *+8
2085 d03f 68 61               asl  1,s
2086 d041 69 e4               rol  ,s
2087 d043 20 f7               bra  *-7
2088 d045 35 06               puls d
2089 d047 f7 70 0a            stb  x
2090 d04a f6 70 0a            ldb  x
2091 d04d 1d                  sex
2092 d04e 34 06               pshs d
2093 d050 f6 70 09            ldb  key
2094 d053 1d                  sex
2095 d054 aa e0               ora  ,s+
2096 d056 ea e0               orb  ,s+
2097 d058 f7 70 0a            stb  x
2098 d05b fc 70 c3            ldd  dptr
2099 d05e 34 06               pshs d
2100 d060 f6 70 0a            ldb  x
2101 d063 1d                  sex
2102 d064 e7 f1               stb  [,s++]
2103 d066 bd ce 1b            jsr read_mem
2104 d069 bd cb af            jsr dot_data
2105 d06c 39                  rts
2106                         
2107                         * .global key_PC
2108                         key_PC: 
2109 d06d fc 70 18            ldd  save_PC
2110 d070 fd 70 16            std  PC
2111 d073 bd ce 35            jsr key_data
2112 d076 39                  rts
2113                         
2114                         * .global hex_addr
2115                         hex_addr: 
2116 d077 f6 70 0b            ldb  hit
2117 d07a 1d                  sex
2118 d07b 34 06               pshs d
2119 d07d cc 00 00            ldd  #0
2120 d080 10 a3 e1            cmpd ,s++
2121 d083 27 05               beq  *+7
2122 d085 cc 00 00            ldd  #0
2123 d088 20 03               bra  *+5
2124 d08a cc 00 01            ldd  #1
2125 d08d 10 83 00 00         cmpd #0
2126 d091 10 27 00 06         lbeq cc77
2127 d095 cc 00 00            ldd  #0
2128 d098 fd 70 16            std  PC
2129                         cc77:  
2130 d09b cc 00 01            ldd  #1
2131 d09e f7 70 0b            stb  hit
2132 d0a1 cc 70 16            ldd  #PC
2133 d0a4 34 06               pshs d
2134 d0a6 cc 00 04            ldd  #4
2135 d0a9 ae f4               ldx  [,s]
2136 d0ab 34 10               pshs x
2137 d0ad 5a                  decb
2138 d0ae 2d 06               blt  *+8
2139 d0b0 68 61               asl  1,s
2140 d0b2 69 e4               rol  ,s
2141 d0b4 20 f7               bra  *-7
2142 d0b6 35 06               puls d
2143 d0b8 fd 70 16            std  PC
2144 d0bb cc 70 16            ldd  #PC
2145 d0be 34 06               pshs d
2146 d0c0 f6 70 09            ldb  key
2147 d0c3 1d                  sex
2148 d0c4 ae f4               ldx  [,s]
2149 d0c6 34 10               pshs x
2150 d0c8 aa e0               ora  ,s+
2151 d0ca ea e0               orb  ,s+
2152 d0cc fd 70 16            std  PC
2153 d0cf bd ce 1b            jsr read_mem
2154 d0d2 bd ca c6            jsr dot_addr
2155 d0d5 32 64               leas 4,s
2156 d0d7 39                  rts
2157                         
2158                         * .global print_er
2159                         print_er: 
2160 d0d8 cc 70 35            ldd  #buffer
2161 d0db 34 06               pshs d
2162 d0dd cc 00 05            ldd  #5
2163 d0e0 e3 e1               addd ,s++
2164 d0e2 34 06               pshs d
2165 d0e4 cc 00 8f            ldd  #143
2166 d0e7 e7 f1               stb  [,s++]
2167 d0e9 cc 70 35            ldd  #buffer
2168 d0ec 34 06               pshs d
2169 d0ee cc 00 04            ldd  #4
2170 d0f1 e3 e1               addd ,s++
2171 d0f3 34 06               pshs d
2172 d0f5 cc 00 03            ldd  #3
2173 d0f8 e7 f1               stb  [,s++]
2174 d0fa cc 70 35            ldd  #buffer
2175 d0fd 34 06               pshs d
2176 d0ff cc 00 03            ldd  #3
2177 d102 e3 e1               addd ,s++
2178 d104 34 06               pshs d
2179 d106 cc 00 03            ldd  #3
2180 d109 e7 f1               stb  [,s++]
2181 d10b cc 70 35            ldd  #buffer
2182 d10e 34 06               pshs d
2183 d110 cc 00 02            ldd  #2
2184 d113 e3 e1               addd ,s++
2185 d115 34 06               pshs d
2186 d117 cc 00 00            ldd  #0
2187 d11a e7 f1               stb  [,s++]
2188 d11c cc 70 35            ldd  #buffer
2189 d11f 34 06               pshs d
2190 d121 cc 00 01            ldd  #1
2191 d124 e3 e1               addd ,s++
2192 d126 34 06               pshs d
2193 d128 cc 00 00            ldd  #0
2194 d12b e7 f1               stb  [,s++]
2195 d12d cc 70 35            ldd  #buffer
2196 d130 34 06               pshs d
2197 d132 cc 00 00            ldd  #0
2198 d135 e3 e1               addd ,s++
2199 d137 34 06               pshs d
2200 d139 cc 00 00            ldd  #0
2201 d13c e7 f1               stb  [,s++]
2202 d13e cc 00 00            ldd  #0
2203 d141 f7 70 24            stb  state
2204 d144 39                  rts
2205                         
2206                         * .global key_go
2207                         key_go: 
2208 d145 f6 70 24            ldb  state
2209 d148 1d                  sex
2210 d149 34 06               pshs d
2211 d14b cc 00 01            ldd  #1
2212 d14e 10 a3 e1            cmpd ,s++
2213 d151 27 05               beq  *+7
2214 d153 cc 00 00            ldd  #0
2215 d156 20 03               bra  *+5
2216 d158 cc 00 01            ldd  #1
2217 d15b 10 83 00 00         cmpd #0
2218 d15f 10 26 00 24         lbne cc79
2219 d163 f6 70 24            ldb  state
2220 d166 1d                  sex
2221 d167 34 06               pshs d
2222 d169 cc 00 02            ldd  #2
2223 d16c 10 a3 e1            cmpd ,s++
2224 d16f 27 05               beq  *+7
2225 d171 cc 00 00            ldd  #0
2226 d174 20 03               bra  *+5
2227 d176 cc 00 01            ldd  #1
2228 d179 10 83 00 00         cmpd #0
2229 d17d 10 26 00 06         lbne cc79
2230 d181 cc 00 00            ldd  #0
2231 d184 7e d1 8a            jmp cc80
2232                         cc79:  
2233 d187 cc 00 01            ldd  #1
2234                         cc80:  
2235 d18a 10 83 00 00         cmpd #0
2236 d18e 10 27 00 24         lbeq cc78
2237 d192 10 ff 70 2b           STS SAVE_SP   
2238 d196 fe 70 27              LDU USER_U   
2239 d199 fc 70 16              LDD PC
2240 d19c 34 06                 PSHS D
2241 d19e b6 70 31              LDA USER_P
2242 d1a1 1f 8a                 TFR A,CC
2243 d1a3 b6 70 32              LDA USER_DP
2244 d1a6 1f 8b                 TFR A,DP
2245 d1a8 be 70 29              LDX USER_X
2246 d1ab 10 be 70 2d           LDY USER_Y
2247 d1af f6 70 30              LDB USER_B
2248 d1b2 b6 70 2f              LDA USER_A
2249 d1b5 39                    RTS
2250                         cc78:  
2251 d1b6 f6 70 24            ldb  state
2252 d1b9 1d                  sex
2253 d1ba 34 06               pshs d
2254 d1bc cc 00 04            ldd  #4
2255 d1bf 10 a3 e1            cmpd ,s++
2256 d1c2 27 05               beq  *+7
2257 d1c4 cc 00 00            ldd  #0
2258 d1c7 20 03               bra  *+5
2259 d1c9 cc 00 01            ldd  #1
2260 d1cc 10 83 00 00         cmpd #0
2261 d1d0 10 27 00 57         lbeq cc81
2262 d1d4 fc 70 1a            ldd  num
2263 d1d7 fd 70 20            std  desti
2264 d1da f6 70 0c            ldb  positive
2265 d1dd 1d                  sex
2266 d1de 34 06               pshs d
2267 d1e0 cc 00 00            ldd  #0
2268 d1e3 10 a3 e1            cmpd ,s++
2269 d1e6 27 05               beq  *+7
2270 d1e8 cc 00 00            ldd  #0
2271 d1eb 20 03               bra  *+5
2272 d1ed cc 00 01            ldd  #1
2273 d1f0 10 83 00 00         cmpd #0
2274 d1f4 10 27 00 16         lbeq cc82
2275 d1f8 fc 70 1c            ldd  start
2276 d1fb 34 06               pshs d
2277 d1fd fc 70 20            ldd  desti
2278 d200 35 10               puls x
2279 d202 34 06               pshs d
2280 d204 1f 10               tfr  x,d
2281 d206 a3 e1               subd ,s++
2282 d208 fd 70 1c            std  start
2283 d20b 7e d2 1b            jmp cc83
2284                         cc82:  
2285 d20e fc 70 1c            ldd  start
2286 d211 34 06               pshs d
2287 d213 fc 70 20            ldd  desti
2288 d216 e3 e1               addd ,s++
2289 d218 fd 70 1c            std  start
2290                         cc83:  
2291 d21b fc 70 1c            ldd  start
2292 d21e 34 06               pshs d
2293 d220 bd cc 9c            jsr hex4
2294 d223 32 62               leas 2,s
2295 d225 cc 00 00            ldd  #0
2296 d228 f7 70 0b            stb  hit
2297                         cc81:  
2298 d22b f6 70 24            ldb  state
2299 d22e 1d                  sex
2300 d22f 34 06               pshs d
2301 d231 cc 00 07            ldd  #7
2302 d234 10 a3 e1            cmpd ,s++
2303 d237 27 05               beq  *+7
2304 d239 cc 00 00            ldd  #0
2305 d23c 20 03               bra  *+5
2306 d23e cc 00 01            ldd  #1
2307 d241 10 83 00 00         cmpd #0
2308 d245 10 27 00 8c         lbeq cc84
2309 d249 fc 70 1a            ldd  num
2310 d24c fd 70 20            std  desti
2311 d24f fc 70 1e            ldd  end
2312 d252 34 06               pshs d
2313 d254 fc 70 1c            ldd  start
2314 d257 35 10               puls x
2315 d259 34 06               pshs d
2316 d25b 1f 10               tfr  x,d
2317 d25d a3 e1               subd ,s++
2318 d25f fd 70 12            std  temp
2319 d262 fc 70 1c            ldd  start
2320 d265 fd 70 c3            std  dptr
2321 d268 fc 70 20            ldd  desti
2322 d26b fd 70 c5            std  dptr2
2323 d26e cc 00 00            ldd  #0
2324 d271 fd 70 00            std  i
2325                         cc87:  
2326 d274 fc 70 00            ldd  i
2327 d277 34 06               pshs d
2328 d279 fc 70 12            ldd  temp
2329 d27c 10 a3 e1            cmpd ,s++
2330 d27f 2e 05               bgt  *+7
2331 d281 cc 00 00            ldd  #0
2332 d284 20 03               bra  *+5
2333 d286 cc 00 01            ldd  #1
2334 d289 10 83 00 00         cmpd #0
2335 d28d 10 27 00 32         lbeq cc86
2336 d291 7e d2 a3            jmp cc88
2337                         cc85:  
2338 d294 fc 70 00            ldd  i
2339 d297 c3 00 01            addd #1
2340 d29a fd 70 00            std  i
2341 d29d 83 00 01            subd #1
2342 d2a0 7e d2 74            jmp cc87
2343                         cc88:  
2344 d2a3 fc 70 c5            ldd  dptr2
2345 d2a6 34 06               pshs d
2346 d2a8 fc 70 00            ldd  i
2347 d2ab e3 e1               addd ,s++
2348 d2ad 34 06               pshs d
2349 d2af fc 70 c3            ldd  dptr
2350 d2b2 34 06               pshs d
2351 d2b4 fc 70 00            ldd  i
2352 d2b7 e3 e1               addd ,s++
2353 d2b9 34 06               pshs d
2354 d2bb e6 f1               ldb  [,s++]
2355 d2bd 1d                  sex
2356 d2be e7 f1               stb  [,s++]
2357 d2c0 7e d2 94            jmp cc85
2358                         cc86:  
2359 d2c3 fc 70 20            ldd  desti
2360 d2c6 fd 70 16            std  PC
2361 d2c9 bd ce 1b            jsr read_mem
2362 d2cc bd cb af            jsr dot_data
2363 d2cf cc 00 02            ldd  #2
2364 d2d2 f7 70 24            stb  state
2365                         cc84:  
2366 d2d5 39                  rts
2367                         
2368                         * .global key_reg
2369                         key_reg: 
2370 d2d6 cc 70 35            ldd  #buffer
2371 d2d9 34 06               pshs d
2372 d2db cc 00 07            ldd  #7
2373 d2de e3 e1               addd ,s++
2374 d2e0 34 06               pshs d
2375 d2e2 cc 00 00            ldd  #0
2376 d2e5 e7 f1               stb  [,s++]
2377 d2e7 cc 70 35            ldd  #buffer
2378 d2ea 34 06               pshs d
2379 d2ec cc 00 06            ldd  #6
2380 d2ef e3 e1               addd ,s++
2381 d2f1 34 06               pshs d
2382 d2f3 cc 00 00            ldd  #0
2383 d2f6 e7 f1               stb  [,s++]
2384 d2f8 cc 70 35            ldd  #buffer
2385 d2fb 34 06               pshs d
2386 d2fd cc 00 05            ldd  #5
2387 d300 e3 e1               addd ,s++
2388 d302 34 06               pshs d
2389 d304 cc 00 03            ldd  #3
2390 d307 e7 f1               stb  [,s++]
2391 d309 cc 70 35            ldd  #buffer
2392 d30c 34 06               pshs d
2393 d30e cc 00 04            ldd  #4
2394 d311 e3 e1               addd ,s++
2395 d313 34 06               pshs d
2396 d315 cc 00 8f            ldd  #143
2397 d318 e7 f1               stb  [,s++]
2398 d31a cc 70 35            ldd  #buffer
2399 d31d 34 06               pshs d
2400 d31f cc 00 03            ldd  #3
2401 d322 e3 e1               addd ,s++
2402 d324 34 06               pshs d
2403 d326 cc 00 ad            ldd  #173
2404 d329 e7 f1               stb  [,s++]
2405 d32b cc 70 35            ldd  #buffer
2406 d32e 34 06               pshs d
2407 d330 cc 00 02            ldd  #2
2408 d333 e3 e1               addd ,s++
2409 d335 34 06               pshs d
2410 d337 cc 00 00            ldd  #0
2411 d33a e7 f1               stb  [,s++]
2412 d33c cc 70 35            ldd  #buffer
2413 d33f 34 06               pshs d
2414 d341 cc 00 01            ldd  #1
2415 d344 e3 e1               addd ,s++
2416 d346 34 06               pshs d
2417 d348 cc 00 00            ldd  #0
2418 d34b e7 f1               stb  [,s++]
2419 d34d cc 70 35            ldd  #buffer
2420 d350 34 06               pshs d
2421 d352 cc 00 00            ldd  #0
2422 d355 e3 e1               addd ,s++
2423 d357 34 06               pshs d
2424 d359 cc 00 00            ldd  #0
2425 d35c e7 f1               stb  [,s++]
2426 d35e cc 00 03            ldd  #3
2427 d361 f7 70 24            stb  state
2428 d364 39                  rts
2429                         
2430                         * .global acca
2431                         acca: 
2432 d365 f6 70 2f            ldb  USER_A
2433 d368 1d                  sex
2434 d369 f7 70 04            stb  n
2435 d36c cc 70 35            ldd  #buffer
2436 d36f 34 06               pshs d
2437 d371 cc 00 02            ldd  #2
2438 d374 e3 e1               addd ,s++
2439 d376 34 06               pshs d
2440 d378 cc c1 0d            ldd  #convert
2441 d37b 34 06               pshs d
2442 d37d f6 70 04            ldb  n
2443 d380 1d                  sex
2444 d381 34 06               pshs d
2445 d383 cc 00 0f            ldd  #15
2446 d386 a4 e0               anda ,s+
2447 d388 e4 e0               andb ,s+
2448 d38a e3 e1               addd ,s++
2449 d38c 34 06               pshs d
2450 d38e e6 f1               ldb  [,s++]
2451 d390 1d                  sex
2452 d391 e7 f1               stb  [,s++]
2453 d393 f6 70 04            ldb  n
2454 d396 1d                  sex
2455 d397 34 06               pshs d
2456 d399 cc 00 04            ldd  #4
2457 d39c 5a                  decb
2458 d39d 2d 06               blt  *+8
2459 d39f 64 e4               lsr  ,s
2460 d3a1 66 61               ror  1,s
2461 d3a3 20 f7               bra *-7
2462 d3a5 35 06               puls d
2463 d3a7 f7 70 04            stb  n
2464 d3aa cc 70 35            ldd  #buffer
2465 d3ad 34 06               pshs d
2466 d3af cc 00 03            ldd  #3
2467 d3b2 e3 e1               addd ,s++
2468 d3b4 34 06               pshs d
2469 d3b6 cc c1 0d            ldd  #convert
2470 d3b9 34 06               pshs d
2471 d3bb f6 70 04            ldb  n
2472 d3be 1d                  sex
2473 d3bf 34 06               pshs d
2474 d3c1 cc 00 0f            ldd  #15
2475 d3c4 a4 e0               anda ,s+
2476 d3c6 e4 e0               andb ,s+
2477 d3c8 e3 e1               addd ,s++
2478 d3ca 34 06               pshs d
2479 d3cc e6 f1               ldb  [,s++]
2480 d3ce 1d                  sex
2481 d3cf e7 f1               stb  [,s++]
2482 d3d1 cc 70 35            ldd  #buffer
2483 d3d4 34 06               pshs d
2484 d3d6 cc 00 04            ldd  #4
2485 d3d9 e3 e1               addd ,s++
2486 d3db 34 06               pshs d
2487 d3dd cc 00 00            ldd  #0
2488 d3e0 e7 f1               stb  [,s++]
2489 d3e2 cc 70 35            ldd  #buffer
2490 d3e5 34 06               pshs d
2491 d3e7 cc 00 05            ldd  #5
2492 d3ea e3 e1               addd ,s++
2493 d3ec 34 06               pshs d
2494 d3ee cc 00 00            ldd  #0
2495 d3f1 e7 f1               stb  [,s++]
2496 d3f3 cc 70 35            ldd  #buffer
2497 d3f6 34 06               pshs d
2498 d3f8 cc 00 01            ldd  #1
2499 d3fb e3 e1               addd ,s++
2500 d3fd 34 06               pshs d
2501 d3ff cc 00 00            ldd  #0
2502 d402 e7 f1               stb  [,s++]
2503 d404 cc 70 35            ldd  #buffer
2504 d407 34 06               pshs d
2505 d409 cc 00 00            ldd  #0
2506 d40c e3 e1               addd ,s++
2507 d40e 34 06               pshs d
2508 d410 cc 00 3f            ldd  #63
2509 d413 e7 f1               stb  [,s++]
2510 d415 39                  rts
2511                         
2512                         * .global accb
2513                         accb: 
2514 d416 f6 70 30            ldb  USER_B
2515 d419 1d                  sex
2516 d41a f7 70 04            stb  n
2517 d41d cc 70 35            ldd  #buffer
2518 d420 34 06               pshs d
2519 d422 cc 00 02            ldd  #2
2520 d425 e3 e1               addd ,s++
2521 d427 34 06               pshs d
2522 d429 cc c1 0d            ldd  #convert
2523 d42c 34 06               pshs d
2524 d42e f6 70 04            ldb  n
2525 d431 1d                  sex
2526 d432 34 06               pshs d
2527 d434 cc 00 0f            ldd  #15
2528 d437 a4 e0               anda ,s+
2529 d439 e4 e0               andb ,s+
2530 d43b e3 e1               addd ,s++
2531 d43d 34 06               pshs d
2532 d43f e6 f1               ldb  [,s++]
2533 d441 1d                  sex
2534 d442 e7 f1               stb  [,s++]
2535 d444 f6 70 04            ldb  n
2536 d447 1d                  sex
2537 d448 34 06               pshs d
2538 d44a cc 00 04            ldd  #4
2539 d44d 5a                  decb
2540 d44e 2d 06               blt  *+8
2541 d450 64 e4               lsr  ,s
2542 d452 66 61               ror  1,s
2543 d454 20 f7               bra *-7
2544 d456 35 06               puls d
2545 d458 f7 70 04            stb  n
2546 d45b cc 70 35            ldd  #buffer
2547 d45e 34 06               pshs d
2548 d460 cc 00 03            ldd  #3
2549 d463 e3 e1               addd ,s++
2550 d465 34 06               pshs d
2551 d467 cc c1 0d            ldd  #convert
2552 d46a 34 06               pshs d
2553 d46c f6 70 04            ldb  n
2554 d46f 1d                  sex
2555 d470 34 06               pshs d
2556 d472 cc 00 0f            ldd  #15
2557 d475 a4 e0               anda ,s+
2558 d477 e4 e0               andb ,s+
2559 d479 e3 e1               addd ,s++
2560 d47b 34 06               pshs d
2561 d47d e6 f1               ldb  [,s++]
2562 d47f 1d                  sex
2563 d480 e7 f1               stb  [,s++]
2564 d482 cc 70 35            ldd  #buffer
2565 d485 34 06               pshs d
2566 d487 cc 00 04            ldd  #4
2567 d48a e3 e1               addd ,s++
2568 d48c 34 06               pshs d
2569 d48e cc 00 00            ldd  #0
2570 d491 e7 f1               stb  [,s++]
2571 d493 cc 70 35            ldd  #buffer
2572 d496 34 06               pshs d
2573 d498 cc 00 05            ldd  #5
2574 d49b e3 e1               addd ,s++
2575 d49d 34 06               pshs d
2576 d49f cc 00 00            ldd  #0
2577 d4a2 e7 f1               stb  [,s++]
2578 d4a4 cc 70 35            ldd  #buffer
2579 d4a7 34 06               pshs d
2580 d4a9 cc 00 01            ldd  #1
2581 d4ac e3 e1               addd ,s++
2582 d4ae 34 06               pshs d
2583 d4b0 cc 00 00            ldd  #0
2584 d4b3 e7 f1               stb  [,s++]
2585 d4b5 cc 70 35            ldd  #buffer
2586 d4b8 34 06               pshs d
2587 d4ba cc 00 00            ldd  #0
2588 d4bd e3 e1               addd ,s++
2589 d4bf 34 06               pshs d
2590 d4c1 cc 00 a7            ldd  #167
2591 d4c4 e7 f1               stb  [,s++]
2592 d4c6 39                  rts
2593                         
2594                         * .global ab
2595                         ab: 
2596 d4c7 f6 70 30            ldb  USER_B
2597 d4ca 1d                  sex
2598 d4cb f7 70 04            stb  n
2599 d4ce cc 70 35            ldd  #buffer
2600 d4d1 34 06               pshs d
2601 d4d3 cc 00 02            ldd  #2
2602 d4d6 e3 e1               addd ,s++
2603 d4d8 34 06               pshs d
2604 d4da cc c1 0d            ldd  #convert
2605 d4dd 34 06               pshs d
2606 d4df f6 70 04            ldb  n
2607 d4e2 1d                  sex
2608 d4e3 34 06               pshs d
2609 d4e5 cc 00 0f            ldd  #15
2610 d4e8 a4 e0               anda ,s+
2611 d4ea e4 e0               andb ,s+
2612 d4ec e3 e1               addd ,s++
2613 d4ee 34 06               pshs d
2614 d4f0 e6 f1               ldb  [,s++]
2615 d4f2 1d                  sex
2616 d4f3 e7 f1               stb  [,s++]
2617 d4f5 f6 70 04            ldb  n
2618 d4f8 1d                  sex
2619 d4f9 34 06               pshs d
2620 d4fb cc 00 04            ldd  #4
2621 d4fe 5a                  decb
2622 d4ff 2d 06               blt  *+8
2623 d501 64 e4               lsr  ,s
2624 d503 66 61               ror  1,s
2625 d505 20 f7               bra *-7
2626 d507 35 06               puls d
2627 d509 f7 70 04            stb  n
2628 d50c cc 70 35            ldd  #buffer
2629 d50f 34 06               pshs d
2630 d511 cc 00 03            ldd  #3
2631 d514 e3 e1               addd ,s++
2632 d516 34 06               pshs d
2633 d518 cc c1 0d            ldd  #convert
2634 d51b 34 06               pshs d
2635 d51d f6 70 04            ldb  n
2636 d520 1d                  sex
2637 d521 34 06               pshs d
2638 d523 cc 00 0f            ldd  #15
2639 d526 a4 e0               anda ,s+
2640 d528 e4 e0               andb ,s+
2641 d52a e3 e1               addd ,s++
2642 d52c 34 06               pshs d
2643 d52e e6 f1               ldb  [,s++]
2644 d530 1d                  sex
2645 d531 e7 f1               stb  [,s++]
2646 d533 f6 70 2f            ldb  USER_A
2647 d536 1d                  sex
2648 d537 f7 70 04            stb  n
2649 d53a cc 70 35            ldd  #buffer
2650 d53d 34 06               pshs d
2651 d53f cc 00 04            ldd  #4
2652 d542 e3 e1               addd ,s++
2653 d544 34 06               pshs d
2654 d546 cc c1 0d            ldd  #convert
2655 d549 34 06               pshs d
2656 d54b f6 70 04            ldb  n
2657 d54e 1d                  sex
2658 d54f 34 06               pshs d
2659 d551 cc 00 0f            ldd  #15
2660 d554 a4 e0               anda ,s+
2661 d556 e4 e0               andb ,s+
2662 d558 e3 e1               addd ,s++
2663 d55a 34 06               pshs d
2664 d55c e6 f1               ldb  [,s++]
2665 d55e 1d                  sex
2666 d55f e7 f1               stb  [,s++]
2667 d561 f6 70 04            ldb  n
2668 d564 1d                  sex
2669 d565 34 06               pshs d
2670 d567 cc 00 04            ldd  #4
2671 d56a 5a                  decb
2672 d56b 2d 06               blt  *+8
2673 d56d 64 e4               lsr  ,s
2674 d56f 66 61               ror  1,s
2675 d571 20 f7               bra *-7
2676 d573 35 06               puls d
2677 d575 f7 70 04            stb  n
2678 d578 cc 70 35            ldd  #buffer
2679 d57b 34 06               pshs d
2680 d57d cc 00 05            ldd  #5
2681 d580 e3 e1               addd ,s++
2682 d582 34 06               pshs d
2683 d584 cc c1 0d            ldd  #convert
2684 d587 34 06               pshs d
2685 d589 f6 70 04            ldb  n
2686 d58c 1d                  sex
2687 d58d 34 06               pshs d
2688 d58f cc 00 0f            ldd  #15
2689 d592 a4 e0               anda ,s+
2690 d594 e4 e0               andb ,s+
2691 d596 e3 e1               addd ,s++
2692 d598 34 06               pshs d
2693 d59a e6 f1               ldb  [,s++]
2694 d59c 1d                  sex
2695 d59d e7 f1               stb  [,s++]
2696 d59f cc 70 35            ldd  #buffer
2697 d5a2 34 06               pshs d
2698 d5a4 cc 00 01            ldd  #1
2699 d5a7 e3 e1               addd ,s++
2700 d5a9 34 06               pshs d
2701 d5ab cc 00 3f            ldd  #63
2702 d5ae e7 f1               stb  [,s++]
2703 d5b0 cc 70 35            ldd  #buffer
2704 d5b3 34 06               pshs d
2705 d5b5 cc 00 00            ldd  #0
2706 d5b8 e3 e1               addd ,s++
2707 d5ba 34 06               pshs d
2708 d5bc cc 00 a7            ldd  #167
2709 d5bf e7 f1               stb  [,s++]
2710 d5c1 39                  rts
2711                         
2712                         * .global reg_x
2713                         reg_x: 
2714 d5c2 fc 70 29            ldd  USER_X
2715 d5c5 fd 70 14            std  temp16
2716 d5c8 fc 70 14            ldd  temp16
2717 d5cb 34 06               pshs d
2718 d5cd bd cc 9c            jsr hex4
2719 d5d0 32 62               leas 2,s
2720 d5d2 cc 70 35            ldd  #buffer
2721 d5d5 34 06               pshs d
2722 d5d7 cc 00 01            ldd  #1
2723 d5da e3 e1               addd ,s++
2724 d5dc 34 06               pshs d
2725 d5de cc 00 00            ldd  #0
2726 d5e1 e7 f1               stb  [,s++]
2727 d5e3 cc 70 35            ldd  #buffer
2728 d5e6 34 06               pshs d
2729 d5e8 cc 00 00            ldd  #0
2730 d5eb e3 e1               addd ,s++
2731 d5ed 34 06               pshs d
2732 d5ef cc 00 13            ldd  #19
2733 d5f2 e7 f1               stb  [,s++]
2734 d5f4 39                  rts
2735                         
2736                         * .global reg_y
2737                         reg_y: 
2738 d5f5 fc 70 2d            ldd  USER_Y
2739 d5f8 fd 70 14            std  temp16
2740 d5fb fc 70 14            ldd  temp16
2741 d5fe 34 06               pshs d
2742 d600 bd cc 9c            jsr hex4
2743 d603 32 62               leas 2,s
2744 d605 cc 70 35            ldd  #buffer
2745 d608 34 06               pshs d
2746 d60a cc 00 01            ldd  #1
2747 d60d e3 e1               addd ,s++
2748 d60f 34 06               pshs d
2749 d611 cc 00 00            ldd  #0
2750 d614 e7 f1               stb  [,s++]
2751 d616 cc 70 35            ldd  #buffer
2752 d619 34 06               pshs d
2753 d61b cc 00 00            ldd  #0
2754 d61e e3 e1               addd ,s++
2755 d620 34 06               pshs d
2756 d622 cc 00 b6            ldd  #182
2757 d625 e7 f1               stb  [,s++]
2758 d627 39                  rts
2759                         
2760                         * .global reg_u
2761                         reg_u: 
2762 d628 fc 70 27            ldd  USER_U
2763 d62b fd 70 14            std  temp16
2764 d62e fc 70 14            ldd  temp16
2765 d631 34 06               pshs d
2766 d633 bd cc 9c            jsr hex4
2767 d636 32 62               leas 2,s
2768 d638 cc 70 35            ldd  #buffer
2769 d63b 34 06               pshs d
2770 d63d cc 00 01            ldd  #1
2771 d640 e3 e1               addd ,s++
2772 d642 34 06               pshs d
2773 d644 cc 00 00            ldd  #0
2774 d647 e7 f1               stb  [,s++]
2775 d649 cc 70 35            ldd  #buffer
2776 d64c 34 06               pshs d
2777 d64e cc 00 00            ldd  #0
2778 d651 e3 e1               addd ,s++
2779 d653 34 06               pshs d
2780 d655 cc 00 b5            ldd  #181
2781 d658 e7 f1               stb  [,s++]
2782 d65a 39                  rts
2783                         
2784                         * .global reg_s
2785                         reg_s: 
2786 d65b fc 70 2b            ldd  SAVE_SP
2787 d65e fd 70 14            std  temp16
2788 d661 fc 70 14            ldd  temp16
2789 d664 34 06               pshs d
2790 d666 bd cc 9c            jsr hex4
2791 d669 32 62               leas 2,s
2792 d66b cc 70 35            ldd  #buffer
2793 d66e 34 06               pshs d
2794 d670 cc 00 01            ldd  #1
2795 d673 e3 e1               addd ,s++
2796 d675 34 06               pshs d
2797 d677 cc 00 00            ldd  #0
2798 d67a e7 f1               stb  [,s++]
2799 d67c cc 70 35            ldd  #buffer
2800 d67f 34 06               pshs d
2801 d681 cc 00 00            ldd  #0
2802 d684 e3 e1               addd ,s++
2803 d686 34 06               pshs d
2804 d688 cc 00 ae            ldd  #174
2805 d68b e7 f1               stb  [,s++]
2806 d68d 39                  rts
2807                         
2808                         * .global reg_dp
2809                         reg_dp: 
2810 d68e f6 70 32            ldb  USER_DP
2811 d691 1d                  sex
2812 d692 f7 70 04            stb  n
2813 d695 cc 70 35            ldd  #buffer
2814 d698 34 06               pshs d
2815 d69a cc 00 02            ldd  #2
2816 d69d e3 e1               addd ,s++
2817 d69f 34 06               pshs d
2818 d6a1 cc c1 0d            ldd  #convert
2819 d6a4 34 06               pshs d
2820 d6a6 f6 70 04            ldb  n
2821 d6a9 1d                  sex
2822 d6aa 34 06               pshs d
2823 d6ac cc 00 0f            ldd  #15
2824 d6af a4 e0               anda ,s+
2825 d6b1 e4 e0               andb ,s+
2826 d6b3 e3 e1               addd ,s++
2827 d6b5 34 06               pshs d
2828 d6b7 e6 f1               ldb  [,s++]
2829 d6b9 1d                  sex
2830 d6ba e7 f1               stb  [,s++]
2831 d6bc f6 70 04            ldb  n
2832 d6bf 1d                  sex
2833 d6c0 34 06               pshs d
2834 d6c2 cc 00 04            ldd  #4
2835 d6c5 5a                  decb
2836 d6c6 2d 06               blt  *+8
2837 d6c8 64 e4               lsr  ,s
2838 d6ca 66 61               ror  1,s
2839 d6cc 20 f7               bra *-7
2840 d6ce 35 06               puls d
2841 d6d0 f7 70 04            stb  n
2842 d6d3 cc 70 35            ldd  #buffer
2843 d6d6 34 06               pshs d
2844 d6d8 cc 00 03            ldd  #3
2845 d6db e3 e1               addd ,s++
2846 d6dd 34 06               pshs d
2847 d6df cc c1 0d            ldd  #convert
2848 d6e2 34 06               pshs d
2849 d6e4 f6 70 04            ldb  n
2850 d6e7 1d                  sex
2851 d6e8 34 06               pshs d
2852 d6ea cc 00 0f            ldd  #15
2853 d6ed a4 e0               anda ,s+
2854 d6ef e4 e0               andb ,s+
2855 d6f1 e3 e1               addd ,s++
2856 d6f3 34 06               pshs d
2857 d6f5 e6 f1               ldb  [,s++]
2858 d6f7 1d                  sex
2859 d6f8 e7 f1               stb  [,s++]
2860 d6fa cc 70 35            ldd  #buffer
2861 d6fd 34 06               pshs d
2862 d6ff cc 00 04            ldd  #4
2863 d702 e3 e1               addd ,s++
2864 d704 34 06               pshs d
2865 d706 cc 00 00            ldd  #0
2866 d709 e7 f1               stb  [,s++]
2867 d70b cc 70 35            ldd  #buffer
2868 d70e 34 06               pshs d
2869 d710 cc 00 05            ldd  #5
2870 d713 e3 e1               addd ,s++
2871 d715 34 06               pshs d
2872 d717 cc 00 00            ldd  #0
2873 d71a e7 f1               stb  [,s++]
2874 d71c cc 70 35            ldd  #buffer
2875 d71f 34 06               pshs d
2876 d721 cc 00 01            ldd  #1
2877 d724 e3 e1               addd ,s++
2878 d726 34 06               pshs d
2879 d728 cc 00 b3            ldd  #179
2880 d72b e7 f1               stb  [,s++]
2881 d72d cc 70 35            ldd  #buffer
2882 d730 34 06               pshs d
2883 d732 cc 00 00            ldd  #0
2884 d735 e3 e1               addd ,s++
2885 d737 34 06               pshs d
2886 d739 cc 00 1f            ldd  #31
2887 d73c e7 f1               stb  [,s++]
2888 d73e 39                  rts
2889                         
2890                         * .global low_cc
2891                         low_cc: 
2892 d73f f6 70 31            ldb  USER_P
2893 d742 1d                  sex
2894 d743 f7 70 04            stb  n
2895 d746 f6 70 04            ldb  n
2896 d749 1d                  sex
2897 d74a 34 06               pshs d
2898 d74c cc 00 01            ldd  #1
2899 d74f a4 e0               anda ,s+
2900 d751 e4 e0               andb ,s+
2901 d753 10 83 00 00         cmpd #0
2902 d757 10 27 00 14         lbeq cc89
2903 d75b cc 70 35            ldd  #buffer
2904 d75e 34 06               pshs d
2905 d760 cc 00 02            ldd  #2
2906 d763 e3 e1               addd ,s++
2907 d765 34 06               pshs d
2908 d767 cc 00 30            ldd  #48
2909 d76a e7 f1               stb  [,s++]
2910 d76c 7e d7 80            jmp cc90
2911                         cc89:  
2912 d76f cc 70 35            ldd  #buffer
2913 d772 34 06               pshs d
2914 d774 cc 00 02            ldd  #2
2915 d777 e3 e1               addd ,s++
2916 d779 34 06               pshs d
2917 d77b cc 00 bd            ldd  #189
2918 d77e e7 f1               stb  [,s++]
2919                         cc90:  
2920 d780 f6 70 04            ldb  n
2921 d783 1d                  sex
2922 d784 34 06               pshs d
2923 d786 cc 00 02            ldd  #2
2924 d789 a4 e0               anda ,s+
2925 d78b e4 e0               andb ,s+
2926 d78d 10 83 00 00         cmpd #0
2927 d791 10 27 00 14         lbeq cc91
2928 d795 cc 70 35            ldd  #buffer
2929 d798 34 06               pshs d
2930 d79a cc 00 03            ldd  #3
2931 d79d e3 e1               addd ,s++
2932 d79f 34 06               pshs d
2933 d7a1 cc 00 30            ldd  #48
2934 d7a4 e7 f1               stb  [,s++]
2935 d7a6 7e d7 ba            jmp cc92
2936                         cc91:  
2937 d7a9 cc 70 35            ldd  #buffer
2938 d7ac 34 06               pshs d
2939 d7ae cc 00 03            ldd  #3
2940 d7b1 e3 e1               addd ,s++
2941 d7b3 34 06               pshs d
2942 d7b5 cc 00 bd            ldd  #189
2943 d7b8 e7 f1               stb  [,s++]
2944                         cc92:  
2945 d7ba f6 70 04            ldb  n
2946 d7bd 1d                  sex
2947 d7be 34 06               pshs d
2948 d7c0 cc 00 04            ldd  #4
2949 d7c3 a4 e0               anda ,s+
2950 d7c5 e4 e0               andb ,s+
2951 d7c7 10 83 00 00         cmpd #0
2952 d7cb 10 27 00 14         lbeq cc93
2953 d7cf cc 70 35            ldd  #buffer
2954 d7d2 34 06               pshs d
2955 d7d4 cc 00 04            ldd  #4
2956 d7d7 e3 e1               addd ,s++
2957 d7d9 34 06               pshs d
2958 d7db cc 00 30            ldd  #48
2959 d7de e7 f1               stb  [,s++]
2960 d7e0 7e d7 f4            jmp cc94
2961                         cc93:  
2962 d7e3 cc 70 35            ldd  #buffer
2963 d7e6 34 06               pshs d
2964 d7e8 cc 00 04            ldd  #4
2965 d7eb e3 e1               addd ,s++
2966 d7ed 34 06               pshs d
2967 d7ef cc 00 bd            ldd  #189
2968 d7f2 e7 f1               stb  [,s++]
2969                         cc94:  
2970 d7f4 f6 70 04            ldb  n
2971 d7f7 1d                  sex
2972 d7f8 34 06               pshs d
2973 d7fa cc 00 08            ldd  #8
2974 d7fd a4 e0               anda ,s+
2975 d7ff e4 e0               andb ,s+
2976 d801 10 83 00 00         cmpd #0
2977 d805 10 27 00 14         lbeq cc95
2978 d809 cc 70 35            ldd  #buffer
2979 d80c 34 06               pshs d
2980 d80e cc 00 05            ldd  #5
2981 d811 e3 e1               addd ,s++
2982 d813 34 06               pshs d
2983 d815 cc 00 30            ldd  #48
2984 d818 e7 f1               stb  [,s++]
2985 d81a 7e d8 2e            jmp cc96
2986                         cc95:  
2987 d81d cc 70 35            ldd  #buffer
2988 d820 34 06               pshs d
2989 d822 cc 00 05            ldd  #5
2990 d825 e3 e1               addd ,s++
2991 d827 34 06               pshs d
2992 d829 cc 00 bd            ldd  #189
2993 d82c e7 f1               stb  [,s++]
2994                         cc96:  
2995 d82e cc 70 35            ldd  #buffer
2996 d831 34 06               pshs d
2997 d833 cc 00 01            ldd  #1
2998 d836 e3 e1               addd ,s++
2999 d838 34 06               pshs d
3000 d83a cc 00 8d            ldd  #141
3001 d83d e7 f1               stb  [,s++]
3002 d83f cc 70 35            ldd  #buffer
3003 d842 34 06               pshs d
3004 d844 cc 00 00            ldd  #0
3005 d847 e3 e1               addd ,s++
3006 d849 34 06               pshs d
3007 d84b cc 00 85            ldd  #133
3008 d84e e7 f1               stb  [,s++]
3009 d850 39                  rts
3010                         
3011                         * .global hi_cc
3012                         hi_cc: 
3013 d851 f6 70 31            ldb  USER_P
3014 d854 1d                  sex
3015 d855 f7 70 04            stb  n
3016 d858 f6 70 04            ldb  n
3017 d85b 1d                  sex
3018 d85c 34 06               pshs d
3019 d85e cc 00 10            ldd  #16
3020 d861 a4 e0               anda ,s+
3021 d863 e4 e0               andb ,s+
3022 d865 10 83 00 00         cmpd #0
3023 d869 10 27 00 14         lbeq cc97
3024 d86d cc 70 35            ldd  #buffer
3025 d870 34 06               pshs d
3026 d872 cc 00 02            ldd  #2
3027 d875 e3 e1               addd ,s++
3028 d877 34 06               pshs d
3029 d879 cc 00 30            ldd  #48
3030 d87c e7 f1               stb  [,s++]
3031 d87e 7e d8 92            jmp cc98
3032                         cc97:  
3033 d881 cc 70 35            ldd  #buffer
3034 d884 34 06               pshs d
3035 d886 cc 00 02            ldd  #2
3036 d889 e3 e1               addd ,s++
3037 d88b 34 06               pshs d
3038 d88d cc 00 bd            ldd  #189
3039 d890 e7 f1               stb  [,s++]
3040                         cc98:  
3041 d892 f6 70 04            ldb  n
3042 d895 1d                  sex
3043 d896 34 06               pshs d
3044 d898 cc 00 20            ldd  #32
3045 d89b a4 e0               anda ,s+
3046 d89d e4 e0               andb ,s+
3047 d89f 10 83 00 00         cmpd #0
3048 d8a3 10 27 00 14         lbeq cc99
3049 d8a7 cc 70 35            ldd  #buffer
3050 d8aa 34 06               pshs d
3051 d8ac cc 00 03            ldd  #3
3052 d8af e3 e1               addd ,s++
3053 d8b1 34 06               pshs d
3054 d8b3 cc 00 30            ldd  #48
3055 d8b6 e7 f1               stb  [,s++]
3056 d8b8 7e d8 cc            jmp cc100
3057                         cc99:  
3058 d8bb cc 70 35            ldd  #buffer
3059 d8be 34 06               pshs d
3060 d8c0 cc 00 03            ldd  #3
3061 d8c3 e3 e1               addd ,s++
3062 d8c5 34 06               pshs d
3063 d8c7 cc 00 bd            ldd  #189
3064 d8ca e7 f1               stb  [,s++]
3065                         cc100:  
3066 d8cc f6 70 04            ldb  n
3067 d8cf 1d                  sex
3068 d8d0 34 06               pshs d
3069 d8d2 cc 00 40            ldd  #64
3070 d8d5 a4 e0               anda ,s+
3071 d8d7 e4 e0               andb ,s+
3072 d8d9 10 83 00 00         cmpd #0
3073 d8dd 10 27 00 14         lbeq cc101
3074 d8e1 cc 70 35            ldd  #buffer
3075 d8e4 34 06               pshs d
3076 d8e6 cc 00 04            ldd  #4
3077 d8e9 e3 e1               addd ,s++
3078 d8eb 34 06               pshs d
3079 d8ed cc 00 30            ldd  #48
3080 d8f0 e7 f1               stb  [,s++]
3081 d8f2 7e d9 06            jmp cc102
3082                         cc101:  
3083 d8f5 cc 70 35            ldd  #buffer
3084 d8f8 34 06               pshs d
3085 d8fa cc 00 04            ldd  #4
3086 d8fd e3 e1               addd ,s++
3087 d8ff 34 06               pshs d
3088 d901 cc 00 bd            ldd  #189
3089 d904 e7 f1               stb  [,s++]
3090                         cc102:  
3091 d906 f6 70 04            ldb  n
3092 d909 1d                  sex
3093 d90a 34 06               pshs d
3094 d90c cc 00 80            ldd  #128
3095 d90f a4 e0               anda ,s+
3096 d911 e4 e0               andb ,s+
3097 d913 10 83 00 00         cmpd #0
3098 d917 10 27 00 14         lbeq cc103
3099 d91b cc 70 35            ldd  #buffer
3100 d91e 34 06               pshs d
3101 d920 cc 00 05            ldd  #5
3102 d923 e3 e1               addd ,s++
3103 d925 34 06               pshs d
3104 d927 cc 00 30            ldd  #48
3105 d92a e7 f1               stb  [,s++]
3106 d92c 7e d9 40            jmp cc104
3107                         cc103:  
3108 d92f cc 70 35            ldd  #buffer
3109 d932 34 06               pshs d
3110 d934 cc 00 05            ldd  #5
3111 d937 e3 e1               addd ,s++
3112 d939 34 06               pshs d
3113 d93b cc 00 bd            ldd  #189
3114 d93e e7 f1               stb  [,s++]
3115                         cc104:  
3116 d940 cc 70 35            ldd  #buffer
3117 d943 34 06               pshs d
3118 d945 cc 00 01            ldd  #1
3119 d948 e3 e1               addd ,s++
3120 d94a 34 06               pshs d
3121 d94c cc 00 8d            ldd  #141
3122 d94f e7 f1               stb  [,s++]
3123 d951 cc 70 35            ldd  #buffer
3124 d954 34 06               pshs d
3125 d956 cc 00 00            ldd  #0
3126 d959 e3 e1               addd ,s++
3127 d95b 34 06               pshs d
3128 d95d cc 00 37            ldd  #55
3129 d960 e7 f1               stb  [,s++]
3130 d962 39                  rts
3131                         
3132                         * .global reg_disp
3133                         reg_disp: 
3134 d963 f6 70 09            ldb  key
3135 d966 1d                  sex
3136 d967 7e d9 a9            jmp cc107
3137                         cc108:  
3138 d96a bd d3 65            jsr acca
3139 d96d 7e d9 d6            jmp cc106
3140                         cc109:  
3141 d970 bd d4 16            jsr accb
3142 d973 7e d9 d6            jmp cc106
3143                         cc110:  
3144 d976 bd d4 c7            jsr ab
3145 d979 7e d9 d6            jmp cc106
3146                         cc111:  
3147 d97c bd d5 c2            jsr reg_x
3148 d97f 7e d9 d6            jmp cc106
3149                         cc112:  
3150 d982 bd d5 f5            jsr reg_y
3151 d985 7e d9 d6            jmp cc106
3152                         cc113:  
3153 d988 bd d6 28            jsr reg_u
3154 d98b 7e d9 d6            jmp cc106
3155                         cc114:  
3156 d98e bd d6 5b            jsr reg_s
3157 d991 7e d9 d6            jmp cc106
3158                         cc115:  
3159 d994 bd d6 8e            jsr reg_dp
3160 d997 7e d9 d6            jmp cc106
3161                         cc116:  
3162 d99a bd d7 3f            jsr low_cc
3163 d99d 7e d9 d6            jmp cc106
3164                         cc117:  
3165 d9a0 bd d8 51            jsr hi_cc
3166 d9a3 7e d9 d6            jmp cc106
3167 d9a6 7e d9 d6            jmp cc106
3168                         cc107:  
3169 d9a9 bd c0 f9            jsr ccswitch
3170 d9ac d9 6a 00 00         FDB cc108,0
3171 d9b0 d9 70 00 01         FDB cc109,1
3172 d9b4 d9 76 00 02         FDB cc110,2
3173 d9b8 d9 7c 00 06         FDB cc111,6
3174 d9bc d9 82 00 07         FDB cc112,7
3175 d9c0 d9 88 00 09         FDB cc113,9
3176 d9c4 d9 8e 00 0a         FDB cc114,10
3177 d9c8 d9 94 00 08         FDB cc115,8
3178 d9cc d9 9a 00 05         FDB cc116,5
3179 d9d0 d9 a0 00 04         FDB cc117,4
3180 d9d4 00 00               FDB 0
3181                         cc106:  
3182 d9d6 39                  rts
3183                         
3184                         * .global insert
3185                         insert: 
3186 d9d7 f6 70 24            ldb  state
3187 d9da 1d                  sex
3188 d9db 34 06               pshs d
3189 d9dd cc 00 01            ldd  #1
3190 d9e0 10 a3 e1            cmpd ,s++
3191 d9e3 27 05               beq  *+7
3192 d9e5 cc 00 00            ldd  #0
3193 d9e8 20 03               bra  *+5
3194 d9ea cc 00 01            ldd  #1
3195 d9ed 10 83 00 00         cmpd #0
3196 d9f1 10 26 00 24         lbne cc119
3197 d9f5 f6 70 24            ldb  state
3198 d9f8 1d                  sex
3199 d9f9 34 06               pshs d
3200 d9fb cc 00 02            ldd  #2
3201 d9fe 10 a3 e1            cmpd ,s++
3202 da01 27 05               beq  *+7
3203 da03 cc 00 00            ldd  #0
3204 da06 20 03               bra  *+5
3205 da08 cc 00 01            ldd  #1
3206 da0b 10 83 00 00         cmpd #0
3207 da0f 10 26 00 06         lbne cc119
3208 da13 cc 00 00            ldd  #0
3209 da16 7e da 1c            jmp cc120
3210                         cc119:  
3211 da19 cc 00 01            ldd  #1
3212                         cc120:  
3213 da1c 10 83 00 00         cmpd #0
3214 da20 10 27 00 8e         lbeq cc118
3215 da24 fc 70 16            ldd  PC
3216 da27 fd 70 c3            std  dptr
3217 da2a cc 02 00            ldd  #512
3218 da2d fd 70 02            std  j
3219                         cc123:  
3220 da30 fc 70 02            ldd  j
3221 da33 34 06               pshs d
3222 da35 cc 00 00            ldd  #0
3223 da38 10 a3 e1            cmpd ,s++
3224 da3b 2d 05               blt  *+7
3225 da3d cc 00 00            ldd  #0
3226 da40 20 03               bra  *+5
3227 da42 cc 00 01            ldd  #1
3228 da45 10 83 00 00         cmpd #0
3229 da49 10 27 00 3f         lbeq cc122
3230 da4d 7e da 5f            jmp cc124
3231                         cc121:  
3232 da50 fc 70 02            ldd  j
3233 da53 83 00 01            subd #1
3234 da56 fd 70 02            std  j
3235 da59 c3 00 01            addd #1
3236 da5c 7e da 30            jmp cc123
3237                         cc124:  
3238 da5f fc 70 c3            ldd  dptr
3239 da62 34 06               pshs d
3240 da64 fc 70 02            ldd  j
3241 da67 e3 e1               addd ,s++
3242 da69 34 06               pshs d
3243 da6b fc 70 c3            ldd  dptr
3244 da6e 34 06               pshs d
3245 da70 fc 70 02            ldd  j
3246 da73 e3 e1               addd ,s++
3247 da75 34 06               pshs d
3248 da77 cc 00 01            ldd  #1
3249 da7a 35 10               puls x
3250 da7c 34 06               pshs d
3251 da7e 1f 10               tfr  x,d
3252 da80 a3 e1               subd ,s++
3253 da82 34 06               pshs d
3254 da84 e6 f1               ldb  [,s++]
3255 da86 1d                  sex
3256 da87 e7 f1               stb  [,s++]
3257 da89 7e da 50            jmp cc121
3258                         cc122:  
3259 da8c fc 70 c3            ldd  dptr
3260 da8f 34 06               pshs d
3261 da91 cc 00 01            ldd  #1
3262 da94 e3 e1               addd ,s++
3263 da96 34 06               pshs d
3264 da98 cc 00 00            ldd  #0
3265 da9b e7 f1               stb  [,s++]
3266 da9d fc 70 16            ldd  PC
3267 daa0 c3 00 01            addd #1
3268 daa3 fd 70 16            std  PC
3269 daa6 83 00 01            subd #1
3270 daa9 bd ce 1b            jsr read_mem
3271 daac cc 00 02            ldd  #2
3272 daaf f7 70 24            stb  state
3273                         cc118:  
3274 dab2 39                  rts
3275                         
3276                         * .global cut_byte
3277                         cut_byte: 
3278 dab3 f6 70 24            ldb  state
3279 dab6 1d                  sex
3280 dab7 34 06               pshs d
3281 dab9 cc 00 01            ldd  #1
3282 dabc 10 a3 e1            cmpd ,s++
3283 dabf 27 05               beq  *+7
3284 dac1 cc 00 00            ldd  #0
3285 dac4 20 03               bra  *+5
3286 dac6 cc 00 01            ldd  #1
3287 dac9 10 83 00 00         cmpd #0
3288 dacd 10 26 00 24         lbne cc126
3289 dad1 f6 70 24            ldb  state
3290 dad4 1d                  sex
3291 dad5 34 06               pshs d
3292 dad7 cc 00 02            ldd  #2
3293 dada 10 a3 e1            cmpd ,s++
3294 dadd 27 05               beq  *+7
3295 dadf cc 00 00            ldd  #0
3296 dae2 20 03               bra  *+5
3297 dae4 cc 00 01            ldd  #1
3298 dae7 10 83 00 00         cmpd #0
3299 daeb 10 26 00 06         lbne cc126
3300 daef cc 00 00            ldd  #0
3301 daf2 7e da f8            jmp cc127
3302                         cc126:  
3303 daf5 cc 00 01            ldd  #1
3304                         cc127:  
3305 daf8 10 83 00 00         cmpd #0
3306 dafc 10 27 00 6b         lbeq cc125
3307 db00 fc 70 16            ldd  PC
3308 db03 fd 70 c3            std  dptr
3309 db06 cc 00 00            ldd  #0
3310 db09 fd 70 02            std  j
3311                         cc130:  
3312 db0c fc 70 02            ldd  j
3313 db0f 34 06               pshs d
3314 db11 cc 02 00            ldd  #512
3315 db14 10 a3 e1            cmpd ,s++
3316 db17 2e 05               bgt  *+7
3317 db19 cc 00 00            ldd  #0
3318 db1c 20 03               bra  *+5
3319 db1e cc 00 01            ldd  #1
3320 db21 10 83 00 00         cmpd #0
3321 db25 10 27 00 39         lbeq cc129
3322 db29 7e db 3b            jmp cc131
3323                         cc128:  
3324 db2c fc 70 02            ldd  j
3325 db2f c3 00 01            addd #1
3326 db32 fd 70 02            std  j
3327 db35 83 00 01            subd #1
3328 db38 7e db 0c            jmp cc130
3329                         cc131:  
3330 db3b fc 70 c3            ldd  dptr
3331 db3e 34 06               pshs d
3332 db40 fc 70 02            ldd  j
3333 db43 e3 e1               addd ,s++
3334 db45 34 06               pshs d
3335 db47 fc 70 c3            ldd  dptr
3336 db4a 34 06               pshs d
3337 db4c fc 70 02            ldd  j
3338 db4f e3 e1               addd ,s++
3339 db51 34 06               pshs d
3340 db53 cc 00 01            ldd  #1
3341 db56 e3 e1               addd ,s++
3342 db58 34 06               pshs d
3343 db5a e6 f1               ldb  [,s++]
3344 db5c 1d                  sex
3345 db5d e7 f1               stb  [,s++]
3346 db5f 7e db 2c            jmp cc128
3347                         cc129:  
3348 db62 bd ce 1b            jsr read_mem
3349 db65 cc 00 02            ldd  #2
3350 db68 f7 70 24            stb  state
3351                         cc125:  
3352 db6b 39                  rts
3353                         
3354                         * .global key_test
3355                         key_test: 
3356 db6c 1c ef              		andcc #$ef
3357 db6e cc 00 00            ldd  #0
3358 db71 fd 70 22            std  t
3359 db74 cc 70 35            ldd  #buffer
3360 db77 34 06               pshs d
3361 db79 cc 00 00            ldd  #0
3362 db7c e3 e1               addd ,s++
3363 db7e 34 06               pshs d
3364 db80 cc 00 00            ldd  #0
3365 db83 e7 f1               stb  [,s++]
3366 db85 cc 70 35            ldd  #buffer
3367 db88 34 06               pshs d
3368 db8a cc 00 01            ldd  #1
3369 db8d e3 e1               addd ,s++
3370 db8f 34 06               pshs d
3371 db91 cc 00 00            ldd  #0
3372 db94 e7 f1               stb  [,s++]
3373                         cc132:  
3374 db96 cc 00 01            ldd  #1
3375 db99 10 83 00 00         cmpd #0
3376 db9d 10 27 00 4d         lbeq cc133
3377                         cc134:  
3378 dba1 f6 70 0e            ldb  tick
3379 dba4 1d                  sex
3380 dba5 34 06               pshs d
3381 dba7 cc 00 64            ldd  #100
3382 dbaa 10 a3 e1            cmpd ,s++
3383 dbad 2e 05               bgt  *+7
3384 dbaf cc 00 00            ldd  #0
3385 dbb2 20 03               bra  *+5
3386 dbb4 cc 00 01            ldd  #1
3387 dbb7 10 83 00 00         cmpd #0
3388 dbbb 10 27 00 06         lbeq cc135
3389 dbbf bd c8 96            jsr scan
3390 dbc2 7e db a1            jmp cc134
3391                         cc135:  
3392 dbc5 cc 00 00            ldd  #0
3393 dbc8 f7 70 0e            stb  tick
3394 dbcb fc 70 22            ldd  t
3395 dbce 34 06               pshs d
3396 dbd0 bd cc 9c            jsr hex4
3397 dbd3 32 62               leas 2,s
3398 dbd5 fc 70 bb            ldd  gpio1
3399 dbd8 34 06               pshs d
3400 dbda fc 70 22            ldd  t
3401 dbdd e7 f1               stb  [,s++]
3402 dbdf fc 70 22            ldd  t
3403 dbe2 c3 00 01            addd #1
3404 dbe5 fd 70 22            std  t
3405 dbe8 83 00 01            subd #1
3406 dbeb 7e db 96            jmp cc132
3407                         cc133:  
3408 dbee 39                  rts
3409                         
3410                         * .global clear_bu
3411                         clear_bu: 
3412 dbef cc 00 00            ldd  #0
3413 dbf2 fd 70 00            std  i
3414                         cc138:  
3415 dbf5 fc 70 00            ldd  i
3416 dbf8 34 06               pshs d
3417 dbfa cc 00 06            ldd  #6
3418 dbfd 10 a3 e1            cmpd ,s++
3419 dc00 2e 05               bgt  *+7
3420 dc02 cc 00 00            ldd  #0
3421 dc05 20 03               bra  *+5
3422 dc07 cc 00 01            ldd  #1
3423 dc0a 10 83 00 00         cmpd #0
3424 dc0e 10 27 00 26         lbeq cc137
3425 dc12 7e dc 24            jmp cc139
3426                         cc136:  
3427 dc15 fc 70 00            ldd  i
3428 dc18 c3 00 01            addd #1
3429 dc1b fd 70 00            std  i
3430 dc1e 83 00 01            subd #1
3431 dc21 7e db f5            jmp cc138
3432                         cc139:  
3433 dc24 cc 70 35            ldd  #buffer
3434 dc27 34 06               pshs d
3435 dc29 fc 70 00            ldd  i
3436 dc2c e3 e1               addd ,s++
3437 dc2e 34 06               pshs d
3438 dc30 cc 00 00            ldd  #0
3439 dc33 e7 f1               stb  [,s++]
3440 dc35 7e dc 15            jmp cc136
3441                         cc137:  
3442 dc38 39                  rts
3443                         
3444                         * .global key_cal
3445                         key_cal: 
3446 dc39 cc 00 04            ldd  #4
3447 dc3c f7 70 24            stb  state
3448 dc3f bd db ef            jsr clear_bu
3449 dc42 cc 70 35            ldd  #buffer
3450 dc45 34 06               pshs d
3451 dc47 cc 00 02            ldd  #2
3452 dc4a e3 e1               addd ,s++
3453 dc4c 34 06               pshs d
3454 dc4e cc 00 bd            ldd  #189
3455 dc51 e7 f1               stb  [,s++]
3456 dc53 cc 00 00            ldd  #0
3457 dc56 fd 70 1c            std  start
3458 dc59 cc 00 00            ldd  #0
3459 dc5c fd 70 20            std  desti
3460 dc5f cc 00 00            ldd  #0
3461 dc62 f7 70 0b            stb  hit
3462 dc65 39                  rts
3463                         
3464                         * .global enter_nu
3465                         enter_nu: 
3466 dc66 f6 70 0b            ldb  hit
3467 dc69 1d                  sex
3468 dc6a 34 06               pshs d
3469 dc6c cc 00 00            ldd  #0
3470 dc6f 10 a3 e1            cmpd ,s++
3471 dc72 27 05               beq  *+7
3472 dc74 cc 00 00            ldd  #0
3473 dc77 20 03               bra  *+5
3474 dc79 cc 00 01            ldd  #1
3475 dc7c 10 83 00 00         cmpd #0
3476 dc80 10 27 00 06         lbeq cc140
3477 dc84 cc 00 00            ldd  #0
3478 dc87 fd 70 1a            std  num
3479                         cc140:  
3480 dc8a cc 00 01            ldd  #1
3481 dc8d f7 70 0b            stb  hit
3482 dc90 cc 70 1a            ldd  #num
3483 dc93 34 06               pshs d
3484 dc95 cc 00 04            ldd  #4
3485 dc98 ae f4               ldx  [,s]
3486 dc9a 34 10               pshs x
3487 dc9c 5a                  decb
3488 dc9d 2d 06               blt  *+8
3489 dc9f 68 61               asl  1,s
3490 dca1 69 e4               rol  ,s
3491 dca3 20 f7               bra  *-7
3492 dca5 35 06               puls d
3493 dca7 fd 70 1a            std  num
3494 dcaa cc 70 1a            ldd  #num
3495 dcad 34 06               pshs d
3496 dcaf f6 70 09            ldb  key
3497 dcb2 1d                  sex
3498 dcb3 ae f4               ldx  [,s]
3499 dcb5 34 10               pshs x
3500 dcb7 aa e0               ora  ,s+
3501 dcb9 ea e0               orb  ,s+
3502 dcbb fd 70 1a            std  num
3503 dcbe fc 70 1a            ldd  num
3504 dcc1 34 06               pshs d
3505 dcc3 bd cc 9c            jsr hex4
3506 dcc6 32 62               leas 2,s
3507 dcc8 32 64               leas 4,s
3508 dcca 39                  rts
3509                         
3510                         * .global key_copy
3511                         key_copy: 
3512 dccb cc 00 05            ldd  #5
3513 dcce f7 70 24            stb  state
3514 dcd1 cc 00 00            ldd  #0
3515 dcd4 f7 70 0b            stb  hit
3516 dcd7 bd db ef            jsr clear_bu
3517 dcda cc 70 35            ldd  #buffer
3518 dcdd 34 06               pshs d
3519 dcdf cc 00 02            ldd  #2
3520 dce2 e3 e1               addd ,s++
3521 dce4 34 06               pshs d
3522 dce6 cc 00 bd            ldd  #189
3523 dce9 e7 f1               stb  [,s++]
3524 dceb cc 70 35            ldd  #buffer
3525 dcee 34 06               pshs d
3526 dcf0 cc 00 00            ldd  #0
3527 dcf3 e3 e1               addd ,s++
3528 dcf5 34 06               pshs d
3529 dcf7 cc 00 ae            ldd  #174
3530 dcfa e7 f1               stb  [,s++]
3531 dcfc cc 70 35            ldd  #buffer
3532 dcff 34 06               pshs d
3533 dd01 cc 00 01            ldd  #1
3534 dd04 e3 e1               addd ,s++
3535 dd06 34 06               pshs d
3536 dd08 cc 00 00            ldd  #0
3537 dd0b e7 f1               stb  [,s++]
3538 dd0d 39                  rts
3539                         
3540                         * .global key_exe
3541                         key_exe: 
3542 dd0e f6 70 0d            ldb  flag
3543 dd11 1d                  sex
3544 dd12 34 06               pshs d
3545 dd14 cc 00 00            ldd  #0
3546 dd17 10 a3 e1            cmpd ,s++
3547 dd1a 27 05               beq  *+7
3548 dd1c cc 00 00            ldd  #0
3549 dd1f 20 03               bra  *+5
3550 dd21 cc 00 01            ldd  #1
3551 dd24 10 83 00 00         cmpd #0
3552 dd28 10 27 00 03         lbeq cc141
3553 dd2c bd de 94            jsr beep
3554                         cc141:  
3555 dd2f f6 70 09            ldb  key
3556 dd32 1d                  sex
3557 dd33 34 06               pshs d
3558 dd35 cc 00 0f            ldd  #15
3559 dd38 10 a3 e1            cmpd ,s++
3560 dd3b 2d 05               blt  *+7
3561 dd3d cc 00 00            ldd  #0
3562 dd40 20 03               bra  *+5
3563 dd42 cc 00 01            ldd  #1
3564 dd45 10 83 00 00         cmpd #0
3565 dd49 10 27 00 b5         lbeq cc142
3566 dd4d f6 70 09            ldb  key
3567 dd50 1d                  sex
3568 dd51 7e dd be            jmp cc145
3569                         cc146:  
3570 dd54 bd ce 22            jsr key_addr
3571 dd57 7e dd ff            jmp cc144
3572                         cc147:  
3573 dd5a bd ce 35            jsr key_data
3574 dd5d 7e dd ff            jmp cc144
3575                         cc148:  
3576 dd60 bd ce 48            jsr key_plus
3577 dd63 7e dd ff            jmp cc144
3578                         cc149:  
3579 dd66 bd cf 7b            jsr key_minu
3580 dd69 7e dd ff            jmp cc144
3581                         cc150:  
3582 dd6c bd d0 6d            jsr key_PC
3583 dd6f 7e dd ff            jmp cc144
3584                         cc151:  
3585 dd72 bd d1 45            jsr key_go
3586 dd75 7e dd ff            jmp cc144
3587                         cc152:  
3588 dd78 bd d2 d6            jsr key_reg
3589 dd7b 7e dd ff            jmp cc144
3590                         cc153:  
3591 dd7e bd d9 d7            jsr insert
3592 dd81 7e dd ff            jmp cc144
3593                         cc154:  
3594 dd84 bd da b3            jsr cut_byte
3595 dd87 7e dd ff            jmp cc144
3596                         cc155:  
3597 dd8a f6 70 0d            ldb  flag
3598 dd8d 1d                  sex
3599 dd8e 34 06               pshs d
3600 dd90 cc 00 01            ldd  #1
3601 dd93 a8 e0               eora ,s+
3602 dd95 e8 e0               eorb ,s+
3603 dd97 f7 70 0d            stb  flag
3604 dd9a 7e dd ff            jmp cc144
3605                         cc156:  
3606 dd9d bd db 6c            jsr key_test
3607 dda0 7e dd ff            jmp cc144
3608                         cc157:  
3609 dda3 bd dc 39            jsr key_cal
3610 dda6 7e dd ff            jmp cc144
3611                         cc158:  
3612 dda9 bd dc cb            jsr key_copy
3613 ddac 7e dd ff            jmp cc144
3614                         cc159:  
3615 ddaf bd e2 33            jsr key_dump
3616 ddb2 7e dd ff            jmp cc144
3617                         cc160:  
3618 ddb5 bd e9 a2            jsr key_load
3619 ddb8 7e dd ff            jmp cc144
3620 ddbb 7e dd ff            jmp cc144
3621                         cc145:  
3622 ddbe bd c0 f9            jsr ccswitch
3623 ddc1 dd 54 00 13         FDB cc146,19
3624 ddc5 dd 5a 00 12         FDB cc147,18
3625 ddc9 dd 60 00 17         FDB cc148,23
3626 ddcd dd 66 00 16         FDB cc149,22
3627 ddd1 dd 6c 00 10         FDB cc150,16
3628 ddd5 dd 72 00 1b         FDB cc151,27
3629 ddd9 dd 78 00 11         FDB cc152,17
3630 dddd dd 7e 00 18         FDB cc153,24
3631 dde1 dd 84 00 19         FDB cc154,25
3632 dde5 dd 8a 00 15         FDB cc155,21
3633 dde9 dd 9d 00 1a         FDB cc156,26
3634 dded dd a3 00 1d         FDB cc157,29
3635 ddf1 dd a9 00 1c         FDB cc158,28
3636 ddf5 dd af 00 1e         FDB cc159,30
3637 ddf9 dd b5 00 1f         FDB cc160,31
3638 ddfd 00 00               FDB 0
3639                         cc144:  
3640 ddff 7e de 57            jmp cc161
3641                         cc142:  
3642 de02 f6 70 24            ldb  state
3643 de05 1d                  sex
3644 de06 7e de 36            jmp cc164
3645                         cc165:  
3646 de09 bd d0 77            jsr hex_addr
3647 de0c 7e de 57            jmp cc163
3648                         cc166:  
3649 de0f bd cf f8            jsr data_hex
3650 de12 7e de 57            jmp cc163
3651                         cc167:  
3652 de15 bd d9 63            jsr reg_disp
3653 de18 7e de 57            jmp cc163
3654                         cc168:  
3655 de1b bd dc 66            jsr enter_nu
3656 de1e 7e de 57            jmp cc163
3657                         cc169:  
3658 de21 bd dc 66            jsr enter_nu
3659 de24 7e de 57            jmp cc163
3660                         cc170:  
3661 de27 bd dc 66            jsr enter_nu
3662 de2a 7e de 57            jmp cc163
3663                         cc171:  
3664 de2d bd dc 66            jsr enter_nu
3665 de30 7e de 57            jmp cc163
3666 de33 7e de 57            jmp cc163
3667                         cc164:  
3668 de36 bd c0 f9            jsr ccswitch
3669 de39 de 09 00 01         FDB cc165,1
3670 de3d de 0f 00 02         FDB cc166,2
3671 de41 de 15 00 03         FDB cc167,3
3672 de45 de 1b 00 04         FDB cc168,4
3673 de49 de 21 00 05         FDB cc169,5
3674 de4d de 27 00 06         FDB cc170,6
3675 de51 de 2d 00 07         FDB cc171,7
3676 de55 00 00               FDB 0
3677                         cc163:  
3678                         cc161:  
3679 de57 39                  rts
3680                         
3681                         * .global delay_be
3682                         delay_be: 
3683 de58 cc 00 00            ldd  #0
3684 de5b fd 70 02            std  j
3685                         cc174:  
3686 de5e fc 70 02            ldd  j
3687 de61 34 06               pshs d
3688 de63 cc 00 02            ldd  #2
3689 de66 10 a3 e1            cmpd ,s++
3690 de69 2e 05               bgt  *+7
3691 de6b cc 00 00            ldd  #0
3692 de6e 20 03               bra  *+5
3693 de70 cc 00 01            ldd  #1
3694 de73 10 83 00 00         cmpd #0
3695 de77 10 27 00 18         lbeq cc173
3696 de7b 7e de 8d            jmp cc175
3697                         cc172:  
3698 de7e fc 70 02            ldd  j
3699 de81 c3 00 01            addd #1
3700 de84 fd 70 02            std  j
3701 de87 83 00 01            subd #1
3702 de8a 7e de 5e            jmp cc174
3703                         cc175:  
3704 de8d 7e de 7e            jmp cc172
3705 de90 7e de 7e            jmp cc172
3706                         cc173:  
3707 de93 39                  rts
3708                         
3709                         * .global beep
3710                         beep: 
3711 de94 32 7f               leas -1,s
3712 de96 fc 70 bd            ldd  port2
3713 de99 34 06               pshs d
3714 de9b cc 00 00            ldd  #0
3715 de9e e7 f1               stb  [,s++]
3716 dea0 31 e4               leay 0,s
3717 dea2 1f 20               tfr  y,d
3718 dea4 34 06               pshs d
3719 dea6 cc 00 00            ldd  #0
3720 dea9 e7 f1               stb  [,s++]
3721                         cc178:  
3722 deab 31 e4               leay 0,s
3723 dead 1f 20               tfr  y,d
3724 deaf 34 06               pshs d
3725 deb1 e6 f1               ldb  [,s++]
3726 deb3 1d                  sex
3727 deb4 34 06               pshs d
3728 deb6 cc 00 3c            ldd  #60
3729 deb9 10 a3 e1            cmpd ,s++
3730 debc 2e 05               bgt  *+7
3731 debe cc 00 00            ldd  #0
3732 dec1 20 03               bra  *+5
3733 dec3 cc 00 01            ldd  #1
3734 dec6 10 83 00 00         cmpd #0
3735 deca 10 27 00 38         lbeq cc177
3736 dece 7e de e7            jmp cc179
3737                         cc176:  
3738 ded1 31 e4               leay 0,s
3739 ded3 1f 20               tfr  y,d
3740 ded5 34 06               pshs d
3741 ded7 34 06               pshs d
3742 ded9 e6 f1               ldb  [,s++]
3743 dedb 1d                  sex
3744 dedc c3 00 01            addd #1
3745 dedf e7 f1               stb  [,s++]
3746 dee1 83 00 01            subd #1
3747 dee4 7e de ab            jmp cc178
3748                         cc179:  
3749 dee7 fc 70 bf            ldd  port1
3750 deea 34 06               pshs d
3751 deec cc 00 80            ldd  #128
3752 deef 43                  coma
3753 def0 53                  comb
3754 def1 e7 f1               stb  [,s++]
3755 def3 bd de 58            jsr delay_be
3756 def6 fc 70 bf            ldd  port1
3757 def9 34 06               pshs d
3758 defb cc 00 ff            ldd  #255
3759 defe e7 f1               stb  [,s++]
3760 df00 bd de 58            jsr delay_be
3761 df03 7e de d1            jmp cc176
3762                         cc177:  
3763 df06 32 61               leas 1,s
3764 df08 39                  rts
3765                         
3766                         * .global scan1
3767                         scan1: 
3768                         cc180:  
3769 df09 bd c8 96            jsr scan
3770 df0c 34 06               pshs d
3771 df0e cc 00 01            ldd  #1
3772 df11 43                  coma
3773 df12 53                  comb
3774 df13 c3 00 01            addd #1
3775 df16 10 a3 e1            cmpd ,s++
3776 df19 26 05               bne   *+7
3777 df1b cc 00 00            ldd  #0
3778 df1e 20 03               bra  *+5
3779 df20 cc 00 01            ldd  #1
3780 df23 10 83 00 00         cmpd #0
3781 df27 10 27 00 06         lbeq cc181
3782 df2b 7e df 09            jmp cc180
3783 df2e 7e df 09            jmp cc180
3784                         cc181:  
3785 df31 cc 00 03            ldd  #3
3786 df34 34 06               pshs d
3787 df36 bd c8 53            jsr delay_ms
3788 df39 32 62               leas 2,s
3789                         cc182:  
3790 df3b bd c8 96            jsr scan
3791 df3e 34 06               pshs d
3792 df40 cc 00 01            ldd  #1
3793 df43 43                  coma
3794 df44 53                  comb
3795 df45 c3 00 01            addd #1
3796 df48 10 a3 e1            cmpd ,s++
3797 df4b 27 05               beq  *+7
3798 df4d cc 00 00            ldd  #0
3799 df50 20 03               bra  *+5
3800 df52 cc 00 01            ldd  #1
3801 df55 10 83 00 00         cmpd #0
3802 df59 10 27 00 06         lbeq cc183
3803 df5d 7e df 3b            jmp cc182
3804 df60 7e df 3b            jmp cc182
3805                         cc183:  
3806 df63 cc 00 03            ldd  #3
3807 df66 34 06               pshs d
3808 df68 bd c8 53            jsr delay_ms
3809 df6b 32 62               leas 2,s
3810 df6d bd c8 96            jsr scan
3811 df70 f7 70 09            stb  key
3812 df73 f6 70 09            ldb  key
3813 df76 1d                  sex
3814 df77 34 06               pshs d
3815 df79 bd c3 21            jsr key_code
3816 df7c 32 62               leas 2,s
3817 df7e f7 70 09            stb  key
3818 df81 bd dd 0e            jsr key_exe
3819 df84 39                  rts
3820                         
3821                         * .global initacia
3822                         initacia: 
3823 df85 32 7b               leas -5,s
3824 df87 31 62               leay 2,s
3825 df89 1f 20               tfr  y,d
3826 df8b 34 06               pshs d
3827 df8d cc a0 00            ldd  #-24576
3828 df90 ed f1               std  [,s++]
3829 df92 31 e4               leay 0,s
3830 df94 1f 20               tfr  y,d
3831 df96 34 06               pshs d
3832 df98 cc 00 16            ldd  #22
3833 df9b e7 f1               stb  [,s++]
3834 df9d 31 61               leay 1,s
3835 df9f 1f 20               tfr  y,d
3836 dfa1 34 06               pshs d
3837 dfa3 cc 00 03            ldd  #3
3838 dfa6 e7 f1               stb  [,s++]
3839 dfa8 31 62               leay 2,s
3840 dfaa 1f 20               tfr  y,d
3841 dfac 34 06               pshs d
3842 dfae ec f1               ldd  [,s++]
3843 dfb0 34 06               pshs d
3844 dfb2 31 63               leay 3,s
3845 dfb4 1f 20               tfr  y,d
3846 dfb6 34 06               pshs d
3847 dfb8 e6 f1               ldb  [,s++]
3848 dfba 1d                  sex
3849 dfbb e7 f1               stb  [,s++]
3850 dfbd 31 62               leay 2,s
3851 dfbf 1f 20               tfr  y,d
3852 dfc1 34 06               pshs d
3853 dfc3 ec f1               ldd  [,s++]
3854 dfc5 34 06               pshs d
3855 dfc7 31 62               leay 2,s
3856 dfc9 1f 20               tfr  y,d
3857 dfcb 34 06               pshs d
3858 dfcd e6 f1               ldb  [,s++]
3859 dfcf 1d                  sex
3860 dfd0 e7 f1               stb  [,s++]
3861 dfd2 31 64               leay 4,s
3862 dfd4 1f 20               tfr  y,d
3863 dfd6 34 06               pshs d
3864 dfd8 31 64               leay 4,s
3865 dfda 1f 20               tfr  y,d
3866 dfdc 34 06               pshs d
3867 dfde ec f1               ldd  [,s++]
3868 dfe0 34 06               pshs d
3869 dfe2 cc 00 01            ldd  #1
3870 dfe5 e3 e1               addd ,s++
3871 dfe7 34 06               pshs d
3872 dfe9 e6 f1               ldb  [,s++]
3873 dfeb 1d                  sex
3874 dfec e7 f1               stb  [,s++]
3875 dfee 32 65               leas 5,s
3876 dff0 39                  rts
3877                         
3878                         * .global putchar
3879                         putchar: 
3880 dff1 32 7e               leas -2,s
3881 dff3 31 e4               leay 0,s
3882 dff5 1f 20               tfr  y,d
3883 dff7 34 06               pshs d
3884 dff9 cc a0 00            ldd  #-24576
3885 dffc ed f1               std  [,s++]
3886                         cc184:  
3887 dffe 31 e4               leay 0,s
3888 e000 1f 20               tfr  y,d
3889 e002 34 06               pshs d
3890 e004 ec f1               ldd  [,s++]
3891 e006 34 06               pshs d
3892 e008 e6 f1               ldb  [,s++]
3893 e00a 1d                  sex
3894 e00b 34 06               pshs d
3895 e00d cc 00 02            ldd  #2
3896 e010 a4 e0               anda ,s+
3897 e012 e4 e0               andb ,s+
3898 e014 34 06               pshs d
3899 e016 cc 00 00            ldd  #0
3900 e019 10 a3 e1            cmpd ,s++
3901 e01c 27 05               beq  *+7
3902 e01e cc 00 00            ldd  #0
3903 e021 20 03               bra  *+5
3904 e023 cc 00 01            ldd  #1
3905 e026 10 83 00 00         cmpd #0
3906 e02a 10 27 00 06         lbeq cc185
3907 e02e 7e df fe            jmp cc184
3908 e031 7e df fe            jmp cc184
3909                         cc185:  
3910 e034 31 e4               leay 0,s
3911 e036 1f 20               tfr  y,d
3912 e038 34 06               pshs d
3913 e03a ec f1               ldd  [,s++]
3914 e03c 34 06               pshs d
3915 e03e cc 00 01            ldd  #1
3916 e041 e3 e1               addd ,s++
3917 e043 34 06               pshs d
3918 e045 31 67               leay 7,s
3919 e047 1f 20               tfr  y,d
3920 e049 34 06               pshs d
3921 e04b e6 f1               ldb  [,s++]
3922 e04d 1d                  sex
3923 e04e e7 f1               stb  [,s++]
3924 e050 32 62               leas 2,s
3925 e052 39                  rts
3926                         
3927                         * .global puts
3928                         puts: 
3929                         cc186:  
3930 e053 31 62               leay 2,s
3931 e055 1f 20               tfr  y,d
3932 e057 34 06               pshs d
3933 e059 ec f1               ldd  [,s++]
3934 e05b 34 06               pshs d
3935 e05d e6 f1               ldb  [,s++]
3936 e05f 1d                  sex
3937 e060 10 83 00 00         cmpd #0
3938 e064 10 27 00 29         lbeq cc187
3939 e068 31 62               leay 2,s
3940 e06a 1f 20               tfr  y,d
3941 e06c 34 06               pshs d
3942 e06e ec f1               ldd  [,s++]
3943 e070 34 06               pshs d
3944 e072 e6 f1               ldb  [,s++]
3945 e074 1d                  sex
3946 e075 34 06               pshs d
3947 e077 bd df f1            jsr putchar
3948 e07a 32 62               leas 2,s
3949 e07c 31 62               leay 2,s
3950 e07e 1f 20               tfr  y,d
3951 e080 34 06               pshs d
3952 e082 34 06               pshs d
3953 e084 ec f1               ldd  [,s++]
3954 e086 c3 00 01            addd #1
3955 e089 ed f1               std  [,s++]
3956 e08b 83 00 01            subd #1
3957 e08e 7e e0 53            jmp cc186
3958                         cc187:  
3959 e091 39                  rts
3960                         
3961                         * .global getchar
3962                         getchar: 
3963 e092 32 7d               leas -3,s
3964 e094 31 e4               leay 0,s
3965 e096 1f 20               tfr  y,d
3966 e098 34 06               pshs d
3967 e09a cc a0 00            ldd  #-24576
3968 e09d ed f1               std  [,s++]
3969                         cc188:  
3970 e09f 31 e4               leay 0,s
3971 e0a1 1f 20               tfr  y,d
3972 e0a3 34 06               pshs d
3973 e0a5 ec f1               ldd  [,s++]
3974 e0a7 34 06               pshs d
3975 e0a9 e6 f1               ldb  [,s++]
3976 e0ab 1d                  sex
3977 e0ac 34 06               pshs d
3978 e0ae cc 00 01            ldd  #1
3979 e0b1 a4 e0               anda ,s+
3980 e0b3 e4 e0               andb ,s+
3981 e0b5 34 06               pshs d
3982 e0b7 cc 00 00            ldd  #0
3983 e0ba 10 a3 e1            cmpd ,s++
3984 e0bd 27 05               beq  *+7
3985 e0bf cc 00 00            ldd  #0
3986 e0c2 20 03               bra  *+5
3987 e0c4 cc 00 01            ldd  #1
3988 e0c7 10 83 00 00         cmpd #0
3989 e0cb 10 27 00 06         lbeq cc189
3990 e0cf 7e e0 9f            jmp cc188
3991 e0d2 7e e0 9f            jmp cc188
3992                         cc189:  
3993 e0d5 31 62               leay 2,s
3994 e0d7 1f 20               tfr  y,d
3995 e0d9 34 06               pshs d
3996 e0db 31 62               leay 2,s
3997 e0dd 1f 20               tfr  y,d
3998 e0df 34 06               pshs d
3999 e0e1 ec f1               ldd  [,s++]
4000 e0e3 34 06               pshs d
4001 e0e5 cc 00 01            ldd  #1
4002 e0e8 e3 e1               addd ,s++
4003 e0ea 34 06               pshs d
4004 e0ec e6 f1               ldb  [,s++]
4005 e0ee 1d                  sex
4006 e0ef e7 f1               stb  [,s++]
4007 e0f1 31 62               leay 2,s
4008 e0f3 1f 20               tfr  y,d
4009 e0f5 34 06               pshs d
4010 e0f7 e6 f1               ldb  [,s++]
4011 e0f9 1d                  sex
4012 e0fa 32 63               leas 3,s
4013 e0fc 39                  rts
4014                         
4015                         * .global newline
4016                         newline: 
4017 e0fd cc 00 0a            ldd  #10
4018 e100 34 06               pshs d
4019 e102 bd df f1            jsr putchar
4020 e105 32 62               leas 2,s
4021 e107 cc 00 0d            ldd  #13
4022 e10a 34 06               pshs d
4023 e10c bd df f1            jsr putchar
4024 e10f 32 62               leas 2,s
4025 e111 39                  rts
4026                         
4027                         * .global send_hex
4028                         send_hex: 
4029 e112 31 63               leay 3,s
4030 e114 1f 20               tfr  y,d
4031 e116 34 06               pshs d
4032 e118 e6 f1               ldb  [,s++]
4033 e11a 1d                  sex
4034 e11b 34 06               pshs d
4035 e11d cc 00 04            ldd  #4
4036 e120 5a                  decb
4037 e121 2d 06               blt  *+8
4038 e123 64 e4               lsr  ,s
4039 e125 66 61               ror  1,s
4040 e127 20 f7               bra *-7
4041 e129 35 06               puls d
4042 e12b f7 70 05            stb  k
4043 e12e f6 70 05            ldb  k
4044 e131 1d                  sex
4045 e132 34 06               pshs d
4046 e134 cc 00 0f            ldd  #15
4047 e137 a4 e0               anda ,s+
4048 e139 e4 e0               andb ,s+
4049 e13b f7 70 05            stb  k
4050 e13e f6 70 05            ldb  k
4051 e141 1d                  sex
4052 e142 34 06               pshs d
4053 e144 cc 00 09            ldd  #9
4054 e147 10 a3 e1            cmpd ,s++
4055 e14a 2d 05               blt  *+7
4056 e14c cc 00 00            ldd  #0
4057 e14f 20 03               bra  *+5
4058 e151 cc 00 01            ldd  #1
4059 e154 10 83 00 00         cmpd #0
4060 e158 10 27 00 15         lbeq cc190
4061 e15c f6 70 05            ldb  k
4062 e15f 1d                  sex
4063 e160 34 06               pshs d
4064 e162 cc 00 37            ldd  #55
4065 e165 e3 e1               addd ,s++
4066 e167 34 06               pshs d
4067 e169 bd df f1            jsr putchar
4068 e16c 32 62               leas 2,s
4069 e16e 7e e1 83            jmp cc191
4070                         cc190:  
4071 e171 f6 70 05            ldb  k
4072 e174 1d                  sex
4073 e175 34 06               pshs d
4074 e177 cc 00 30            ldd  #48
4075 e17a e3 e1               addd ,s++
4076 e17c 34 06               pshs d
4077 e17e bd df f1            jsr putchar
4078 e181 32 62               leas 2,s
4079                         cc191:  
4080 e183 31 63               leay 3,s
4081 e185 1f 20               tfr  y,d
4082 e187 34 06               pshs d
4083 e189 e6 f1               ldb  [,s++]
4084 e18b 1d                  sex
4085 e18c 34 06               pshs d
4086 e18e cc 00 0f            ldd  #15
4087 e191 a4 e0               anda ,s+
4088 e193 e4 e0               andb ,s+
4089 e195 f7 70 05            stb  k
4090 e198 f6 70 05            ldb  k
4091 e19b 1d                  sex
4092 e19c 34 06               pshs d
4093 e19e cc 00 09            ldd  #9
4094 e1a1 10 a3 e1            cmpd ,s++
4095 e1a4 2d 05               blt  *+7
4096 e1a6 cc 00 00            ldd  #0
4097 e1a9 20 03               bra  *+5
4098 e1ab cc 00 01            ldd  #1
4099 e1ae 10 83 00 00         cmpd #0
4100 e1b2 10 27 00 15         lbeq cc192
4101 e1b6 f6 70 05            ldb  k
4102 e1b9 1d                  sex
4103 e1ba 34 06               pshs d
4104 e1bc cc 00 37            ldd  #55
4105 e1bf e3 e1               addd ,s++
4106 e1c1 34 06               pshs d
4107 e1c3 bd df f1            jsr putchar
4108 e1c6 32 62               leas 2,s
4109 e1c8 7e e1 dd            jmp cc193
4110                         cc192:  
4111 e1cb f6 70 05            ldb  k
4112 e1ce 1d                  sex
4113 e1cf 34 06               pshs d
4114 e1d1 cc 00 30            ldd  #48
4115 e1d4 e3 e1               addd ,s++
4116 e1d6 34 06               pshs d
4117 e1d8 bd df f1            jsr putchar
4118 e1db 32 62               leas 2,s
4119                         cc193:  
4120 e1dd 39                  rts
4121                         
4122                         * .global send_wor
4123                         send_wor: 
4124 e1de 31 62               leay 2,s
4125 e1e0 1f 20               tfr  y,d
4126 e1e2 34 06               pshs d
4127 e1e4 ec f1               ldd  [,s++]
4128 e1e6 34 06               pshs d
4129 e1e8 cc 00 08            ldd  #8
4130 e1eb 5a                  decb
4131 e1ec 2d 06               blt  *+8
4132 e1ee 64 e4               lsr  ,s
4133 e1f0 66 61               ror  1,s
4134 e1f2 20 f7               bra *-7
4135 e1f4 35 06               puls d
4136 e1f6 fd 70 14            std  temp16
4137 e1f9 fc 70 14            ldd  temp16
4138 e1fc 34 06               pshs d
4139 e1fe cc 00 ff            ldd  #255
4140 e201 a4 e0               anda ,s+
4141 e203 e4 e0               andb ,s+
4142 e205 f7 70 05            stb  k
4143 e208 f6 70 05            ldb  k
4144 e20b 1d                  sex
4145 e20c 34 06               pshs d
4146 e20e bd e1 12            jsr send_hex
4147 e211 32 62               leas 2,s
4148 e213 31 62               leay 2,s
4149 e215 1f 20               tfr  y,d
4150 e217 34 06               pshs d
4151 e219 ec f1               ldd  [,s++]
4152 e21b 34 06               pshs d
4153 e21d cc 00 ff            ldd  #255
4154 e220 a4 e0               anda ,s+
4155 e222 e4 e0               andb ,s+
4156 e224 f7 70 05            stb  k
4157 e227 f6 70 05            ldb  k
4158 e22a 1d                  sex
4159 e22b 34 06               pshs d
4160 e22d bd e1 12            jsr send_hex
4161 e230 32 62               leas 2,s
4162 e232 39                  rts
4163                         
4164                         * .global key_dump
4165                         key_dump: 
4166 e233 32 7c               leas -4,s
4167 e235 fc 70 16            ldd  PC
4168 e238 fd 70 c3            std  dptr
4169 e23b 31 62               leay 2,s
4170 e23d 1f 20               tfr  y,d
4171 e23f 34 06               pshs d
4172 e241 cc 00 00            ldd  #0
4173 e244 ed f1               std  [,s++]
4174                         cc196:  
4175 e246 31 62               leay 2,s
4176 e248 1f 20               tfr  y,d
4177 e24a 34 06               pshs d
4178 e24c ec f1               ldd  [,s++]
4179 e24e 34 06               pshs d
4180 e250 cc 00 10            ldd  #16
4181 e253 10 a3 e1            cmpd ,s++
4182 e256 2e 05               bgt  *+7
4183 e258 cc 00 00            ldd  #0
4184 e25b 20 03               bra  *+5
4185 e25d cc 00 01            ldd  #1
4186 e260 10 83 00 00         cmpd #0
4187 e264 10 27 01 7a         lbeq cc195
4188 e268 7e e2 80            jmp cc197
4189                         cc194:  
4190 e26b 31 62               leay 2,s
4191 e26d 1f 20               tfr  y,d
4192 e26f 34 06               pshs d
4193 e271 34 06               pshs d
4194 e273 ec f1               ldd  [,s++]
4195 e275 c3 00 01            addd #1
4196 e278 ed f1               std  [,s++]
4197 e27a 83 00 01            subd #1
4198 e27d 7e e2 46            jmp cc196
4199                         cc197:  
4200 e280 bd e0 fd            jsr newline
4201 e283 fc 70 c3            ldd  dptr
4202 e286 34 06               pshs d
4203 e288 bd e1 de            jsr send_wor
4204 e28b 32 62               leas 2,s
4205 e28d cc 00 3a            ldd  #58
4206 e290 34 06               pshs d
4207 e292 bd df f1            jsr putchar
4208 e295 32 62               leas 2,s
4209 e297 31 e4               leay 0,s
4210 e299 1f 20               tfr  y,d
4211 e29b 34 06               pshs d
4212 e29d cc 00 00            ldd  #0
4213 e2a0 ed f1               std  [,s++]
4214                         cc200:  
4215 e2a2 31 e4               leay 0,s
4216 e2a4 1f 20               tfr  y,d
4217 e2a6 34 06               pshs d
4218 e2a8 ec f1               ldd  [,s++]
4219 e2aa 34 06               pshs d
4220 e2ac cc 00 10            ldd  #16
4221 e2af 10 a3 e1            cmpd ,s++
4222 e2b2 2e 05               bgt  *+7
4223 e2b4 cc 00 00            ldd  #0
4224 e2b7 20 03               bra  *+5
4225 e2b9 cc 00 01            ldd  #1
4226 e2bc 10 83 00 00         cmpd #0
4227 e2c0 10 27 00 40         lbeq cc199
4228 e2c4 7e e2 dc            jmp cc201
4229                         cc198:  
4230 e2c7 31 e4               leay 0,s
4231 e2c9 1f 20               tfr  y,d
4232 e2cb 34 06               pshs d
4233 e2cd 34 06               pshs d
4234 e2cf ec f1               ldd  [,s++]
4235 e2d1 c3 00 01            addd #1
4236 e2d4 ed f1               std  [,s++]
4237 e2d6 83 00 01            subd #1
4238 e2d9 7e e2 a2            jmp cc200
4239                         cc201:  
4240 e2dc fc 70 c3            ldd  dptr
4241 e2df 34 06               pshs d
4242 e2e1 31 62               leay 2,s
4243 e2e3 1f 20               tfr  y,d
4244 e2e5 34 06               pshs d
4245 e2e7 ec f1               ldd  [,s++]
4246 e2e9 e3 e1               addd ,s++
4247 e2eb 34 06               pshs d
4248 e2ed e6 f1               ldb  [,s++]
4249 e2ef 1d                  sex
4250 e2f0 34 06               pshs d
4251 e2f2 bd e1 12            jsr send_hex
4252 e2f5 32 62               leas 2,s
4253 e2f7 cc 00 20            ldd  #32
4254 e2fa 34 06               pshs d
4255 e2fc bd df f1            jsr putchar
4256 e2ff 32 62               leas 2,s
4257 e301 7e e2 c7            jmp cc198
4258                         cc199:  
4259 e304 cc 00 20            ldd  #32
4260 e307 34 06               pshs d
4261 e309 bd df f1            jsr putchar
4262 e30c 32 62               leas 2,s
4263 e30e 31 e4               leay 0,s
4264 e310 1f 20               tfr  y,d
4265 e312 34 06               pshs d
4266 e314 cc 00 00            ldd  #0
4267 e317 ed f1               std  [,s++]
4268                         cc204:  
4269 e319 31 e4               leay 0,s
4270 e31b 1f 20               tfr  y,d
4271 e31d 34 06               pshs d
4272 e31f ec f1               ldd  [,s++]
4273 e321 34 06               pshs d
4274 e323 cc 00 10            ldd  #16
4275 e326 10 a3 e1            cmpd ,s++
4276 e329 2e 05               bgt  *+7
4277 e32b cc 00 00            ldd  #0
4278 e32e 20 03               bra  *+5
4279 e330 cc 00 01            ldd  #1
4280 e333 10 83 00 00         cmpd #0
4281 e337 10 27 00 91         lbeq cc203
4282 e33b 7e e3 53            jmp cc205
4283                         cc202:  
4284 e33e 31 e4               leay 0,s
4285 e340 1f 20               tfr  y,d
4286 e342 34 06               pshs d
4287 e344 34 06               pshs d
4288 e346 ec f1               ldd  [,s++]
4289 e348 c3 00 01            addd #1
4290 e34b ed f1               std  [,s++]
4291 e34d 83 00 01            subd #1
4292 e350 7e e3 19            jmp cc204
4293                         cc205:  
4294 e353 fc 70 c3            ldd  dptr
4295 e356 34 06               pshs d
4296 e358 31 62               leay 2,s
4297 e35a 1f 20               tfr  y,d
4298 e35c 34 06               pshs d
4299 e35e ec f1               ldd  [,s++]
4300 e360 e3 e1               addd ,s++
4301 e362 34 06               pshs d
4302 e364 e6 f1               ldb  [,s++]
4303 e366 1d                  sex
4304 e367 f7 70 07            stb  q
4305 e36a f6 70 07            ldb  q
4306 e36d 1d                  sex
4307 e36e 34 06               pshs d
4308 e370 cc 00 20            ldd  #32
4309 e373 10 a3 e1            cmpd ,s++
4310 e376 2f 05               ble  *+7
4311 e378 cc 00 00            ldd  #0
4312 e37b 20 03               bra  *+5
4313 e37d cc 00 01            ldd  #1
4314 e380 10 83 00 00         cmpd #0
4315 e384 10 27 00 21         lbeq cc207 ;_  instruction flagged for non optimize
4316 e388 f6 70 07            ldb  q
4317 e38b 1d                  sex
4318 e38c 34 06               pshs d
4319 e38e cc 00 80            ldd  #128
4320 e391 10 a3 e1            cmpd ,s++
4321 e394 2e 05               bgt  *+7
4322 e396 cc 00 00            ldd  #0
4323 e399 20 03               bra  *+5
4324 e39b cc 00 01            ldd  #1
4325 e39e 10 83 00 00         cmpd #0
4326 e3a2 10 27 00 03         lbeq cc207 ;_  instruction flagged for non optimize
4327 e3a6 cc 00 01            ldd  #1
4328                         cc207:  
4329 e3a9 10 83 00 00         cmpd #0
4330 e3ad 10 27 00 0e         lbeq cc206
4331 e3b1 f6 70 07            ldb  q
4332 e3b4 1d                  sex
4333 e3b5 34 06               pshs d
4334 e3b7 bd df f1            jsr putchar
4335 e3ba 32 62               leas 2,s
4336 e3bc 7e e3 c9            jmp cc208
4337                         cc206:  
4338 e3bf cc 00 2e            ldd  #46
4339 e3c2 34 06               pshs d
4340 e3c4 bd df f1            jsr putchar
4341 e3c7 32 62               leas 2,s
4342                         cc208:  
4343 e3c9 7e e3 3e            jmp cc202
4344                         cc203:  
4345 e3cc cc 70 c3            ldd  #dptr
4346 e3cf 34 06               pshs d
4347 e3d1 cc 00 10            ldd  #16
4348 e3d4 ae f4               ldx  [,s]
4349 e3d6 34 10               pshs x
4350 e3d8 e3 e1               addd ,s++
4351 e3da fd 70 c3            std  dptr
4352 e3dd 32 62               leas 2,s
4353 e3df 7e e2 6b            jmp cc194
4354                         cc195:  
4355 e3e2 bd e0 fd            jsr newline
4356 e3e5 fc 70 c3            ldd  dptr
4357 e3e8 fd 70 16            std  PC
4358 e3eb bd ce 22            jsr key_addr
4359 e3ee 32 64               leas 4,s
4360 e3f0 39                  rts
4361                         
4362                         * .global nibble2h
4363                         nibble2h: 
4364 e3f1 32 7f               leas -1,s
4365 e3f3 31 64               leay 4,s
4366 e3f5 1f 20               tfr  y,d
4367 e3f7 34 06               pshs d
4368 e3f9 e6 f1               ldb  [,s++]
4369 e3fb 1d                  sex
4370 e3fc 34 06               pshs d
4371 e3fe cc 00 40            ldd  #64
4372 e401 10 a3 e1            cmpd ,s++
4373 e404 2e 05               bgt  *+7
4374 e406 cc 00 00            ldd  #0
4375 e409 20 03               bra  *+5
4376 e40b cc 00 01            ldd  #1
4377 e40e 10 83 00 00         cmpd #0
4378 e412 10 27 00 19         lbeq cc209
4379 e416 31 64               leay 4,s
4380 e418 1f 20               tfr  y,d
4381 e41a 34 06               pshs d
4382 e41c e6 f1               ldb  [,s++]
4383 e41e 1d                  sex
4384 e41f 34 06               pshs d
4385 e421 cc 00 30            ldd  #48
4386 e424 35 10               puls x
4387 e426 34 06               pshs d
4388 e428 1f 10               tfr  x,d
4389 e42a a3 e1               subd ,s++
4390 e42c 32 61               leas 1,s
4391 e42e 39                  rts
4392                         cc209:  
4393 e42f 31 64               leay 4,s
4394 e431 1f 20               tfr  y,d
4395 e433 34 06               pshs d
4396 e435 e6 f1               ldb  [,s++]
4397 e437 1d                  sex
4398 e438 34 06               pshs d
4399 e43a cc 00 37            ldd  #55
4400 e43d 35 10               puls x
4401 e43f 34 06               pshs d
4402 e441 1f 10               tfr  x,d
4403 e443 a3 e1               subd ,s++
4404 e445 32 61               leas 1,s
4405 e447 39                  rts
4406                         cc210:  
4407 e448 32 61               leas 1,s
4408 e44a 39                  rts
4409                         
4410                         * .global gethex
4411                         gethex: 
4412 e44b 32 7e               leas -2,s
4413 e44d 31 61               leay 1,s
4414 e44f 1f 20               tfr  y,d
4415 e451 34 06               pshs d
4416 e453 bd e0 92            jsr getchar
4417 e456 e7 f1               stb  [,s++]
4418 e458 31 e4               leay 0,s
4419 e45a 1f 20               tfr  y,d
4420 e45c 34 06               pshs d
4421 e45e bd e0 92            jsr getchar
4422 e461 e7 f1               stb  [,s++]
4423 e463 31 61               leay 1,s
4424 e465 1f 20               tfr  y,d
4425 e467 34 06               pshs d
4426 e469 31 63               leay 3,s
4427 e46b 1f 20               tfr  y,d
4428 e46d 34 06               pshs d
4429 e46f e6 f1               ldb  [,s++]
4430 e471 1d                  sex
4431 e472 34 06               pshs d
4432 e474 bd e3 f1            jsr nibble2h
4433 e477 32 62               leas 2,s
4434 e479 34 06               pshs d
4435 e47b cc 00 04            ldd  #4
4436 e47e 5a                  decb
4437 e47f 2d 06               blt  *+8
4438 e481 68 61               asl  1,s
4439 e483 69 e4               rol  ,s
4440 e485 20 f7               bra  *-7
4441 e487 35 06               puls d
4442 e489 e7 f1               stb  [,s++]
4443 e48b 31 e4               leay 0,s
4444 e48d 1f 20               tfr  y,d
4445 e48f 34 06               pshs d
4446 e491 31 62               leay 2,s
4447 e493 1f 20               tfr  y,d
4448 e495 34 06               pshs d
4449 e497 e6 f1               ldb  [,s++]
4450 e499 1d                  sex
4451 e49a 34 06               pshs d
4452 e49c bd e3 f1            jsr nibble2h
4453 e49f 32 62               leas 2,s
4454 e4a1 e7 f1               stb  [,s++]
4455 e4a3 31 61               leay 1,s
4456 e4a5 1f 20               tfr  y,d
4457 e4a7 34 06               pshs d
4458 e4a9 31 63               leay 3,s
4459 e4ab 1f 20               tfr  y,d
4460 e4ad 34 06               pshs d
4461 e4af e6 f1               ldb  [,s++]
4462 e4b1 1d                  sex
4463 e4b2 34 06               pshs d
4464 e4b4 31 64               leay 4,s
4465 e4b6 1f 20               tfr  y,d
4466 e4b8 34 06               pshs d
4467 e4ba e6 f1               ldb  [,s++]
4468 e4bc 1d                  sex
4469 e4bd aa e0               ora  ,s+
4470 e4bf ea e0               orb  ,s+
4471 e4c1 e7 f1               stb  [,s++]
4472 e4c3 f6 70 0f            ldb  bcc
4473 e4c6 1d                  sex
4474 e4c7 34 06               pshs d
4475 e4c9 31 63               leay 3,s
4476 e4cb 1f 20               tfr  y,d
4477 e4cd 34 06               pshs d
4478 e4cf e6 f1               ldb  [,s++]
4479 e4d1 1d                  sex
4480 e4d2 e3 e1               addd ,s++
4481 e4d4 f7 70 0f            stb  bcc
4482 e4d7 31 61               leay 1,s
4483 e4d9 1f 20               tfr  y,d
4484 e4db 34 06               pshs d
4485 e4dd e6 f1               ldb  [,s++]
4486 e4df 1d                  sex
4487 e4e0 32 62               leas 2,s
4488 e4e2 39                  rts
4489                         
4490                         * .global get16bit
4491                         get16bit: 
4492 e4e3 32 7e               leas -2,s
4493 e4e5 31 e4               leay 0,s
4494 e4e7 1f 20               tfr  y,d
4495 e4e9 34 06               pshs d
4496 e4eb cc 00 00            ldd  #0
4497 e4ee ed f1               std  [,s++]
4498 e4f0 31 e4               leay 0,s
4499 e4f2 1f 20               tfr  y,d
4500 e4f4 34 06               pshs d
4501 e4f6 bd e4 4b            jsr gethex
4502 e4f9 ae f4               ldx  [,s]
4503 e4fb 34 10               pshs x
4504 e4fd aa e0               ora  ,s+
4505 e4ff ea e0               orb  ,s+
4506 e501 ed f1               std  [,s++]
4507 e503 31 e4               leay 0,s
4508 e505 1f 20               tfr  y,d
4509 e507 34 06               pshs d
4510 e509 cc 00 08            ldd  #8
4511 e50c ae f4               ldx  [,s]
4512 e50e 34 10               pshs x
4513 e510 5a                  decb
4514 e511 2d 06               blt  *+8
4515 e513 68 61               asl  1,s
4516 e515 69 e4               rol  ,s
4517 e517 20 f7               bra  *-7
4518 e519 35 06               puls d
4519 e51b ed f1               std  [,s++]
4520 e51d 31 e4               leay 0,s
4521 e51f 1f 20               tfr  y,d
4522 e521 34 06               pshs d
4523 e523 bd e4 4b            jsr gethex
4524 e526 ae f4               ldx  [,s]
4525 e528 34 10               pshs x
4526 e52a aa e0               ora  ,s+
4527 e52c ea e0               orb  ,s+
4528 e52e ed f1               std  [,s++]
4529 e530 31 e4               leay 0,s
4530 e532 1f 20               tfr  y,d
4531 e534 34 06               pshs d
4532 e536 ec f1               ldd  [,s++]
4533 e538 32 62               leas 2,s
4534 e53a 39                  rts
4535                         
4536                         * .global read_rec
4537                         read_rec: 
4538 e53b 32 7c               leas -4,s
4539 e53d cc 00 00            ldd  #0
4540 e540 f7 70 0f            stb  bcc
4541 e543 31 62               leay 2,s
4542 e545 1f 20               tfr  y,d
4543 e547 34 06               pshs d
4544 e549 bd e4 4b            jsr gethex
4545 e54c 34 06               pshs d
4546 e54e cc 00 03            ldd  #3
4547 e551 35 10               puls x
4548 e553 34 06               pshs d
4549 e555 1f 10               tfr  x,d
4550 e557 a3 e1               subd ,s++
4551 e559 e7 f1               stb  [,s++]
4552 e55b 31 e4               leay 0,s
4553 e55d 1f 20               tfr  y,d
4554 e55f 34 06               pshs d
4555 e561 bd e4 e3            jsr get16bit
4556 e564 ed f1               std  [,s++]
4557 e566 31 e4               leay 0,s
4558 e568 1f 20               tfr  y,d
4559 e56a 34 06               pshs d
4560 e56c ec f1               ldd  [,s++]
4561 e56e fd 70 c3            std  dptr
4562 e571 31 63               leay 3,s
4563 e573 1f 20               tfr  y,d
4564 e575 34 06               pshs d
4565 e577 cc 00 00            ldd  #0
4566 e57a e7 f1               stb  [,s++]
4567                         cc213:  
4568 e57c 31 63               leay 3,s
4569 e57e 1f 20               tfr  y,d
4570 e580 34 06               pshs d
4571 e582 e6 f1               ldb  [,s++]
4572 e584 1d                  sex
4573 e585 34 06               pshs d
4574 e587 31 64               leay 4,s
4575 e589 1f 20               tfr  y,d
4576 e58b 34 06               pshs d
4577 e58d e6 f1               ldb  [,s++]
4578 e58f 1d                  sex
4579 e590 10 a3 e1            cmpd ,s++
4580 e593 2e 05               bgt  *+7
4581 e595 cc 00 00            ldd  #0
4582 e598 20 03               bra  *+5
4583 e59a cc 00 01            ldd  #1
4584 e59d 10 83 00 00         cmpd #0
4585 e5a1 10 27 00 33         lbeq cc212
4586 e5a5 7e e5 be            jmp cc214
4587                         cc211:  
4588 e5a8 31 63               leay 3,s
4589 e5aa 1f 20               tfr  y,d
4590 e5ac 34 06               pshs d
4591 e5ae 34 06               pshs d
4592 e5b0 e6 f1               ldb  [,s++]
4593 e5b2 1d                  sex
4594 e5b3 c3 00 01            addd #1
4595 e5b6 e7 f1               stb  [,s++]
4596 e5b8 83 00 01            subd #1
4597 e5bb 7e e5 7c            jmp cc213
4598                         cc214:  
4599 e5be fc 70 c3            ldd  dptr
4600 e5c1 34 06               pshs d
4601 e5c3 31 65               leay 5,s
4602 e5c5 1f 20               tfr  y,d
4603 e5c7 34 06               pshs d
4604 e5c9 e6 f1               ldb  [,s++]
4605 e5cb 1d                  sex
4606 e5cc e3 e1               addd ,s++
4607 e5ce 34 06               pshs d
4608 e5d0 bd e4 4b            jsr gethex
4609 e5d3 e7 f1               stb  [,s++]
4610 e5d5 7e e5 a8            jmp cc211
4611                         cc212:  
4612 e5d8 f6 70 0f            ldb  bcc
4613 e5db 1d                  sex
4614 e5dc 43                  coma
4615 e5dd 53                  comb
4616 e5de f7 70 0f            stb  bcc
4617 e5e1 fc 70 bb            ldd  gpio1
4618 e5e4 34 06               pshs d
4619 e5e6 f6 70 0f            ldb  bcc
4620 e5e9 1d                  sex
4621 e5ea e7 f1               stb  [,s++]
4622 e5ec f6 70 0f            ldb  bcc
4623 e5ef 1d                  sex
4624 e5f0 f7 70 10            stb  save_bcc
4625 e5f3 f6 70 10            ldb  save_bcc
4626 e5f6 1d                  sex
4627 e5f7 34 06               pshs d
4628 e5f9 bd e4 4b            jsr gethex
4629 e5fc 10 a3 e1            cmpd ,s++
4630 e5ff 26 05               bne   *+7
4631 e601 cc 00 00            ldd  #0
4632 e604 20 03               bra  *+5
4633 e606 cc 00 01            ldd  #1
4634 e609 10 83 00 00         cmpd #0
4635 e60d 10 27 00 06         lbeq cc215
4636 e611 cc 00 01            ldd  #1
4637 e614 f7 70 11            stb  bcc_erro
4638                         cc215:  
4639 e617 32 64               leas 4,s
4640 e619 39                  rts
4641                         
4642                         * .global gethex2
4643                         gethex2: 
4644 e61a 32 7e               leas -2,s
4645 e61c 31 61               leay 1,s
4646 e61e 1f 20               tfr  y,d
4647 e620 34 06               pshs d
4648 e622 cc 70 3b            ldd  #sbuffer
4649 e625 34 06               pshs d
4650 e627 31 69               leay 9,s
4651 e629 1f 20               tfr  y,d
4652 e62b 34 06               pshs d
4653 e62d e6 f1               ldb  [,s++]
4654 e62f 1d                  sex
4655 e630 e3 e1               addd ,s++
4656 e632 34 06               pshs d
4657 e634 e6 f1               ldb  [,s++]
4658 e636 1d                  sex
4659 e637 e7 f1               stb  [,s++]
4660 e639 31 e4               leay 0,s
4661 e63b 1f 20               tfr  y,d
4662 e63d 34 06               pshs d
4663 e63f cc 70 3b            ldd  #sbuffer
4664 e642 34 06               pshs d
4665 e644 31 69               leay 9,s
4666 e646 1f 20               tfr  y,d
4667 e648 34 06               pshs d
4668 e64a e6 f1               ldb  [,s++]
4669 e64c 1d                  sex
4670 e64d e3 e1               addd ,s++
4671 e64f 34 06               pshs d
4672 e651 cc 00 01            ldd  #1
4673 e654 e3 e1               addd ,s++
4674 e656 34 06               pshs d
4675 e658 e6 f1               ldb  [,s++]
4676 e65a 1d                  sex
4677 e65b e7 f1               stb  [,s++]
4678 e65d 31 61               leay 1,s
4679 e65f 1f 20               tfr  y,d
4680 e661 34 06               pshs d
4681 e663 31 63               leay 3,s
4682 e665 1f 20               tfr  y,d
4683 e667 34 06               pshs d
4684 e669 e6 f1               ldb  [,s++]
4685 e66b 1d                  sex
4686 e66c 34 06               pshs d
4687 e66e bd e3 f1            jsr nibble2h
4688 e671 32 62               leas 2,s
4689 e673 34 06               pshs d
4690 e675 cc 00 04            ldd  #4
4691 e678 5a                  decb
4692 e679 2d 06               blt  *+8
4693 e67b 68 61               asl  1,s
4694 e67d 69 e4               rol  ,s
4695 e67f 20 f7               bra  *-7
4696 e681 35 06               puls d
4697 e683 e7 f1               stb  [,s++]
4698 e685 31 e4               leay 0,s
4699 e687 1f 20               tfr  y,d
4700 e689 34 06               pshs d
4701 e68b 31 62               leay 2,s
4702 e68d 1f 20               tfr  y,d
4703 e68f 34 06               pshs d
4704 e691 e6 f1               ldb  [,s++]
4705 e693 1d                  sex
4706 e694 34 06               pshs d
4707 e696 bd e3 f1            jsr nibble2h
4708 e699 32 62               leas 2,s
4709 e69b e7 f1               stb  [,s++]
4710 e69d 31 61               leay 1,s
4711 e69f 1f 20               tfr  y,d
4712 e6a1 34 06               pshs d
4713 e6a3 31 63               leay 3,s
4714 e6a5 1f 20               tfr  y,d
4715 e6a7 34 06               pshs d
4716 e6a9 e6 f1               ldb  [,s++]
4717 e6ab 1d                  sex
4718 e6ac 34 06               pshs d
4719 e6ae 31 64               leay 4,s
4720 e6b0 1f 20               tfr  y,d
4721 e6b2 34 06               pshs d
4722 e6b4 e6 f1               ldb  [,s++]
4723 e6b6 1d                  sex
4724 e6b7 aa e0               ora  ,s+
4725 e6b9 ea e0               orb  ,s+
4726 e6bb e7 f1               stb  [,s++]
4727 e6bd f6 70 0f            ldb  bcc
4728 e6c0 1d                  sex
4729 e6c1 34 06               pshs d
4730 e6c3 31 63               leay 3,s
4731 e6c5 1f 20               tfr  y,d
4732 e6c7 34 06               pshs d
4733 e6c9 e6 f1               ldb  [,s++]
4734 e6cb 1d                  sex
4735 e6cc e3 e1               addd ,s++
4736 e6ce f7 70 0f            stb  bcc
4737 e6d1 31 61               leay 1,s
4738 e6d3 1f 20               tfr  y,d
4739 e6d5 34 06               pshs d
4740 e6d7 e6 f1               ldb  [,s++]
4741 e6d9 1d                  sex
4742 e6da 32 62               leas 2,s
4743 e6dc 39                  rts
4744                         
4745                         * .global get_load
4746                         get_load: 
4747 e6dd 32 7e               leas -2,s
4748 e6df 31 e4               leay 0,s
4749 e6e1 1f 20               tfr  y,d
4750 e6e3 34 06               pshs d
4751 e6e5 cc 00 00            ldd  #0
4752 e6e8 ed f1               std  [,s++]
4753 e6ea 31 e4               leay 0,s
4754 e6ec 1f 20               tfr  y,d
4755 e6ee 34 06               pshs d
4756 e6f0 cc 00 02            ldd  #2
4757 e6f3 34 06               pshs d
4758 e6f5 bd e6 1a            jsr gethex2
4759 e6f8 32 62               leas 2,s
4760 e6fa ae f4               ldx  [,s]
4761 e6fc 34 10               pshs x
4762 e6fe aa e0               ora  ,s+
4763 e700 ea e0               orb  ,s+
4764 e702 ed f1               std  [,s++]
4765 e704 31 e4               leay 0,s
4766 e706 1f 20               tfr  y,d
4767 e708 34 06               pshs d
4768 e70a cc 00 08            ldd  #8
4769 e70d ae f4               ldx  [,s]
4770 e70f 34 10               pshs x
4771 e711 5a                  decb
4772 e712 2d 06               blt  *+8
4773 e714 68 61               asl  1,s
4774 e716 69 e4               rol  ,s
4775 e718 20 f7               bra  *-7
4776 e71a 35 06               puls d
4777 e71c ed f1               std  [,s++]
4778 e71e 31 e4               leay 0,s
4779 e720 1f 20               tfr  y,d
4780 e722 34 06               pshs d
4781 e724 cc 00 04            ldd  #4
4782 e727 34 06               pshs d
4783 e729 bd e6 1a            jsr gethex2
4784 e72c 32 62               leas 2,s
4785 e72e ae f4               ldx  [,s]
4786 e730 34 10               pshs x
4787 e732 aa e0               ora  ,s+
4788 e734 ea e0               orb  ,s+
4789 e736 ed f1               std  [,s++]
4790 e738 31 e4               leay 0,s
4791 e73a 1f 20               tfr  y,d
4792 e73c 34 06               pshs d
4793 e73e ec f1               ldd  [,s++]
4794 e740 32 62               leas 2,s
4795 e742 39                  rts
4796                         
4797                         * .global get_reco
4798                         get_reco: 
4799 e743 32 7b               leas -5,s
4800 e745 cc 00 00            ldd  #0
4801 e748 f7 70 0f            stb  bcc
4802 e74b cc 00 00            ldd  #0
4803 e74e fd 70 00            std  i
4804                         cc218:  
4805 e751 31 63               leay 3,s
4806 e753 1f 20               tfr  y,d
4807 e755 34 06               pshs d
4808 e757 bd e0 92            jsr getchar
4809 e75a e7 f1               stb  [,s++]
4810 e75c cc 70 3b            ldd  #sbuffer
4811 e75f 34 06               pshs d
4812 e761 fc 70 00            ldd  i
4813 e764 e3 e1               addd ,s++
4814 e766 34 06               pshs d
4815 e768 31 65               leay 5,s
4816 e76a 1f 20               tfr  y,d
4817 e76c 34 06               pshs d
4818 e76e e6 f1               ldb  [,s++]
4819 e770 1d                  sex
4820 e771 e7 f1               stb  [,s++]
4821 e773 fc 70 00            ldd  i
4822 e776 c3 00 01            addd #1
4823 e779 fd 70 00            std  i
4824 e77c 83 00 01            subd #1
4825                         cc216:  
4826 e77f 31 63               leay 3,s
4827 e781 1f 20               tfr  y,d
4828 e783 34 06               pshs d
4829 e785 e6 f1               ldb  [,s++]
4830 e787 1d                  sex
4831 e788 34 06               pshs d
4832 e78a cc 00 0d            ldd  #13
4833 e78d 10 a3 e1            cmpd ,s++
4834 e790 26 05               bne   *+7
4835 e792 cc 00 00            ldd  #0
4836 e795 20 03               bra  *+5
4837 e797 cc 00 01            ldd  #1
4838 e79a 10 83 00 00         cmpd #0
4839 e79e 10 27 00 03         lbeq cc217
4840 e7a2 7e e7 51            jmp cc218
4841                         cc217:  
4842 e7a5 cc 70 3b            ldd  #sbuffer
4843 e7a8 34 06               pshs d
4844 e7aa fc 70 00            ldd  i
4845 e7ad e3 e1               addd ,s++
4846 e7af 34 06               pshs d
4847 e7b1 cc 00 00            ldd  #0
4848 e7b4 e7 f1               stb  [,s++]
4849 e7b6 31 62               leay 2,s
4850 e7b8 1f 20               tfr  y,d
4851 e7ba 34 06               pshs d
4852 e7bc cc 00 00            ldd  #0
4853 e7bf 34 06               pshs d
4854 e7c1 bd e6 1a            jsr gethex2
4855 e7c4 32 62               leas 2,s
4856 e7c6 34 06               pshs d
4857 e7c8 cc 00 03            ldd  #3
4858 e7cb 35 10               puls x
4859 e7cd 34 06               pshs d
4860 e7cf 1f 10               tfr  x,d
4861 e7d1 a3 e1               subd ,s++
4862 e7d3 e7 f1               stb  [,s++]
4863 e7d5 31 e4               leay 0,s
4864 e7d7 1f 20               tfr  y,d
4865 e7d9 34 06               pshs d
4866 e7db bd e6 dd            jsr get_load
4867 e7de ed f1               std  [,s++]
4868 e7e0 31 e4               leay 0,s
4869 e7e2 1f 20               tfr  y,d
4870 e7e4 34 06               pshs d
4871 e7e6 ec f1               ldd  [,s++]
4872 e7e8 fd 70 c3            std  dptr
4873 e7eb 31 64               leay 4,s
4874 e7ed 1f 20               tfr  y,d
4875 e7ef 34 06               pshs d
4876 e7f1 cc 00 00            ldd  #0
4877 e7f4 e7 f1               stb  [,s++]
4878                         cc221:  
4879 e7f6 31 64               leay 4,s
4880 e7f8 1f 20               tfr  y,d
4881 e7fa 34 06               pshs d
4882 e7fc e6 f1               ldb  [,s++]
4883 e7fe 1d                  sex
4884 e7ff 34 06               pshs d
4885 e801 31 64               leay 4,s
4886 e803 1f 20               tfr  y,d
4887 e805 34 06               pshs d
4888 e807 e6 f1               ldb  [,s++]
4889 e809 1d                  sex
4890 e80a 10 a3 e1            cmpd ,s++
4891 e80d 2e 05               bgt  *+7
4892 e80f cc 00 00            ldd  #0
4893 e812 20 03               bra  *+5
4894 e814 cc 00 01            ldd  #1
4895 e817 10 83 00 00         cmpd #0
4896 e81b 10 27 00 51         lbeq cc220
4897 e81f 7e e8 38            jmp cc222
4898                         cc219:  
4899 e822 31 64               leay 4,s
4900 e824 1f 20               tfr  y,d
4901 e826 34 06               pshs d
4902 e828 34 06               pshs d
4903 e82a e6 f1               ldb  [,s++]
4904 e82c 1d                  sex
4905 e82d c3 00 01            addd #1
4906 e830 e7 f1               stb  [,s++]
4907 e832 83 00 01            subd #1
4908 e835 7e e7 f6            jmp cc221
4909                         cc222:  
4910 e838 fc 70 c3            ldd  dptr
4911 e83b 34 06               pshs d
4912 e83d 31 66               leay 6,s
4913 e83f 1f 20               tfr  y,d
4914 e841 34 06               pshs d
4915 e843 e6 f1               ldb  [,s++]
4916 e845 1d                  sex
4917 e846 e3 e1               addd ,s++
4918 e848 34 06               pshs d
4919 e84a 31 66               leay 6,s
4920 e84c 1f 20               tfr  y,d
4921 e84e 34 06               pshs d
4922 e850 e6 f1               ldb  [,s++]
4923 e852 1d                  sex
4924 e853 34 06               pshs d
4925 e855 cc 00 02            ldd  #2
4926 e858 35 10               puls x
4927 e85a bd c0 b4            jsr ccmult
4928 e85d 34 06               pshs d
4929 e85f cc 00 06            ldd  #6
4930 e862 e3 e1               addd ,s++
4931 e864 34 06               pshs d
4932 e866 bd e6 1a            jsr gethex2
4933 e869 32 62               leas 2,s
4934 e86b e7 f1               stb  [,s++]
4935 e86d 7e e8 22            jmp cc219
4936                         cc220:  
4937 e870 f6 70 0f            ldb  bcc
4938 e873 1d                  sex
4939 e874 43                  coma
4940 e875 53                  comb
4941 e876 f7 70 0f            stb  bcc
4942 e879 fc 70 bb            ldd  gpio1
4943 e87c 34 06               pshs d
4944 e87e f6 70 0f            ldb  bcc
4945 e881 1d                  sex
4946 e882 e7 f1               stb  [,s++]
4947 e884 f6 70 0f            ldb  bcc
4948 e887 1d                  sex
4949 e888 f7 70 10            stb  save_bcc
4950 e88b f6 70 10            ldb  save_bcc
4951 e88e 1d                  sex
4952 e88f 34 06               pshs d
4953 e891 31 66               leay 6,s
4954 e893 1f 20               tfr  y,d
4955 e895 34 06               pshs d
4956 e897 e6 f1               ldb  [,s++]
4957 e899 1d                  sex
4958 e89a 34 06               pshs d
4959 e89c cc 00 02            ldd  #2
4960 e89f 35 10               puls x
4961 e8a1 bd c0 b4            jsr ccmult
4962 e8a4 34 06               pshs d
4963 e8a6 cc 00 06            ldd  #6
4964 e8a9 e3 e1               addd ,s++
4965 e8ab 34 06               pshs d
4966 e8ad bd e6 1a            jsr gethex2
4967 e8b0 32 62               leas 2,s
4968 e8b2 10 a3 e1            cmpd ,s++
4969 e8b5 26 05               bne   *+7
4970 e8b7 cc 00 00            ldd  #0
4971 e8ba 20 03               bra  *+5
4972 e8bc cc 00 01            ldd  #1
4973 e8bf 10 83 00 00         cmpd #0
4974 e8c3 10 27 00 06         lbeq cc223
4975 e8c7 cc 00 01            ldd  #1
4976 e8ca f7 70 11            stb  bcc_erro
4977                         cc223:  
4978 e8cd 32 65               leas 5,s
4979 e8cf 39                  rts
4980                         
4981                         * .global get_s_re
4982                         get_s_re: 
4983 e8d0 cc 00 00            ldd  #0
4984 e8d3 fd 70 1e            std  end
4985 e8d6 cc 00 00            ldd  #0
4986 e8d9 f7 70 11            stb  bcc_erro
4987                         cc224:  
4988 e8dc fc 70 1e            ldd  end
4989 e8df 34 06               pshs d
4990 e8e1 cc 00 00            ldd  #0
4991 e8e4 10 a3 e1            cmpd ,s++
4992 e8e7 27 05               beq  *+7
4993 e8e9 cc 00 00            ldd  #0
4994 e8ec 20 03               bra  *+5
4995 e8ee cc 00 01            ldd  #1
4996 e8f1 10 83 00 00         cmpd #0
4997 e8f5 10 27 00 62         lbeq cc225
4998                         cc226:  
4999 e8f9 bd e0 92            jsr getchar
5000 e8fc 34 06               pshs d
5001 e8fe cc 00 53            ldd  #83
5002 e901 10 a3 e1            cmpd ,s++
5003 e904 26 05               bne   *+7
5004 e906 cc 00 00            ldd  #0
5005 e909 20 03               bra  *+5
5006 e90b cc 00 01            ldd  #1
5007 e90e 10 83 00 00         cmpd #0
5008 e912 10 27 00 03         lbeq cc227
5009 e916 7e e8 f9            jmp cc226
5010                         cc227:  
5011 e919 bd e0 92            jsr getchar
5012 e91c 7e e9 43            jmp cc230
5013                         cc231:  
5014 e91f cc 00 00            ldd  #0
5015 e922 fd 70 1e            std  end
5016 e925 7e e9 58            jmp cc229
5017                         cc232:  
5018 e928 bd e7 43            jsr get_reco
5019 e92b 7e e9 58            jmp cc229
5020                         cc233:  
5021 e92e cc 00 01            ldd  #1
5022 e931 fd 70 1e            std  end
5023 e934 7e e9 58            jmp cc229
5024                         cc234:  
5025 e937 cc 00 01            ldd  #1
5026 e93a fd 70 1e            std  end
5027 e93d 7e e9 58            jmp cc229
5028 e940 7e e9 58            jmp cc229
5029                         cc230:  
5030 e943 bd c0 f9            jsr ccswitch
5031 e946 e9 1f 00 30         FDB cc231,48
5032 e94a e9 28 00 31         FDB cc232,49
5033 e94e e9 2e 00 38         FDB cc233,56
5034 e952 e9 37 00 39         FDB cc234,57
5035 e956 00 00               FDB 0
5036                         cc229:  
5037 e958 7e e8 dc            jmp cc224
5038                         cc225:  
5039 e95b bd e0 fd            jsr newline
5040 e95e f6 70 11            ldb  bcc_erro
5041 e961 1d                  sex
5042 e962 10 83 00 00         cmpd #0
5043 e966 10 27 00 0d         lbeq cc235
5044 e96a cc e9 85            ldd  #cc1+0
5045 e96d 34 06               pshs d
5046 e96f bd e0 53            jsr puts
5047 e972 32 62               leas 2,s
5048 e974 7e e9 81            jmp cc236
5049                         cc235:  
5050 e977 cc e9 97            ldd  #cc1+18
5051 e97a 34 06               pshs d
5052 e97c bd e0 53            jsr puts
5053 e97f 32 62               leas 2,s
5054                         cc236:  
5055 e981 bd ce 35            jsr key_data
5056 e984 39                  rts
5057                         cc1:  
5058 e985 63 68 65 63 6b 20   FCB 99,104,101,99,107,32,115,117,109,32
     73 75 6d 20
5059 e98f 65 72 72 6f 72 73   FCB 101,114,114,111,114,115,33,0,48,32
     21 00 30 20
5060 e999 65 72 72 6f 72 2e   FCB 101,114,114,111,114,46,46,46,0
     2e 2e 00
5061                         
5062                         * .global key_load
5063                         key_load: 
5064 e9a2 bd e0 fd            jsr newline
5065 e9a5 cc e9 b3            ldd  #cc237+0
5066 e9a8 34 06               pshs d
5067 e9aa bd e0 53            jsr puts
5068 e9ad 32 62               leas 2,s
5069 e9af bd e8 d0            jsr get_s_re
5070 e9b2 39                  rts
5071                         cc237:  
5072 e9b3 4c 6f 61 64 20 4d   FCB 76,111,97,100,32,77,111,116,111,114
     6f 74 6f 72
5073 e9bd 6f 6c 61 20 73 2d   FCB 111,108,97,32,115,45,114,101,99,111
     72 65 63 6f
5074 e9c7 72 64 00            FCB 114,100,0
5075                         
5076                         * .global initreg
5077                         initreg: 
5078 e9ca cc 02 00            ldd  #512
5079 e9cd fd 70 16            std  PC
5080 e9d0 cc 02 00            ldd  #512
5081 e9d3 fd 70 18            std  save_PC
5082 e9d6 cc 7f 00            ldd  #32512
5083 e9d9 fd 70 27            std  USER_U
5084 e9dc 1f a8              	   TFR CC,A
5085 e9de b7 70 31           	   STA USER_P
5086 e9e1 cc 80 00            ldd  #-32768
5087 e9e4 fd 70 bb            std  gpio1
5088 e9e7 cc 80 03            ldd  #-32765
5089 e9ea fd 70 bd            std  port2
5090 e9ed cc 80 02            ldd  #-32766
5091 e9f0 fd 70 bf            std  port1
5092 e9f3 cc 80 01            ldd  #-32767
5093 e9f6 fd 70 c1            std  port0
5094 e9f9 39                  rts
5095                         
5096                         * .global wait1s
5097                         wait1s: 
5098 e9fa 1c ef              		andcc #$ef
5099                         cc239:  
5100 e9fc f6 70 0e            ldb  tick
5101 e9ff 1d                  sex
5102 ea00 34 06               pshs d
5103 ea02 cc 00 64            ldd  #100
5104 ea05 10 a3 e1            cmpd ,s++
5105 ea08 2e 05               bgt  *+7
5106 ea0a cc 00 00            ldd  #0
5107 ea0d 20 03               bra  *+5
5108 ea0f cc 00 01            ldd  #1
5109 ea12 10 83 00 00         cmpd #0
5110 ea16 10 27 00 03         lbeq cc240
5111 ea1a 7e e9 fc            jmp cc239
5112                         cc240:  
5113 ea1d cc 00 00            ldd  #0
5114 ea20 f7 70 0e            stb  tick
5115 ea23 39                  rts
5116                         
5117                         * .global main
5118                         main: 
5119 ea24 bd e9 ca            jsr initreg
5120 ea27 fc 70 bb            ldd  gpio1
5121 ea2a 34 06               pshs d
5122 ea2c cc 00 00            ldd  #0
5123 ea2f e7 f1               stb  [,s++]
5124 ea31 fc 70 bd            ldd  port2
5125 ea34 34 06               pshs d
5126 ea36 cc 00 00            ldd  #0
5127 ea39 e7 f1               stb  [,s++]
5128 ea3b fc 70 bf            ldd  port1
5129 ea3e 34 06               pshs d
5130 ea40 cc 00 ff            ldd  #255
5131 ea43 e7 f1               stb  [,s++]
5132 ea45 cc 00 00            ldd  #0
5133 ea48 f7 70 0d            stb  flag
5134 ea4b bd df 85            jsr initacia
5135 ea4e bd e0 fd            jsr newline
5136 ea51 cc eb 2c            ldd  #cc238+0
5137 ea54 34 06               pshs d
5138 ea56 bd e0 53            jsr puts
5139 ea59 32 62               leas 2,s
5140 ea5b bd c2 3a            jsr InitLcd
5141 ea5e bd c2 3a            jsr InitLcd
5142 ea61 cc eb 49            ldd  #cc238+29
5143 ea64 34 06               pshs d
5144 ea66 bd c2 7d            jsr PutLCD
5145 ea69 32 62               leas 2,s
5146 ea6b cc 00 00            ldd  #0
5147 ea6e 34 06               pshs d
5148 ea70 cc 00 01            ldd  #1
5149 ea73 34 06               pshs d
5150 ea75 bd c1 a9            jsr goto_xy
5151 ea78 32 64               leas 4,s
5152 ea7a cc eb 5d            ldd  #cc238+49
5153 ea7d 34 06               pshs d
5154 ea7f bd c2 7d            jsr PutLCD
5155 ea82 32 62               leas 2,s
5156 ea84 cc 70 35            ldd  #buffer
5157 ea87 34 06               pshs d
5158 ea89 cc 00 05            ldd  #5
5159 ea8c e3 e1               addd ,s++
5160 ea8e 34 06               pshs d
5161 ea90 cc c1 0d            ldd  #convert
5162 ea93 34 06               pshs d
5163 ea95 cc 00 06            ldd  #6
5164 ea98 e3 e1               addd ,s++
5165 ea9a 34 06               pshs d
5166 ea9c e6 f1               ldb  [,s++]
5167 ea9e 1d                  sex
5168 ea9f e7 f1               stb  [,s++]
5169 eaa1 cc 70 35            ldd  #buffer
5170 eaa4 34 06               pshs d
5171 eaa6 cc 00 04            ldd  #4
5172 eaa9 e3 e1               addd ,s++
5173 eaab 34 06               pshs d
5174 eaad cc c1 0d            ldd  #convert
5175 eab0 34 06               pshs d
5176 eab2 cc 00 08            ldd  #8
5177 eab5 e3 e1               addd ,s++
5178 eab7 34 06               pshs d
5179 eab9 e6 f1               ldb  [,s++]
5180 eabb 1d                  sex
5181 eabc e7 f1               stb  [,s++]
5182 eabe cc 70 35            ldd  #buffer
5183 eac1 34 06               pshs d
5184 eac3 cc 00 03            ldd  #3
5185 eac6 e3 e1               addd ,s++
5186 eac8 34 06               pshs d
5187 eaca cc c1 0d            ldd  #convert
5188 eacd 34 06               pshs d
5189 eacf cc 00 00            ldd  #0
5190 ead2 e3 e1               addd ,s++
5191 ead4 34 06               pshs d
5192 ead6 e6 f1               ldb  [,s++]
5193 ead8 1d                  sex
5194 ead9 e7 f1               stb  [,s++]
5195 eadb cc 70 35            ldd  #buffer
5196 eade 34 06               pshs d
5197 eae0 cc 00 02            ldd  #2
5198 eae3 e3 e1               addd ,s++
5199 eae5 34 06               pshs d
5200 eae7 cc c1 0d            ldd  #convert
5201 eaea 34 06               pshs d
5202 eaec cc 00 09            ldd  #9
5203 eaef e3 e1               addd ,s++
5204 eaf1 34 06               pshs d
5205 eaf3 e6 f1               ldb  [,s++]
5206 eaf5 1d                  sex
5207 eaf6 e7 f1               stb  [,s++]
5208 eaf8 cc 70 35            ldd  #buffer
5209 eafb 34 06               pshs d
5210 eafd cc 00 01            ldd  #1
5211 eb00 e3 e1               addd ,s++
5212 eb02 34 06               pshs d
5213 eb04 cc 00 00            ldd  #0
5214 eb07 e7 f1               stb  [,s++]
5215 eb09 cc 70 35            ldd  #buffer
5216 eb0c 34 06               pshs d
5217 eb0e cc 00 00            ldd  #0
5218 eb11 e3 e1               addd ,s++
5219 eb13 34 06               pshs d
5220 eb15 cc 00 00            ldd  #0
5221 eb18 e7 f1               stb  [,s++]
5222                         cc241:  
5223 eb1a cc 00 01            ldd  #1
5224 eb1d 10 83 00 00         cmpd #0
5225 eb21 10 27 00 06         lbeq cc242
5226 eb25 bd df 09            jsr scan1
5227 eb28 7e eb 1a            jmp cc241
5228                         cc242:  
5229 eb2b 39                  rts
5230                         cc238:  
5231 eb2c 36 38 30 39 20 4d   FCB 54,56,48,57,32,77,73,67,82,79
     49 43 52 4f
5232 eb36 50 52 4f 43 45 53   FCB 80,82,79,67,69,83,83,79,82,32
     53 4f 52 20
5233 eb40 4b 49 54 20 32 30   FCB 75,73,84,32,50,48,49,55,0,54
     31 37 00 36
5234 eb4a 38 30 39 20 4d 49   FCB 56,48,57,32,77,73,67,82,79,80
     43 52 4f 50
5235 eb54 52 4f 43 45 53 53   FCB 82,79,67,69,83,83,79,82,0,51
     4f 52 00 33
5236 eb5e 32 6b 42 20 52 41   FCB 50,107,66,32,82,65,77,32,85,65
     4d 20 55 41
5237 eb68 52 54 20 4c 43 44   FCB 82,84,32,76,67,68,0
     00
5238                           END
